CREATE OR REPLACE PACKAGE PKG_INTFZ_REG_MULTA_SICOB_SIA IS

  -- ******************************************************************************
  -- Descripción: Procedure que registra la multa en SIA
  --
  -- Input Parameters: PIN_ID_MULTA
  --
  -- Output Parameters: POV_COD_RESULT , POV_MSG_RESULT
  --
  --
  -- Author:      Victor Bendezú
  -- Proyecto:    Migración de SICOB a SIA
  --
  -- Revisiones
  -- Fecha            Autor         Motivo del cambio    
  -- ----------------------------------------------------------------
  -- 10/12/2022     Victor Bendezú  Migración de SICOB a SIA    
  -- ***************************************************************      
  PROCEDURE SP_REGISTRO_MULTA_SICOB_A_SIA_BACKUP(PIN_ID_MULTA   IN NUMBER,
                                          PON_COD_RESULT OUT NUMBER,
                                          POV_MSG_RESULT OUT VARCHAR2);
                                          
  -- ******************************************************************************
  -- Descripción: Procedure que registra la multa en SIA
  --
  -- Input Parameters: PIN_ID_MULTA
  --
  -- Output Parameters: POV_COD_RESULT , POV_MSG_RESULT
  --
  --
  -- Author:      Victor Bendezú
  -- Proyecto:    Migración de SICOB a SIA
  --
  -- Revisiones
  -- Fecha            Autor         Motivo del cambio    
  -- ----------------------------------------------------------------
  -- 10/12/2022     Victor Bendezú  Migración de SICOB a SIA    
  -- ***************************************************************      
  PROCEDURE SP_REGISTRO_MULTA_SICOB_A_SIA(PIN_ID_MULTA   IN NUMBER,
                                          PON_COD_RESULT OUT NUMBER,
                                          POV_MSG_RESULT OUT VARCHAR2);
                                          
  -- ******************************************************************************
  -- Descripción: Procedure que actualiza la multa en SIA
  --
  -- Input Parameters: PIN_ID_MULTA
  --
  -- Output Parameters: POV_COD_RESULT , POV_MSG_RESULT
  --
  --
  -- Author:      Victor Bendezú
  -- Proyecto:    Migración de SICOB a SIA
  --
  -- Revisiones
  -- Fecha            Autor         Motivo del cambio    
  -- ----------------------------------------------------------------
  -- 10/12/2022     Victor Bendezú  Migración de SICOB a SIA    
  -- ***************************************************************      
  PROCEDURE SP_ACTUALIZA_MULTA_SICOB_A_SIA(PIN_ID_MULTA   IN NUMBER,
                                          PON_COD_RESULT OUT NUMBER,
                                          POV_MSG_RESULT OUT VARCHAR2);          
  
  -- ******************************************************************************
  -- Descripción: Procedure que registra los denunciados y denunciantes en SIA
  --
  -- Input Parameters: PIN_ID_MULTA
  --
  -- Output Parameters: POV_COD_RESULT , POV_MSG_RESULT
  --
  --
  -- Author:      Victor Bendezú
  -- Proyecto:    Migración de SICOB a SIA
  --
  -- Revisiones
  -- Fecha            Autor         Motivo del cambio    
  -- ----------------------------------------------------------------
  -- 10/12/2022     Victor Bendezú  Migración de SICOB a SIA    
  -- ***************************************************************      
  PROCEDURE SP_REGISTRO_PERSONA_SICOB_A_SIA(PIN_ID_MULTA      IN NUMBER,
                                            PIV_IDENTIFICADOR IN VARCHAR2,
                                            PON_COD_RESULT    OUT NUMBER,
                                            POV_MSG_RESULT    OUT VARCHAR2);
                                            
  -- ******************************************************************************
  -- Descripción: Procedure que recepciona la multa en SIA
  --
  -- Input Parameters: PIN_ID_MULTA
  --
  -- Output Parameters: POV_COD_RESULT , POV_MSG_RESULT
  --
  --
  -- Author:      Victor Bendezú
  -- Proyecto:    Migración de SICOB a SIA
  --
  -- Revisiones
  -- Fecha            Autor         Motivo del cambio    
  -- ----------------------------------------------------------------
  -- 10/12/2022     Victor Bendezú  Migración de SICOB a SIA    
  -- ***************************************************************      
  PROCEDURE SP_RECEPCION_MULTA_SICOB_A_SIA(PIN_ID_MULTA   IN NUMBER,
                                           PON_COD_RESULT OUT NUMBER,
                                           POV_MSG_RESULT OUT VARCHAR2);


  -- ******************************************************************************
  -- Descripción: Procedure que asigna la multa en SIA
  --
  -- Input Parameters: PIN_ID_MULTA
  --
  -- Output Parameters: POV_COD_RESULT , POV_MSG_RESULT
  --
  --
  -- Author:      Victor Bendezú
  -- Proyecto:    Migración de SICOB a SIA
  --
  -- Revisiones
  -- Fecha            Autor         Motivo del cambio    
  -- ----------------------------------------------------------------
  -- 10/12/2022     Victor Bendezú  Migración de SICOB a SIA    
  -- ***************************************************************      
  PROCEDURE SP_ASIGNAR_MULTA_SICOB_A_SIA(PIN_ID_MULTA   IN NUMBER,
                                         PON_COD_RESULT OUT NUMBER,
                                         POV_MSG_RESULT OUT VARCHAR2);
                                         
                                         
  -- ******************************************************************************
  -- Descripción: Procedure que genera expediente de la multa en SIA
  --
  -- Input Parameters: PIN_ID_MULTA
  --
  -- Output Parameters: POV_COD_RESULT , POV_MSG_RESULT
  --
  --
  -- Author:      Victor Bendezú
  -- Proyecto:    Migración de SICOB a SIA
  --
  -- Revisiones
  -- Fecha            Autor         Motivo del cambio    
  -- ----------------------------------------------------------------
  -- 10/12/2022     Victor Bendezú  Migración de SICOB a SIA    
  -- ***************************************************************      
  PROCEDURE SP_GENERA_EXPEDIENTE_MULTA_SICOB_A_SIA(PIN_ID_MULTA   IN NUMBER,
                                                   PON_COD_RESULT OUT NUMBER,
                                                   POV_MSG_RESULT OUT VARCHAR2);      
                                                   
  -- ******************************************************************************
  -- Descripción: Procedure que marca la multa en SIA por el File
  --
  -- Input Parameters: PIN_ID_MULTA
  --
  -- Output Parameters: POV_COD_RESULT , POV_MSG_RESULT
  --
  --
  -- Author:      Victor Bendezú
  -- Proyecto:    Migración de SICOB a SIA
  --
  -- Revisiones
  -- Fecha            Autor         Motivo del cambio    
  -- ----------------------------------------------------------------
  -- 10/12/2022     Victor Bendezú  Migración de SICOB a SIA    
  -- ***************************************************************      
  PROCEDURE SP_MARCAR_MULTA_FILE_SICOB_A_SIA(PIN_ID_MULTA   IN NUMBER,
                                             PON_COD_RESULT OUT NUMBER,
                                             POV_MSG_RESULT OUT VARCHAR2);      
                                             
  -- ******************************************************************************
  -- Descripción: Procedure que envia el archivo Central migrado al SIA
  --
  -- Input Parameters: PIN_ID_MULTA
  --
  -- Output Parameters: POV_COD_RESULT , POV_MSG_RESULT
  --
  --
  -- Author:      Victor Bendezú
  -- Proyecto:    Migración de SICOB a SIA
  --
  -- Revisiones
  -- Fecha            Autor         Motivo del cambio    
  -- ----------------------------------------------------------------
  -- 10/12/2022     Victor Bendezú  Migración de SICOB a SIA    
  -- ***************************************************************      
  PROCEDURE SP_ENVIAR_ARCHIVO_CENTRAL_SICOB_A_SIA(PIN_ID_MULTA   IN NUMBER,
                                                 PON_COD_RESULT OUT NUMBER,
                                                 POV_MSG_RESULT OUT VARCHAR2); 
                                                 
  -- ******************************************************************************
  -- Descripción: Procedure que genear Cronograma de Pago al SIA
  --
  -- Input Parameters: PIN_ID_MULTA
  --
  -- Output Parameters: POV_COD_RESULT , POV_MSG_RESULT
  --
  --
  -- Author:      Victor Bendezú
  -- Proyecto:    Migración de SICOB a SIA
  --
  -- Revisiones
  -- Fecha            Autor         Motivo del cambio    
  -- ----------------------------------------------------------------
  -- 10/12/2022     Victor Bendezú  Migración de SICOB a SIA    
  -- ***************************************************************      
  PROCEDURE SP_CREAR_CRONOGRAMA_SICOB_A_SIA(PIN_ID_MULTA   IN NUMBER,
                                            PON_COD_RESULT OUT NUMBER,
                                            POV_MSG_RESULT OUT VARCHAR2);                                
END;
/
CREATE OR REPLACE PACKAGE BODY PKG_INTFZ_REG_MULTA_SICOB_SIA IS

  EX_CONTROLADO EXCEPTION;
  TYPE CUR_RESULT IS REF CURSOR;

  PROCEDURE SP_REGISTRO_MULTA_SICOB_A_SIA_BACKUP(PIN_ID_MULTA   IN NUMBER,
                                          PON_COD_RESULT OUT NUMBER,
                                          POV_MSG_RESULT OUT VARCHAR2) IS
  
    REG_T_SCOB_MULTA                 USR_SICOB.T_SCOB_MULTA%ROWTYPE;
    REG_T_SCOB_MULTA_DETAL           USR_SICOB.T_SCOB_MULTA_DETAL%ROWTYPE;
    REG_T_SCOB_MATERIA               USR_SICOB.T_SCOB_MATERIA%ROWTYPE;
    REG_T_SCOB_TIPO_PROCEDIMIENTO    USR_SICOB.T_SCOB_TIPO_PROCEDIMIENTO%ROWTYPE;
    REG_T_SCOB_ORGANO_RESOLUTIVO     USR_SICOB.T_SCOB_ORGANO_RESOLUTIVO%ROWTYPE;
    REG_T_SCOB_SEDE                  USR_SICOB.T_SCOB_SEDE%ROWTYPE;
    REG_T_SCOB_SUBMATERIA            USR_SICOB.T_SCOB_SUBMATERIA%ROWTYPE;
    REG_T_SCOB_PERSONA               USR_SICOB.T_SCOB_PERSONA%ROWTYPE;
    REG_T_SCOB_AREA_COBRANZA         USR_SICOB.T_SCOB_AREA_COBRANZA%ROWTYPE;
    REG_T_SCOB_MULTA_COBRANZA        USR_SICOB.T_SCOB_MULTA_COBRANZA%ROWTYPE;
    REG_T_SCOB_EST_EXP_COB_MOTIVO    USR_SICOB.T_SCOB_EST_EXP_COB_MOTIVO%ROWTYPE;
    REG_T_SCOB_EXPEDIENTE            USR_SICOB.T_SCOB_EXPEDIENTE%ROWTYPE;
    REG_T_SCOB_USUARIO               USR_SICOB.T_SCOB_USUARIO%ROWTYPE;
    REG_T_SCOB_EST_EXP_COB           USR_SICOB.T_SCOB_EST_EXP_COB%ROWTYPE;
    REG_T_SCOB_ARCHIVO_CENTRAL       USR_SICOB.T_SCOB_ARCHIVO_CENTRAL%ROWTYPE;
    REG_T_SCOB_ORG_RESOL_MATERIA     USR_SICOB.T_SCOB_ORG_RESOL_MATERIA%ROWTYPE;    
    
    VV_IDENTIFICADOR                 SGCORESYS.CO_MULTA.IDENTIFICADOR%TYPE;
    VV_ANIO                          SGCORESYS.CO_MULTA.ANIO%TYPE;
    VV_ORIGEN                        SGCORESYS.CO_MULTA.ORIGEN%TYPE;
    VD_FECHAREGISTRO                 SGCORESYS.CO_MULTA.FECHAREGISTRO%TYPE;
    VV_CODTIPOPROCEDIMIENTO          SGCORESYS.CO_MULTA.CODTIPOPROCEDIMIENTO%TYPE;
    VV_CODAREA                       SGCORESYS.CO_MULTA.CODAREA%TYPE;
    VV_CODSEDE                       SGCORESYS.CO_MULTA.CODSEDE%TYPE;
    VV_CODMATERIA                    SGCORESYS.CO_MULTA.CODMATERIA%TYPE;
    VV_CODSUBMATERIA                 SGCORESYS.CO_MULTA.CODSUBMATERIA%TYPE;
    VV_EXPEDIENTE                    SGCORESYS.CO_MULTA.EXPEDIENTE%TYPE;
    VV_EXPEDIENTEANTERIOR            SGCORESYS.CO_MULTA.EXPEDIENTEANTERIOR%TYPE;
    VV_ORPSRESOLNUMERO               SGCORESYS.CO_MULTA.ORPSRESOLNUMERO%TYPE;
    VD_ORPSRESOLFECHAREGISTRO        SGCORESYS.CO_MULTA.ORPSRESOLFECHAREGISTRO%TYPE;
    VD_ORPSRESOLFECHAEMISION         SGCORESYS.CO_MULTA.ORPSRESOLFECHAEMISION%TYPE;
    VD_ORPSRESOLFECHANOTIFICACION    SGCORESYS.CO_MULTA.ORPSRESOLFECHANOTIFICACION%TYPE;
    VD_ORPSFECHAAPELACION            SGCORESYS.CO_MULTA.ORPSFECHAAPELACION%TYPE;
    VV_ORPSUSUARIO                   SGCORESYS.CO_MULTA.ORPSUSUARIO%TYPE;
    VN_ORPSCANTIDADDIAS              SGCORESYS.CO_MULTA.ORPSCANTIDADDIAS%TYPE;
    VV_COMRESOLNUMERO                SGCORESYS.CO_MULTA.COMRESOLNUMERO%TYPE;
    VD_COMRESOLFECHAREGISTRO         SGCORESYS.CO_MULTA.COMRESOLFECHAREGISTRO%TYPE;
    VD_COMRESOLFECHAEMISION          SGCORESYS.CO_MULTA.COMRESOLFECHAEMISION%TYPE;
    VD_COMRESOLFECHANOTIFICACION     SGCORESYS.CO_MULTA.COMRESOLFECHANOTIFICACION%TYPE;
    VD_COMFECHAREVISION              SGCORESYS.CO_MULTA.COMFECHAREVISION%TYPE;
    VV_COMUSUARIO                    SGCORESYS.CO_MULTA.COMUSUARIO%TYPE;
    VN_COMCANTIDADDIAS               SGCORESYS.CO_MULTA.COMCANTIDADDIAS%TYPE;
    VV_SALARESOLNUMERO               SGCORESYS.CO_MULTA.SALARESOLNUMERO%TYPE;
    VD_SALARESOLFECHAREGISTRO        SGCORESYS.CO_MULTA.SALARESOLFECHAREGISTRO%TYPE;
    VD_SALARESOLFECHAEMISION         SGCORESYS.CO_MULTA.SALARESOLFECHAEMISION%TYPE;
    VD_SALARESOLFECHANOTIFICACION    SGCORESYS.CO_MULTA.SALARESOLFECHANOTIFICACION%TYPE;
    VV_SALAUSUARIO                   SGCORESYS.CO_MULTA.SALAUSUARIO%TYPE;
    VN_SALACANTIDADDIAS              SGCORESYS.CO_MULTA.SALACANTIDADDIAS%TYPE;
    VV_TIPOMULTA                     SGCORESYS.CO_MULTA.TIPOMULTA%TYPE;
    VN_DENUNCIANTE                   SGCORESYS.CO_MULTA.DENUNCIANTE%TYPE;
    VN_DENUNCIADO                    SGCORESYS.CO_MULTA.DENUNCIADO%TYPE;
    VV_DENUNCIANTENOMBRE             SGCORESYS.CO_MULTA.DENUNCIANTENOMBRE%TYPE;
    VN_SANCIONADO                    SGCORESYS.CO_MULTA.SANCIONADO%TYPE;
    VV_CODCLASIFICACION              SGCORESYS.CO_MULTA.CODCLASIFICACION%TYPE;
    VV_CODACTIVIDAD                  SGCORESYS.CO_MULTA.CODACTIVIDAD%TYPE;
    VV_ASOCUPORCFLAG                 SGCORESYS.CO_MULTA.ASOCUPORCFLAG%TYPE;
    VN_ASOCUPORC                     SGCORESYS.CO_MULTA.ASOCUPORC%TYPE;
    VN_UITNRO                        SGCORESYS.CO_MULTA.UITNRO%TYPE;
    VN_UITMONTOCAPITAL               SGCORESYS.CO_MULTA.UITMONTOCAPITAL%TYPE;
    VN_INTERESES                     SGCORESYS.CO_MULTA.INTERESES%TYPE;
    VN_MORA                          SGCORESYS.CO_MULTA.MORA%TYPE;
    VN_GASTOS                        SGCORESYS.CO_MULTA.GASTOS%TYPE;
    VN_AMORTIZADO                    SGCORESYS.CO_MULTA.AMORTIZADO%TYPE;
    VN_AMORTIZADOINTERESES           SGCORESYS.CO_MULTA.AMORTIZADOINTERESES%TYPE;
    VN_AMORTIZADOMORA                SGCORESYS.CO_MULTA.AMORTIZADOMORA%TYPE;
    VN_AMORTIZADOGASTOS              SGCORESYS.CO_MULTA.AMORTIZADOGASTOS%TYPE;
    VN_SALDO                         SGCORESYS.CO_MULTA.SALDO%TYPE;
    VN_SALDOINTERESES                SGCORESYS.CO_MULTA.SALDOINTERESES%TYPE;
    VN_SALDOMORA                     SGCORESYS.CO_MULTA.SALDOMORA%TYPE;
    VN_SALDOGASTOS                   SGCORESYS.CO_MULTA.SALDOGASTOS%TYPE;
    VV_ESTADOMULTA                   SGCORESYS.CO_MULTA.ESTADOMULTA%TYPE;
    VN_DESCUENTOMULTA                SGCORESYS.CO_MULTA.DESCUENTOMULTA%TYPE;
    VD_SECFECHAREGISTRO              SGCORESYS.CO_MULTA.SECFECHAREGISTRO%TYPE;
    VV_FILEANIO                      SGCORESYS.CO_MULTA.FILEANIO%TYPE;
    VD_FILEFECHARECEPCION            SGCORESYS.CO_MULTA.FILEFECHARECEPCION%TYPE;
    VV_FILENUMERO                    SGCORESYS.CO_MULTA.FILENUMERO%TYPE;
    VV_NUMEROINGRESO                 SGCORESYS.CO_MULTA.NUMEROINGRESO%TYPE;
    VV_ESTADOMULTACOBRANZA           SGCORESYS.CO_MULTA.ESTADOMULTACOBRANZA%TYPE;
    VV_CODMOTIVOMULTA                SGCORESYS.CO_MULTA.CODMOTIVOMULTA%TYPE;
    VD_FECHAOBSERVACION              SGCORESYS.CO_MULTA.FECHAOBSERVACION%TYPE;
    VD_FECHAULTIMOINGRESO            SGCORESYS.CO_MULTA.FECHAULTIMOINGRESO%TYPE;
    VV_COBEXPEDIENTENRO              SGCORESYS.CO_MULTA.COBEXPEDIENTENRO%TYPE;
    VD_COBEXPEDIENTEFECHA            SGCORESYS.CO_MULTA.COBEXPEDIENTEFECHA%TYPE;
    VV_COBGESTOR                     SGCORESYS.CO_MULTA.COBGESTOR%TYPE;
    VD_FECHAASIGNACION               SGCORESYS.CO_MULTA.FECHAASIGNACION%TYPE;
    VD_FECHACARTA                    SGCORESYS.CO_MULTA.FECHACARTA%TYPE;
    VD_RECFECHAEMISION               SGCORESYS.CO_MULTA.RECFECHAEMISION%TYPE;
    VD_RECFECHANOTIFICACION          SGCORESYS.CO_MULTA.RECFECHANOTIFICACION%TYPE;
    VV_EMBARGOFLAG                   SGCORESYS.CO_MULTA.EMBARGOFLAG%TYPE;
    VV_COBEXPEDIENTEESTADO           SGCORESYS.CO_MULTA.COBEXPEDIENTEESTADO%TYPE;
    VV_COBEXPEDIENTEMOTIVO           SGCORESYS.CO_MULTA.COBEXPEDIENTEMOTIVO%TYPE;
    VD_COBFECHAULTIMO                SGCORESYS.CO_MULTA.COBFECHAULTIMO%TYPE;
    VD_FECHARIESGO                   SGCORESYS.CO_MULTA.FECHARIESGO%TYPE;
    VV_COBROEXPECTATIVA              SGCORESYS.CO_MULTA.COBROEXPECTATIVA%TYPE;
    VV_REGION                        SGCORESYS.CO_MULTA.REGION%TYPE;
    VV_ENVIONUMERO                   SGCORESYS.CO_MULTA.ENVIONUMERO%TYPE;
    VD_ENVIOFECHA                    SGCORESYS.CO_MULTA.ENVIOFECHA%TYPE;
    VV_UBICACIONFISICA               SGCORESYS.CO_MULTA.UBICACIONFISICA%TYPE;
    VN_CUOTA                         SGCORESYS.CO_MULTA.CUOTA%TYPE;
    VD_FECHAVENCIMIENTO              SGCORESYS.CO_MULTA.FECHAVENCIMIENTO%TYPE;
    VV_ESTADOPAGO                    SGCORESYS.CO_MULTA.ESTADOPAGO%TYPE;
    VV_CODIGOMULTA                   SGCORESYS.CO_MULTA.CODIGOMULTA%TYPE;
    VV_AECNOTIFICACIONESTADO         SGCORESYS.CO_MULTA.AECNOTIFICACIONESTADO%TYPE;
    VD_AECNOTIFICACIONFECHA          SGCORESYS.CO_MULTA.AECNOTIFICACIONFECHA%TYPE;
    VV_TIPOFRACCIONAMIENTO           SGCORESYS.CO_MULTA.TIPOFRACCIONAMIENTO%TYPE;
    VV_COMRESOLANIO                  SGCORESYS.CO_MULTA.COMRESOLANIO%TYPE;
    VV_COMRESOLCODIGO                SGCORESYS.CO_MULTA.COMRESOLCODIGO%TYPE;
    VV_CUOTANOTIFICACIONESTADO       SGCORESYS.CO_MULTA.CUOTANOTIFICACIONESTADO%TYPE;
    VD_CUOTANOTIFICACIONFECHA        SGCORESYS.CO_MULTA.CUOTANOTIFICACIONFECHA%TYPE;
    VV_EXPEDCOBRANZAANIO             SGCORESYS.CO_MULTA.EXPEDCOBRANZAANIO%TYPE;
    VV_CUMANIO                       SGCORESYS.CO_MULTA.CUMANIO%TYPE;
    VV_COBRANZADUDOSAESTADO          SGCORESYS.CO_MULTA.COBRANZADUDOSAESTADO%TYPE;
    VV_COBRANZADUDOSAVOUCHER         SGCORESYS.CO_MULTA.COBRANZADUDOSAVOUCHER%TYPE;
    VD_COBRANZADUDOSAFECHA           SGCORESYS.CO_MULTA.COBRANZADUDOSAFECHA%TYPE;
    VV_COBRANZADUDOSAVOUCHERCLEARING SGCORESYS.CO_MULTA.COBRANZADUDOSAVOUCHERCLEARING%TYPE;
    VD_COBRANZADUDOSAFECHACLEARING   SGCORESYS.CO_MULTA.COBRANZADUDOSAFECHACLEARING%TYPE;
    VV_AECCONCILIACIONESTADO         SGCORESYS.CO_MULTA.AECCONCILIACIONESTADO%TYPE;
    VD_AECCONCILIACIONFECHA          SGCORESYS.CO_MULTA.AECCONCILIACIONFECHA%TYPE;
    VV_CODAREADESCRIPCION            SGCORESYS.CO_MULTA.CODAREADESCRIPCION%TYPE;
    VV_REFERENCIATIPO                SGCORESYS.CO_MULTA.REFERENCIATIPO%TYPE;
    VV_REFERENCIANUMERO              SGCORESYS.CO_MULTA.REFERENCIANUMERO%TYPE;
    VV_CASTIGORESOLNUMERO            SGCORESYS.CO_MULTA.CASTIGORESOLNUMERO%TYPE;
    VD_CASTIGORESOLFECHA             SGCORESYS.CO_MULTA.CASTIGORESOLFECHA%TYPE;
    VD_CUOTAFINRESOLFECHA            SGCORESYS.CO_MULTA.CUOTAFINRESOLFECHA%TYPE;
    VD_CUOTAFINRESOLNUMERO           SGCORESYS.CO_MULTA.CUOTAFINRESOLNUMERO%TYPE;
    VV_CUOTAFINFECHA                 SGCORESYS.CO_MULTA.CUOTAFINFECHA%TYPE;
    VV_CASTIGOOBSERVACION            SGCORESYS.CO_MULTA.CASTIGOOBSERVACION%TYPE;
    VV_CUOTAFINMOTIVO                SGCORESYS.CO_MULTA.CUOTAFINMOTIVO%TYPE;
    VN_COMPROBANTEINGRESO            SGCORESYS.CO_MULTA.COMPROBANTEINGRESO%TYPE;
    VV_CODMOTIVOMULTACOB             SGCORESYS.CO_MULTA.CODMOTIVOMULTACOB%TYPE;
    VV_CODCENTROCOSTO                SGCORESYS.CO_MULTA.CODCENTROCOSTO%TYPE;
    VV_DECLNUMERO01                  SGCORESYS.CO_MULTA.DECLNUMERO01%TYPE;
    VD_DECLFECHAEMISION01            SGCORESYS.CO_MULTA.DECLFECHAEMISION01%TYPE;
    VD_DECLFECHANOTIF01              SGCORESYS.CO_MULTA.DECLFECHANOTIF01%TYPE;
    VV_DECLNUMERO02                  SGCORESYS.CO_MULTA.DECLNUMERO02%TYPE;
    VD_DECLFECHAEMISION02            SGCORESYS.CO_MULTA.DECLFECHAEMISION02%TYPE;
    VD_DECLFECHANOTIF02              SGCORESYS.CO_MULTA.DECLFECHANOTIF02%TYPE;
    VV_DECLNUMERO03                  SGCORESYS.CO_MULTA.DECLNUMERO03%TYPE;
    VD_DECLFECHAEMISION03            SGCORESYS.CO_MULTA.DECLFECHAEMISION03%TYPE;
    VD_DECLFECHANOTIF03              SGCORESYS.CO_MULTA.DECLFECHANOTIF03%TYPE;
    VN_SALDOCAPITAL                  SGCORESYS.CO_MULTA.SALDOCAPITAL%TYPE;
    VN_SALDOINTERES                  SGCORESYS.CO_MULTA.SALDOINTERES%TYPE;
    VN_MONTOPROVISIONDUDOSA          SGCORESYS.CO_MULTA.MONTOPROVISIONDUDOSA%TYPE;
    VN_MONTOPROVISIONDUDOSAGASTOS    SGCORESYS.CO_MULTA.MONTOPROVISIONDUDOSAGASTOS%TYPE;
    VN_MONTOVOUCHERCOBRANZA          SGCORESYS.CO_MULTA.MONTOVOUCHERCOBRANZA%TYPE;
    VN_MONTOVOUCHERCOBRANZAGASTOS    SGCORESYS.CO_MULTA.MONTOVOUCHERCOBRANZAGASTOS%TYPE;
    
    VV_ME_IDENTIFICADOR                 SGCORESYS.CO_MULTAESTADO.IDENTIFICADOR%TYPE;
    VN_ME_SECUENCIA                     SGCORESYS.CO_MULTAESTADO.SECUENCIA%TYPE;
    VV_ME_ESTADOMULTA                   SGCORESYS.CO_MULTAESTADO.ESTADOMULTA%TYPE;
    VV_ME_ESTADOPAGO                    SGCORESYS.CO_MULTAESTADO.ESTADOPAGO%TYPE;
    VV_ME_ESTADOCOBRANZA                SGCORESYS.CO_MULTAESTADO.ESTADOCOBRANZA%TYPE;
    VV_ME_ESTADOEXPEDIENTE              SGCORESYS.CO_MULTAESTADO.ESTADOEXPEDIENTE%TYPE;
    VN_ME_CAPITAL                       SGCORESYS.CO_MULTAESTADO.CAPITAL%TYPE;
    VN_ME_INTERESES                     SGCORESYS.CO_MULTAESTADO.INTERESES%TYPE;
    VN_ME_MORA                          SGCORESYS.CO_MULTAESTADO.MORA%TYPE;
    VN_ME_GASTOS                        SGCORESYS.CO_MULTAESTADO.GASTOS%TYPE;
    VN_ME_CAPITAL_ANT                   SGCORESYS.CO_MULTAESTADO.CAPITAL_ANT%TYPE;
    VN_ME_INTERESES_ANT                 SGCORESYS.CO_MULTAESTADO.INTERESES_ANT%TYPE;
    VN_ME_MORA_ANT                      SGCORESYS.CO_MULTAESTADO.MORA_ANT%TYPE;
    VN_ME_GASTOS_ANT                    SGCORESYS.CO_MULTAESTADO.GASTOS_ANT%TYPE;
    VV_ME_CODIGOMOTIVOEXPEDIENTE        SGCORESYS.CO_MULTAESTADO.CODIGOMOTIVOEXPEDIENTE%TYPE;
    VD_ME_FECHA                         SGCORESYS.CO_MULTAESTADO.FECHA%TYPE;
    VV_ME_CONTABILIZACIONPENDIENTEFLAG  SGCORESYS.CO_MULTAESTADO.CONTABILIZACIONPENDIENTEFLAG%TYPE;
    VV_ME_PERIODO                       SGCORESYS.CO_MULTAESTADO.PERIODO%TYPE;
    VV_ME_VOUCHER                       SGCORESYS.CO_MULTAESTADO.VOUCHER%TYPE;
    VV_ME_ULTIMOUSUARIO                 SGCORESYS.CO_MULTAESTADO.ULTIMOUSUARIO%TYPE;
    VD_ME_ULTIMAFECHAMODIF              SGCORESYS.CO_MULTAESTADO.ULTIMAFECHAMODIF%TYPE;
    VV_ME_CODIGOMULTA                   SGCORESYS.CO_MULTAESTADO.CODIGOMULTA%TYPE;
    VV_ME_ORCONCILIACIONESTADO          SGCORESYS.CO_MULTAESTADO.ORCONCILIACIONESTADO%TYPE;
    VD_ME_ORCONCILIACIONFECHA           SGCORESYS.CO_MULTAESTADO.ORCONCILIACIONFECHA%TYPE;
    VV_ME_CODAREA                       SGCORESYS.CO_MULTAESTADO.CODAREA%TYPE;
    VN_ME_UITNRO                        SGCORESYS.CO_MULTAESTADO.UITNRO%TYPE;
    VN_ME_SALDOCAPITAL                  SGCORESYS.CO_MULTAESTADO.SALDOCAPITAL%TYPE;
    VN_ME_SALDOINTERES                  SGCORESYS.CO_MULTAESTADO.SALDOINTERES%TYPE;
    VN_ME_SALDOMORA                     SGCORESYS.CO_MULTAESTADO.SALDOMORA%TYPE;
    VN_ME_SALDOGASTOS                   SGCORESYS.CO_MULTAESTADO.SALDOGASTOS%TYPE;
    VV_ME_CUENTAPROVISION               SGCORESYS.CO_MULTAESTADO.CUENTAPROVISION%TYPE;
    
    VV_DESCRIPCION_TIPO_MULTA           USR_SICOB.T_SCOB_TABLA_DET.TXT_DESCRIPCION%TYPE;
    
    VR_REC_CRONOGRAMA PKG_INTFZ_MULTAS_SIA.REC_CRONO_TOTAL;
    VC_CUR_CRONOGRAMA CUR_RESULT;
    VN_NU_VUELTA      NUMBER;
    VD_DT_APROBACIONCUOTA DATE;
    
    VN_NUM_PERSONA_SANCIONADO NUMBER;
    VN_NUM_PERSONA_DENUNCIANTE NUMBER;
    VV_ES_ASOCIACION VARCHAR2(2);
    VV_TDOC_PERSONA VARCHAR(10);
    VV_DOC_DENUNCIANTE VARCHAR2(50);
    VV_DOC_SANCIONADO VARCHAR2(50);
    VV_DESCRIPCION_TIPO_DOCUMENTO VARCHAR2(100);
    VV_SANCIONADONOMBRE                 SGCORESYS.CO_MULTA.DENUNCIANTENOMBRE%TYPE;
    
    CURSOR CURSOR_DENUNCIANTES(P_ID_MULTA NUMBER)     
    IS 
     SELECT DISTINCT PERS.*
       FROM USR_SICOB.T_SCOB_MULTA_DETAL MDET
      INNER JOIN USR_SICOB.T_SCOB_MULTA_DENUNCIANTE MDEN
         ON (MDEN.ID_MULTA_DETAL = MDET.ID_MULTA_DETAL AND MDEN.ESTADO = '1')
      INNER JOIN USR_SICOB.T_SCOB_PERSONA PERS
         ON (PERS.ID_PERSONA = MDEN.ID_PERSONA)
      INNER JOIN USR_SICOB.T_SCOB_MULTA MULT
         ON (MULT.ID_MULTA = MDET.ID_MULTA)
      WHERE MDET.FLG_ACTUAL = '1'
        AND MDET.ID_MULTA = P_ID_MULTA;
        
    CURSOR CURSOR_SANCIONADOS(P_ID_MULTA NUMBER)     
    IS 
     SELECT DISTINCT PERS.*
       FROM USR_SICOB.T_SCOB_MULTA_DETAL MDET
      INNER JOIN USR_SICOB.T_SCOB_MULTA_SANCIONADO MSAN
         ON MSAN.ID_MULTA_DETAL = MDET.ID_MULTA_DETAL
        AND MSAN.ESTADO = '1'
        AND NVL(MSAN.COD_TIPO_PERSONA, '1') = '1'
      INNER JOIN USR_SICOB.T_SCOB_PERSONA PERS
         ON PERS.ID_PERSONA = MSAN.ID_PERSONA
      INNER JOIN USR_SICOB.T_SCOB_MULTA MULT
         ON (MULT.ID_MULTA = MDET.ID_MULTA)
      WHERE MDET.FLG_ACTUAL = '1'
        AND MDET.ID_MULTA = P_ID_MULTA;
      
  BEGIN
        
    BEGIN
    
      SELECT MULTA.*
        INTO REG_T_SCOB_MULTA
        FROM USR_SICOB.T_SCOB_MULTA MULTA
       WHERE MULTA.ID_MULTA = PIN_ID_MULTA
             AND MULTA.ESTADO = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE MULTA CON : ID_MULTA => ' ||
                          PIN_ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MULTA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT MULTA_DETALLE.*
        INTO REG_T_SCOB_MULTA_DETAL
        FROM USR_SICOB.T_SCOB_MULTA_DETAL MULTA_DETALLE
       WHERE MULTA_DETALLE.ID_MULTA = PIN_ID_MULTA
             AND MULTA_DETALLE.ESTADO = '1'
             AND MULTA_DETALLE.FLG_ACTUAL = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE DETALLE DE MULTA CON : ID_MULTA => ' ||
                          PIN_ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MULTA_DETAL - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT MATE.*
        INTO REG_T_SCOB_MATERIA
        FROM USR_SICOB.T_SCOB_MATERIA MATE
       WHERE MATE.ID_MATERIA = REG_T_SCOB_MULTA.ID_MATERIA;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE MATERIA CON : ID_MATERIA => ' ||
                          REG_T_SCOB_MULTA.ID_MATERIA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MATERIA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT PROC.*
        INTO REG_T_SCOB_TIPO_PROCEDIMIENTO
        FROM USR_SICOB.T_SCOB_TIPO_PROCEDIMIENTO PROC
       WHERE PROC.ID_TIPO_PROCEDIMIENTO = REG_T_SCOB_MATERIA.ID_TIPO_PROCEDIMIENTO;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE TIPO DE PROCEDIMIENTO CON : ID_TIPO_PROCEDIMIENTO => ' ||
                          REG_T_SCOB_MATERIA.ID_TIPO_PROCEDIMIENTO;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_TIPO_PROCEDIMIENTO - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT ORGA.*
        INTO REG_T_SCOB_ORGANO_RESOLUTIVO
        FROM USR_SICOB.T_SCOB_ORGANO_RESOLUTIVO ORGA
       WHERE ORGA.ID_ORGANO_RESOLUTIVO = REG_T_SCOB_MULTA_DETAL.ID_ORGANO_RESOLUTIVO;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE ORGANO RESOLUTIVO CON : ID_ORGANO_RESOLUTIVO => ' ||
                          REG_T_SCOB_MULTA_DETAL.ID_ORGANO_RESOLUTIVO;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_ORGANO_RESOLUTIVO - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT SEDE.*
        INTO REG_T_SCOB_SEDE
        FROM USR_SICOB.T_SCOB_SEDE SEDE
       WHERE SEDE.ID_SEDE = REG_T_SCOB_MULTA.ID_SEDE;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE SEDE CON : ID_SEDE => ' ||
                          REG_T_SCOB_MULTA.ID_SEDE;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_SEDE - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT SUBM.*
        INTO REG_T_SCOB_SUBMATERIA
        FROM USR_SICOB.T_SCOB_SUBMATERIA SUBM
       WHERE SUBM.ID_SUBMATERIA = REG_T_SCOB_MULTA.ID_SUB_MATERIA;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE SUBMATERIA CON : ID_SUBMATERIA => ' ||
                          REG_T_SCOB_MULTA.ID_SUB_MATERIA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_SUBMATERIA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
     SELECT T.TXT_DESCRIPCION INTO VV_DESCRIPCION_TIPO_MULTA
       FROM USR_SICOB.T_SCOB_TABLA_DET T
      WHERE T.ID_TABLA = 45
        AND T.COD_INTERNO = REG_T_SCOB_MULTA.FLG_TIPO_MULTA;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE TIPO DE MULTA CON : FLG_TIPO_MULTA => ' ||
                          REG_T_SCOB_MULTA.FLG_TIPO_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_TABLA_DET - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT ACOB.*
        INTO REG_T_SCOB_AREA_COBRANZA
        FROM USR_SICOB.T_SCOB_AREA_COBRANZA ACOB
       WHERE ACOB.ID_AREA_COBRANZA = REG_T_SCOB_MULTA.ID_AREA_COBRANZA;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE AREA DE COBRANZA CON : ID_AREA_COBRANZA => ' ||
                          REG_T_SCOB_MULTA.ID_AREA_COBRANZA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_AREA_COBRANZA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT MCOB.*
        INTO REG_T_SCOB_MULTA_COBRANZA
        FROM USR_SICOB.T_SCOB_MULTA_COBRANZA MCOB
       WHERE MCOB.ID_MULTA = REG_T_SCOB_MULTA.ID_MULTA
             AND MCOB.FLG_ACTUAL = '1'
             AND MCOB.ESTADO = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE MULTA DE COBRANZA CON : ID_MULTA => ' ||
                          REG_T_SCOB_MULTA.ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MULTA_COBRANZA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT EXPE.*
        INTO REG_T_SCOB_EXPEDIENTE
         FROM USR_SICOB.T_SCOB_EXPEDIENTE_MULTA EXMU
        LEFT JOIN USR_SICOB.T_SCOB_EXPEDIENTE EXPE
          ON EXPE.ID_EXPEDIENTE = EXMU.ID_EXPEDIENTE
         AND EXPE.ESTADO = '1'
          WHERE EXMU.ID_MULTA = REG_T_SCOB_MULTA.ID_MULTA
         AND EXMU.ESTADO = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE EXPEDIENTE CON : ID_MULTA => ' ||
                          REG_T_SCOB_MULTA.ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_EXPEDIENTE - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT EXCM.*
        INTO REG_T_SCOB_EST_EXP_COB_MOTIVO
        FROM USR_SICOB.T_SCOB_EST_EXP_COB_MOTIVO EXCM
       WHERE EXCM.ID_MOTIVO = REG_T_SCOB_EXPEDIENTE.ID_MOTIVO;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE AREA DE ESTADO DE MOTIVO DE COBRANZA CON : ID_MOTIVO => ' ||
                          REG_T_SCOB_EXPEDIENTE.ID_MOTIVO;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_EST_EXP_COB_MOTIVO - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT USUA.*
        INTO REG_T_SCOB_USUARIO
        FROM USR_SICOB.T_SCOB_USUARIO USUA
       WHERE USUA.ID_USUARIO = REG_T_SCOB_MULTA.ID_USUARIO_ASIG_COBRANZA;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE AREA DE USUARIO CON : ID_USUARIO_ASIG_COBRANZA => ' ||
                          REG_T_SCOB_MULTA.ID_USUARIO_ASIG_COBRANZA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_USUARIO - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT ESEC.*
        INTO REG_T_SCOB_EST_EXP_COB
        FROM USR_SICOB.T_SCOB_EST_EXP_COB ESEC
       WHERE ESEC.ID_EST_EXP_COB = REG_T_SCOB_EXPEDIENTE.ESTADO_EXPEDIENTE;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE AREA DE ESTADO DE EXPEDIENTE DE COBRANZA CON : ESTADO_EXPEDIENTE => ' ||
                          REG_T_SCOB_EXPEDIENTE.ESTADO_EXPEDIENTE;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_EST_EXP_COB - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT ARCH_CEN.*
        INTO REG_T_SCOB_ARCHIVO_CENTRAL
        FROM USR_SICOB.T_SCOB_MULTA_ARCHIVO_CENTRAL EXPED_ARCH_CEN          
        LEFT JOIN USR_SICOB.T_SCOB_ARCHIVO_CENTRAL ARCH_CEN
          ON ARCH_CEN.ID_ARCHIVO_CENTRAL = EXPED_ARCH_CEN.ID_MULTA_ARCHIVO_CENTRAL
         AND ARCH_CEN.ESTADO = '1'
         WHERE EXPED_ARCH_CEN.ID_MULTA = REG_T_SCOB_MULTA.ID_MULTA
         AND EXPED_ARCH_CEN.FLG_ACTUAL = '1'
         AND EXPED_ARCH_CEN.ESTADO = '1';
        
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE ARCHIVO CENTRAL CON : ID_MULTA => ' ||
                          REG_T_SCOB_MULTA.ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_ARCHIVO_CENTRAL - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT OXM.*
        INTO REG_T_SCOB_ORG_RESOL_MATERIA
        FROM USR_SICOB.T_SCOB_ORG_RESOL_MATERIA OXM
        WHERE OXM.ID_ORGANO_RESOLUTIVO = REG_T_SCOB_MULTA_DETAL.ID_ORGANO_RESOLUTIVO 
              AND OXM.ID_MATERIA = REG_T_SCOB_MULTA.ID_MATERIA 
              AND OXM.ESTADO = '1';
        
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE ORGANO RESOLUTIVO DE LA MATERIA CON : ID_ORGANO_RESOLUTIVO => ' ||
                          REG_T_SCOB_MULTA_DETAL.ID_ORGANO_RESOLUTIVO;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_ORG_RESOL_MATERIA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    
    VV_IDENTIFICADOR := REG_T_SCOB_MULTA.ANIO || REG_T_SCOB_MULTA.CUM;
    VV_ANIO := REG_T_SCOB_MULTA.ANIO;
    VV_ORIGEN := '1'; -- ORIGEN SICOB
    VD_FECHAREGISTRO := REG_T_SCOB_MULTA.FEC_INGRESO;
    VV_CODTIPOPROCEDIMIENTO := REG_T_SCOB_TIPO_PROCEDIMIENTO.CODIGO;
    VV_CODAREA := REG_T_SCOB_ORGANO_RESOLUTIVO.CODIGO;
    VV_CODSEDE := REG_T_SCOB_SEDE.CODIGO;
    VV_CODMATERIA := REG_T_SCOB_MATERIA.CODIGO;
    VV_CODSUBMATERIA := REG_T_SCOB_SUBMATERIA.CODIGO;
    VV_EXPEDIENTE := REG_T_SCOB_MULTA.NRO_EXP_ADMINISTRATIVO;
    VV_EXPEDIENTEANTERIOR := REG_T_SCOB_MULTA_DETAL.NRO_EXP_NIVEL;
    
    --TIPO_INSTANCIA DEL ÓRGANO RESOLUTIVO = 1
    IF REG_T_SCOB_ORGANO_RESOLUTIVO.TIPO_INSTANCIA = 1 THEN
      VV_ORPSRESOLNUMERO := REG_T_SCOB_MULTA_DETAL.NRO_RESOLUCION;
      VD_ORPSRESOLFECHAREGISTRO := TRUNC(REG_T_SCOB_MULTA_DETAL.AUDFECCREACION);
      VD_ORPSRESOLFECHAEMISION := REG_T_SCOB_MULTA_DETAL.FEC_RESOLUCION;
      VD_ORPSRESOLFECHANOTIFICACION := REG_T_SCOB_MULTA_DETAL.FEC_NOTIFICACION_RESOLUCION;
      VD_ORPSFECHAAPELACION := REG_T_SCOB_MULTA_DETAL.FEC_ESTADO_SGTE_INSTANCIA;
      VN_ORPSCANTIDADDIAS := REG_T_SCOB_MULTA_DETAL.NU_CANTIDAD_DIAS;
    END IF;
    
    VV_ORPSUSUARIO := SYSDATE;
    
    --TIPO_INSTANCIA DEL ÓRGANO RESOLUTIVO = 2
    IF REG_T_SCOB_ORGANO_RESOLUTIVO.TIPO_INSTANCIA = 2 THEN
      VV_COMRESOLNUMERO := REG_T_SCOB_MULTA_DETAL.NRO_RESOLUCION;
      VD_COMRESOLFECHAREGISTRO := TRUNC(REG_T_SCOB_MULTA_DETAL.AUDFECCREACION);
      VD_COMRESOLFECHAEMISION := REG_T_SCOB_MULTA_DETAL.FEC_RESOLUCION;
      VD_COMRESOLFECHANOTIFICACION := REG_T_SCOB_MULTA_DETAL.FEC_NOTIFICACION_RESOLUCION;
      VD_COMFECHAREVISION := REG_T_SCOB_MULTA_DETAL.FEC_ESTADO_SGTE_INSTANCIA;
      VV_COMUSUARIO := REG_T_SCOB_MULTA_DETAL.AUDUSUCREACION;
      VN_COMCANTIDADDIAS := REG_T_SCOB_MULTA_DETAL.NU_CANTIDAD_DIAS;
    END IF;
    
    --TIPO_INSTANCIA DEL ÓRGANO RESOLUTIVO = 3
    IF REG_T_SCOB_ORGANO_RESOLUTIVO.TIPO_INSTANCIA = 3 THEN
      VV_SALARESOLNUMERO := REG_T_SCOB_MULTA_DETAL.NRO_RESOLUCION;
      VD_SALARESOLFECHAREGISTRO := TRUNC(REG_T_SCOB_MULTA_DETAL.AUDFECCREACION);
      VD_SALARESOLFECHAEMISION := REG_T_SCOB_MULTA_DETAL.FEC_RESOLUCION;
      VD_SALARESOLFECHANOTIFICACION := REG_T_SCOB_MULTA_DETAL.FEC_NOTIFICACION_RESOLUCION;
      VV_SALAUSUARIO := REG_T_SCOB_MULTA_DETAL.AUDUSUCREACION;
      VN_SALACANTIDADDIAS := REG_T_SCOB_MULTA_DETAL.NU_CANTIDAD_DIAS;
    END IF;
    
    VV_TIPOMULTA := SUBSTR(VV_DESCRIPCION_TIPO_MULTA, 1, 1);        
    
    OPEN CURSOR_DENUNCIANTES(REG_T_SCOB_MULTA.ID_MULTA);
      
      LOOP 
          
        FETCH CURSOR_DENUNCIANTES INTO REG_T_SCOB_PERSONA;
           
        EXIT WHEN CURSOR_DENUNCIANTES%NOTFOUND;      
         
        VN_DENUNCIANTE := 0;
                
        IF REG_T_SCOB_PERSONA.TIPO_PERSONA = 2 THEN
           VV_DENUNCIANTENOMBRE := REG_T_SCOB_PERSONA.RAZON_SOCIAL;
        ELSE
            VV_DENUNCIANTENOMBRE := REG_T_SCOB_PERSONA.APE_PATERNO || ' ' || REG_T_SCOB_PERSONA.APE_MATERNO || ' ' || REG_T_SCOB_PERSONA.PRI_NOMBRE || ' ' ||
                                       REG_T_SCOB_PERSONA.SEG_NOMBRE || ' ' || REG_T_SCOB_PERSONA.APE_CASADA;
        END IF;
        
        IF NVL(REG_T_SCOB_MULTA_DETAL.POR_ASOCU, '0') = '0' THEN
          VV_ES_ASOCIACION := 'NO';
        ELSE 
          VV_ES_ASOCIACION := 'SI';
        END IF;
        
        IF VV_ES_ASOCIACION = 'SI' THEN
          
          IF REG_T_SCOB_PERSONA.NRO_DOC IS NOT NULL THEN
              
              SELECT TRIM(DECODE(INSTR(REG_T_SCOB_PERSONA.NRO_DOC, '/'), 0, REG_T_SCOB_PERSONA.NRO_DOC, SUBSTR(REG_T_SCOB_PERSONA.NRO_DOC, 1, INSTR(REG_T_SCOB_PERSONA.NRO_DOC, '/') - 1)))
              INTO VV_DOC_DENUNCIANTE
              FROM DUAL;
              
              -- VERIFICACION EN EMPLEADO
              SELECT MAX(PERS.PERSONA) INTO VN_NUM_PERSONA_DENUNCIANTE 
                FROM SGCORESYS.PERSONAMAST PERS
                LEFT JOIN SGCORESYS.EMPLEADOMAST EMPL 
                  ON (PERS.PERSONA = EMPL.EMPLEADO)
                WHERE (PERS.DOCUMENTO = VV_DOC_DENUNCIANTE 
                  OR PERS.DOCUMENTOFISCAL = VV_DOC_DENUNCIANTE
                  OR PERS.DOCUMENTOIDENTIDAD = VV_DOC_DENUNCIANTE);

              IF NVL(VN_NUM_PERSONA_DENUNCIANTE, 0) = 0 THEN
                  -- VERIFICACION CON OTROS
                  SELECT MAX(PERS.PERSONA) INTO VN_NUM_PERSONA_DENUNCIANTE 
                     FROM SGCORESYS.PERSONAMAST PERS
                     WHERE PERS.ESTADO = 'A' 
                       AND (PERS.DOCUMENTO = VV_DOC_DENUNCIANTE 
                       OR PERS.DOCUMENTOFISCAL = VV_DOC_DENUNCIANTE
                       OR PERS.DOCUMENTOIDENTIDAD = VV_DOC_DENUNCIANTE);
              END IF;
              
              IF LENGTH(TRIM(VV_DOC_DENUNCIANTE)) = 11 THEN
                VV_TDOC_PERSONA :='R';
              ELSIF LENGTH(TRIM(VV_DOC_DENUNCIANTE)) = 8 THEN
                VV_TDOC_PERSONA := 'D';
              ELSE
                VV_TDOC_PERSONA :='O';
              END IF;
              
              IF NVL(VN_NUM_PERSONA_DENUNCIANTE, 0) = 0 THEN             
        
                PKG_INTFZ_MULTAS_SIA.SIA_S_GENERA_PERSONA(PIN_CH_CLIENTENOMBRE    => VV_DENUNCIANTENOMBRE,
                                                          PIN_CH_TIPODOCUMENTO    => VV_TDOC_PERSONA,
                                                          PIN_CH_CLIENTEDOCUMENTO => VV_DOC_DENUNCIANTE,
                                                          PIN_CH_ULTIMOUSUARIO    => 'INTERFAZ',
                                                          POUT_NU_PERSONA         => VN_NUM_PERSONA_DENUNCIANTE);
                                                          END IF;
                                                          
                 VN_DENUNCIANTE := VN_NUM_PERSONA_DENUNCIANTE;
           END IF ;
          
         END IF ;
                                       
        RETURN;                                       
           
      END LOOP;
        
    CLOSE CURSOR_DENUNCIANTES;
    
    VV_TDOC_PERSONA:= NULL;
    
    OPEN CURSOR_SANCIONADOS(REG_T_SCOB_MULTA.ID_MULTA);
      
      LOOP 
          
        FETCH CURSOR_SANCIONADOS INTO REG_T_SCOB_PERSONA;
           
        EXIT WHEN CURSOR_SANCIONADOS%NOTFOUND;                              
        
        SELECT TRIM(DECODE(INSTR(REG_T_SCOB_PERSONA.NRO_DOC, '/'), 0, REG_T_SCOB_PERSONA.NRO_DOC, SUBSTR(REG_T_SCOB_PERSONA.NRO_DOC, 1, INSTR(REG_T_SCOB_PERSONA.NRO_DOC, '/') - 1)))
        INTO VV_DOC_SANCIONADO
        FROM DUAL;
        
        SELECT TDE.TXT_DESCRIPCION INTO VV_DESCRIPCION_TIPO_DOCUMENTO
               FROM USR_SICOB.T_SCOB_TABLA_DET TDE 
               WHERE TDE.ID_TABLA = 10 AND TDE.COD_INTERNO = REG_T_SCOB_PERSONA.TIPO_DOC;
        
        SELECT SUBSTR(TRIM(DECODE(INSTR(VV_DESCRIPCION_TIPO_DOCUMENTO, '/'), 0, VV_DESCRIPCION_TIPO_DOCUMENTO, SUBSTR(VV_DESCRIPCION_TIPO_DOCUMENTO, 1, INSTR(VV_DESCRIPCION_TIPO_DOCUMENTO, '/') - 1))),1,1)
        INTO VV_TDOC_PERSONA
        FROM DUAL;
        
        IF VV_TDOC_PERSONA<>'D' AND VV_TDOC_PERSONA<>'R' THEN
           VV_TDOC_PERSONA :='O';
        END IF;
        
        IF VV_DOC_SANCIONADO IS NOT NULL THEN
           
            -- VERIFICACION EN EMPLEADO
            SELECT MAX(PERS.PERSONA) INTO VN_NUM_PERSONA_SANCIONADO 
              FROM SGCORESYS.PERSONAMAST PERS
              LEFT JOIN SGCORESYS.EMPLEADOMAST EMPL 
                ON (PERS.PERSONA = EMPL.EMPLEADO)
              WHERE (PERS.DOCUMENTO = VV_DOC_SANCIONADO 
                OR PERS.DOCUMENTOFISCAL = VV_DOC_SANCIONADO 
                OR PERS.DOCUMENTOIDENTIDAD = VV_DOC_SANCIONADO);

            IF NVL(VN_NUM_PERSONA_SANCIONADO, 0) = 0 THEN
                -- VERIFICACION CON OTROS
                SELECT MAX(PERS.PERSONA) INTO VN_NUM_PERSONA_SANCIONADO 
                   FROM SGCORESYS.PERSONAMAST PERS
                   WHERE PERS.ESTADO = 'A' 
                     AND (PERS.DOCUMENTO = VV_DOC_SANCIONADO 
                     OR PERS.DOCUMENTOFISCAL = VV_DOC_SANCIONADO 
                     OR PERS.DOCUMENTOIDENTIDAD = VV_DOC_SANCIONADO);
            END IF;

            IF NVL(VN_NUM_PERSONA_SANCIONADO, 0) = 0 THEN
               
                IF REG_T_SCOB_PERSONA.TIPO_PERSONA = 2 THEN
                   VV_SANCIONADONOMBRE := REG_T_SCOB_PERSONA.RAZON_SOCIAL;
                ELSE
                   VV_SANCIONADONOMBRE := REG_T_SCOB_PERSONA.APE_PATERNO || ' ' || REG_T_SCOB_PERSONA.APE_MATERNO || ' ' || REG_T_SCOB_PERSONA.PRI_NOMBRE || ' ' ||
                                               REG_T_SCOB_PERSONA.SEG_NOMBRE || ' ' || REG_T_SCOB_PERSONA.APE_CASADA;
                END IF;
        
                PKG_INTFZ_MULTAS_SIA.SIA_S_GENERA_PERSONA(PIN_CH_CLIENTENOMBRE    => VV_SANCIONADONOMBRE,
                                                          PIN_CH_TIPODOCUMENTO    => VV_TDOC_PERSONA,
                                                          PIN_CH_CLIENTEDOCUMENTO => VV_DOC_SANCIONADO,
                                                          PIN_CH_ULTIMOUSUARIO    => 'INTERFAZ',
                                                          POUT_NU_PERSONA         => VN_NUM_PERSONA_SANCIONADO);
                                                          
                VN_DENUNCIADO := VN_NUM_PERSONA_SANCIONADO;
                VN_SANCIONADO := VN_NUM_PERSONA_SANCIONADO;
             END IF;
         END IF ;
           
      END LOOP;
        
    CLOSE CURSOR_SANCIONADOS;
    
    VV_CODCLASIFICACION := NULL;
    VV_CODACTIVIDAD := NULL;
    
    IF NVL(REG_T_SCOB_MULTA_DETAL.POR_ASOCU, '0') = '0' THEN
      VV_ASOCUPORCFLAG := 'N';
    ELSE 
      VV_ASOCUPORCFLAG := 'S';
    END IF;
        
    VN_ASOCUPORC := NVL(REG_T_SCOB_MULTA_DETAL.POR_ASOCU, 0);
    VN_UITNRO := NVL(REG_T_SCOB_MULTA_DETAL.VALOR_UIT, 0);
    VN_UITMONTOCAPITAL := REG_T_SCOB_MULTA.MONTO_UIT;
    VN_INTERESES := REG_T_SCOB_MULTA.MONTO_INTERES;
    VN_MORA := REG_T_SCOB_MULTA.MONTO_INTERES_MORATORIO;
    VN_GASTOS := REG_T_SCOB_MULTA.MONTO_COSTAS;
    VN_AMORTIZADO := REG_T_SCOB_MULTA.TOTAL_AMORTIZADO;
    VN_AMORTIZADOINTERESES := REG_T_SCOB_MULTA.TOTAL_AMORTIZADO_IM;
    VN_AMORTIZADOMORA := REG_T_SCOB_MULTA.TOTAL_AMORTIZADO_IC;
    VN_AMORTIZADOGASTOS := REG_T_SCOB_MULTA.TOTAL_AMORTIZADO_COSTAS;
    VN_SALDO := REG_T_SCOB_MULTA.SALDO;
    VN_SALDOINTERESES := REG_T_SCOB_MULTA.SALDO_IC;
    VN_SALDOMORA := REG_T_SCOB_MULTA.SALDO_IM;
    VN_SALDOGASTOS := REG_T_SCOB_MULTA.SALDO_COSTAS;
    
    VV_ESTADOMULTA := REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
    
    IF REG_T_SCOB_MULTA.COD_ESTADO_PAGO = '4' THEN
      VN_DESCUENTOMULTA := REG_T_SCOB_MULTA.PORCENTAJE_DESCUENTO;
    ELSE 
      VN_DESCUENTOMULTA := NULL;
    END IF;
    
    VD_SECFECHAREGISTRO := REG_T_SCOB_MULTA.FEC_GENERACION_SEC;
    VV_FILEANIO := REG_T_SCOB_MULTA.ANIO_FILE_AEC;
    VD_FILEFECHARECEPCION := REG_T_SCOB_MULTA.FEC_INGRESO_AEC;
    VV_FILENUMERO := REG_T_SCOB_AREA_COBRANZA.CODIGO || REG_T_SCOB_MULTA.NRO_FILE_AEC;
    VV_NUMEROINGRESO := REG_T_SCOB_MULTA_COBRANZA.NRO_INGRESO;
    VV_ESTADOMULTACOBRANZA := REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
    VV_CODMOTIVOMULTA := REG_T_SCOB_EST_EXP_COB_MOTIVO.CODIGO;
    VD_FECHAOBSERVACION := REG_T_SCOB_MULTA.FEC_ULT_IMPROCEDENCIA;
    VD_FECHAULTIMOINGRESO := REG_T_SCOB_MULTA.FEC_INGRESO_FILE;
    VV_COBEXPEDIENTENRO := REG_T_SCOB_EXPEDIENTE.ANIO || REG_T_SCOB_EXPEDIENTE.NRO_EXPEDIENTE;
    VD_COBEXPEDIENTEFECHA := REG_T_SCOB_EXPEDIENTE.FEC_INGRESO;
    VV_COBGESTOR := REG_T_SCOB_USUARIO.USUARIO;
    VD_FECHAASIGNACION := REG_T_SCOB_MULTA.FECHA_ASIG_COBRANZA;
    VD_FECHACARTA := REG_T_SCOB_MULTA.FEC_ULT_GEN_PRECOACTIVA;
    VD_RECFECHAEMISION := REG_T_SCOB_MULTA.FEC_EMISION_REC;
    VD_RECFECHANOTIFICACION := REG_T_SCOB_MULTA.FEC_NOTIF_REC;
    
    IF NVL(REG_T_SCOB_EXPEDIENTE.FLG_EMBARGO, '0') = '0' THEN
      VV_EMBARGOFLAG := 'N';
    ELSE 
      VV_EMBARGOFLAG := 'S';
    END IF;
    
    VV_COBEXPEDIENTEESTADO := REG_T_SCOB_EST_EXP_COB.CODIGO;
    VV_COBEXPEDIENTEMOTIVO := REG_T_SCOB_EST_EXP_COB_MOTIVO.CODIGO;
    VD_COBFECHAULTIMO := REG_T_SCOB_EXPEDIENTE.FEC_ESTADO_EXPEDIENTE;
    VD_FECHARIESGO := SYSDATE;
    VV_COBROEXPECTATIVA := NULL;
    VV_REGION := NULL;
    VV_ENVIONUMERO := NULL;
    VD_ENVIOFECHA := REG_T_SCOB_ARCHIVO_CENTRAL.FEC_ENVIO;
    
    IF REG_T_SCOB_MULTA.ESTADO_ENVIO_ARCHIVO = 2 THEN
      VV_UBICACIONFISICA := 'ARCHIVO CENTRAL'; 
    ELSIF REG_T_SCOB_MULTA.ESTADO_MULTA = 9 OR REG_T_SCOB_MULTA.ESTADO_MULTA = 10 OR REG_T_SCOB_MULTA.ESTADO_MULTA = 11 
        OR REG_T_SCOB_MULTA.ESTADO_MULTA = 12 OR REG_T_SCOB_MULTA.ESTADO_MULTA = 13 THEN
      VV_UBICACIONFISICA := 'AEC'; 
    ELSE
        VV_UBICACIONFISICA := ''; 
    END IF;
        
    VN_CUOTA := 0;
    VD_FECHAVENCIMIENTO := NULL;
    VV_ESTADOPAGO := REG_T_SCOB_MULTA.FLG_TIPO_MULTA;
    VV_CODIGOMULTA := NULL;
    VV_AECNOTIFICACIONESTADO := NULL;
    VD_AECNOTIFICACIONFECHA := NULL;
    VV_TIPOFRACCIONAMIENTO := (CASE WHEN REG_T_SCOB_EXPEDIENTE.ESTADO_EXPEDIENTE = 4 THEN 'FR' ELSE 'NF' END);
    VV_COMRESOLANIO := REG_T_SCOB_EXPEDIENTE.ANIO;
    VV_COMRESOLCODIGO := REG_T_SCOB_EXPEDIENTE.NRO_EXPEDIENTE;
    VV_CUOTANOTIFICACIONESTADO := NULL;
    VD_CUOTANOTIFICACIONFECHA := NULL;
    VV_EXPEDCOBRANZAANIO := NULL;
    VV_CUMANIO := NULL;
    VV_COBRANZADUDOSAESTADO := NULL;
    VV_COBRANZADUDOSAVOUCHER := NULL;
    VD_COBRANZADUDOSAFECHA := NULL;
    VV_COBRANZADUDOSAVOUCHERCLEARING := NULL;
    VD_COBRANZADUDOSAFECHACLEARING := NULL;
    VV_AECCONCILIACIONESTADO := NULL;
    VD_AECCONCILIACIONFECHA := NULL;
    VV_CODAREADESCRIPCION := REG_T_SCOB_ORGANO_RESOLUTIVO.DESCRIPCION;
    VV_REFERENCIATIPO := NULL;
    VV_REFERENCIANUMERO := NULL;
    VV_CASTIGORESOLNUMERO := NULL;
    VD_CASTIGORESOLFECHA := NULL;
    VD_CUOTAFINRESOLFECHA := NULL;
    VD_CUOTAFINRESOLNUMERO := NULL;
    VV_CUOTAFINFECHA := NULL;
    VV_CASTIGOOBSERVACION := NULL;
    VV_CUOTAFINMOTIVO := NULL;
    VN_COMPROBANTEINGRESO := NULL;
    IF REG_T_SCOB_MULTA.COD_MOTIVO = 0 THEN
      VV_EMBARGOFLAG := NULL;
    ELSE 
      VV_EMBARGOFLAG := REG_T_SCOB_MULTA.COD_MOTIVO;
    END IF;
    VV_CODCENTROCOSTO := REG_T_SCOB_ORG_RESOL_MATERIA.VC_SIA_CC_COD;
    VV_DECLNUMERO01 := NULL;
    VD_DECLFECHAEMISION01 := NULL; 
    VD_DECLFECHANOTIF01 := NULL;
    VV_DECLNUMERO02 := NULL;
    VD_DECLFECHAEMISION02 := NULL; 
    VD_DECLFECHANOTIF02 := NULL;
    VV_DECLNUMERO03 := NULL;
    VD_DECLFECHAEMISION03 := NULL; 
    VD_DECLFECHANOTIF03 := NULL;
    VN_SALDOCAPITAL := NULL;
    VN_SALDOINTERES := NULL;
    VN_MONTOPROVISIONDUDOSA := NULL;
    VN_MONTOPROVISIONDUDOSAGASTOS := NULL; 
    VN_MONTOVOUCHERCOBRANZA := NULL;
    VN_MONTOVOUCHERCOBRANZAGASTOS := NULL; 

    INSERT INTO SGCORESYS.CO_MULTA (
      IDENTIFICADOR,
      ANIO,
      ORIGEN,
      FECHAREGISTRO,
      CODTIPOPROCEDIMIENTO,
      CODAREA,
      CODSEDE,
      CODMATERIA,
      CODSUBMATERIA,
      EXPEDIENTE,
      EXPEDIENTEANTERIOR,
      ORPSRESOLNUMERO,
      ORPSRESOLFECHAREGISTRO,
      ORPSRESOLFECHAEMISION,
      ORPSRESOLFECHANOTIFICACION,
      ORPSFECHAAPELACION,
      ORPSUSUARIO,
      ORPSCANTIDADDIAS,
      COMRESOLNUMERO,
      COMRESOLFECHAREGISTRO,
      COMRESOLFECHAEMISION,
      COMRESOLFECHANOTIFICACION,
      COMFECHAREVISION,
      COMUSUARIO,
      COMCANTIDADDIAS,
      SALARESOLNUMERO,
      SALARESOLFECHAREGISTRO,
      SALARESOLFECHAEMISION,
      SALARESOLFECHANOTIFICACION,
      SALAUSUARIO,
      SALACANTIDADDIAS,
      TIPOMULTA,
      DENUNCIANTE,
      DENUNCIADO,
      DENUNCIANTENOMBRE,
      SANCIONADO,
      CODCLASIFICACION,
      CODACTIVIDAD,
      ASOCUPORCFLAG,
      ASOCUPORC,
      UITNRO,
      UITMONTOCAPITAL,
      INTERESES,
      MORA,
      GASTOS,
      AMORTIZADO,
      AMORTIZADOINTERESES,
      AMORTIZADOMORA,
      AMORTIZADOGASTOS,
      SALDO,
      SALDOINTERESES,
      SALDOMORA,
      SALDOGASTOS,
      ESTADOMULTA,
      DESCUENTOMULTA,
      SECFECHAREGISTRO,
      FILEANIO,
      FILEFECHARECEPCION,
      FILENUMERO,
      NUMEROINGRESO,
      ESTADOMULTACOBRANZA,
      CODMOTIVOMULTA,
      FECHAOBSERVACION,
      FECHAULTIMOINGRESO,
      COBEXPEDIENTENRO,
      COBEXPEDIENTEFECHA,
      COBGESTOR,
      FECHAASIGNACION,
      FECHACARTA,
      RECFECHAEMISION,
      RECFECHANOTIFICACION,
      EMBARGOFLAG,
      COBEXPEDIENTEESTADO,
      COBEXPEDIENTEMOTIVO,
      COBFECHAULTIMO,
      FECHARIESGO,
      COBROEXPECTATIVA,
      REGION,
      ENVIONUMERO,
      ENVIOFECHA,
      UBICACIONFISICA,
      CUOTA,
      FECHAVENCIMIENTO,
      ESTADOPAGO,
      CODIGOMULTA,
      AECNOTIFICACIONESTADO,
      AECNOTIFICACIONFECHA,
      TIPOFRACCIONAMIENTO,
      COMRESOLANIO,
      COMRESOLCODIGO,
      CUOTANOTIFICACIONESTADO,
      CUOTANOTIFICACIONFECHA,
      EXPEDCOBRANZAANIO,
      CUMANIO,
      COBRANZADUDOSAESTADO,
      COBRANZADUDOSAVOUCHER,
      COBRANZADUDOSAFECHA,
      COBRANZADUDOSAVOUCHERCLEARING,
      COBRANZADUDOSAFECHACLEARING,
      AECCONCILIACIONESTADO,
      AECCONCILIACIONFECHA,
      CODAREADESCRIPCION,
      REFERENCIATIPO,
      REFERENCIANUMERO,
      CASTIGORESOLNUMERO,
      CASTIGORESOLFECHA,
      CUOTAFINRESOLFECHA,
      CUOTAFINRESOLNUMERO,
      CUOTAFINFECHA,
      CASTIGOOBSERVACION,
      CUOTAFINMOTIVO,
      COMPROBANTEINGRESO,
      CODMOTIVOMULTACOB,
      CODCENTROCOSTO,
      DECLNUMERO01,
      DECLFECHAEMISION01,
      DECLFECHANOTIF01,
      DECLNUMERO02,
      DECLFECHAEMISION02,
      DECLFECHANOTIF02,
      DECLNUMERO03,
      DECLFECHAEMISION03,
      DECLFECHANOTIF03,
      SALDOCAPITAL,
      SALDOINTERES,
      MONTOPROVISIONDUDOSA,
      MONTOPROVISIONDUDOSAGASTOS,
      MONTOVOUCHERCOBRANZA,
      MONTOVOUCHERCOBRANZAGASTOS)
    VALUES
    (
      VV_IDENTIFICADOR,
      VV_ANIO,
      VV_ORIGEN,
      VD_FECHAREGISTRO,
      VV_CODTIPOPROCEDIMIENTO,
      VV_CODAREA,
      VV_CODSEDE,
      VV_CODMATERIA,
      VV_CODSUBMATERIA,
      VV_EXPEDIENTE,
      VV_EXPEDIENTEANTERIOR,
      VV_ORPSRESOLNUMERO,
      VD_ORPSRESOLFECHAREGISTRO,
      VD_ORPSRESOLFECHAEMISION,
      VD_ORPSRESOLFECHANOTIFICACION,
      VD_ORPSFECHAAPELACION,
      VV_ORPSUSUARIO,
      VN_ORPSCANTIDADDIAS,
      VV_COMRESOLNUMERO,
      VD_COMRESOLFECHAREGISTRO,
      VD_COMRESOLFECHAEMISION,
      VD_COMRESOLFECHANOTIFICACION,
      VD_COMFECHAREVISION,
      VV_COMUSUARIO,
      VN_COMCANTIDADDIAS,
      VV_SALARESOLNUMERO,
      VD_SALARESOLFECHAREGISTRO,
      VD_SALARESOLFECHAEMISION,
      VD_SALARESOLFECHANOTIFICACION,
      VV_SALAUSUARIO,
      VN_SALACANTIDADDIAS,
      VV_TIPOMULTA,
      VN_DENUNCIANTE,
      VN_DENUNCIADO,
      VV_DENUNCIANTENOMBRE,
      VN_SANCIONADO,
      VV_CODCLASIFICACION,
      VV_CODACTIVIDAD,
      VV_ASOCUPORCFLAG,
      VN_ASOCUPORC,
      VN_UITNRO,
      VN_UITMONTOCAPITAL,
      VN_INTERESES,
      VN_MORA,
      VN_GASTOS,
      VN_AMORTIZADO,
      VN_AMORTIZADOINTERESES,
      VN_AMORTIZADOMORA,
      VN_AMORTIZADOGASTOS,
      VN_SALDO,
      VN_SALDOINTERESES,
      VN_SALDOMORA,
      VN_SALDOGASTOS,
      VV_ESTADOMULTA,
      VN_DESCUENTOMULTA,
      VD_SECFECHAREGISTRO,
      VV_FILEANIO,
      VD_FILEFECHARECEPCION,
      VV_FILENUMERO,
      VV_NUMEROINGRESO,
      VV_ESTADOMULTACOBRANZA,
      VV_CODMOTIVOMULTA,
      VD_FECHAOBSERVACION,
      VD_FECHAULTIMOINGRESO,
      VV_COBEXPEDIENTENRO,
      VD_COBEXPEDIENTEFECHA,
      VV_COBGESTOR,
      VD_FECHAASIGNACION,
      VD_FECHACARTA,
      VD_RECFECHAEMISION,
      VD_RECFECHANOTIFICACION,
      VV_EMBARGOFLAG,
      VV_COBEXPEDIENTEESTADO,
      VV_COBEXPEDIENTEMOTIVO,
      VD_COBFECHAULTIMO,
      VD_FECHARIESGO,
      VV_COBROEXPECTATIVA,
      VV_REGION,
      VV_ENVIONUMERO,
      VD_ENVIOFECHA,
      VV_UBICACIONFISICA,
      VN_CUOTA,
      VD_FECHAVENCIMIENTO,
      VV_ESTADOPAGO,
      VV_CODIGOMULTA,
      VV_AECNOTIFICACIONESTADO,
      VD_AECNOTIFICACIONFECHA,
      VV_TIPOFRACCIONAMIENTO,
      VV_COMRESOLANIO,
      VV_COMRESOLCODIGO,
      VV_CUOTANOTIFICACIONESTADO,
      VD_CUOTANOTIFICACIONFECHA,
      VV_EXPEDCOBRANZAANIO,
      VV_CUMANIO,
      VV_COBRANZADUDOSAESTADO,
      VV_COBRANZADUDOSAVOUCHER,
      VD_COBRANZADUDOSAFECHA,
      VV_COBRANZADUDOSAVOUCHERCLEARING,
      VD_COBRANZADUDOSAFECHACLEARING,
      VV_AECCONCILIACIONESTADO,
      VD_AECCONCILIACIONFECHA,
      VV_CODAREADESCRIPCION,
      VV_REFERENCIATIPO,
      VV_REFERENCIANUMERO,
      VV_CASTIGORESOLNUMERO,
      VD_CASTIGORESOLFECHA,
      VD_CUOTAFINRESOLFECHA,
      VD_CUOTAFINRESOLNUMERO,
      VV_CUOTAFINFECHA,
      VV_CASTIGOOBSERVACION,
      VV_CUOTAFINMOTIVO,
      VN_COMPROBANTEINGRESO,
      VV_CODMOTIVOMULTACOB,
      VV_CODCENTROCOSTO,
      VV_DECLNUMERO01,
      VD_DECLFECHAEMISION01,
      VD_DECLFECHANOTIF01,
      VV_DECLNUMERO02,
      VD_DECLFECHAEMISION02,
      VD_DECLFECHANOTIF02,
      VV_DECLNUMERO03,
      VD_DECLFECHAEMISION03,
      VD_DECLFECHANOTIF03,
      VN_SALDOCAPITAL,
      VN_SALDOINTERES,
      VN_MONTOPROVISIONDUDOSA,
      VN_MONTOPROVISIONDUDOSAGASTOS,
      VN_MONTOVOUCHERCOBRANZA,
      VN_MONTOVOUCHERCOBRANZAGASTOS
    );
    
    VV_ME_IDENTIFICADOR := REG_T_SCOB_MULTA.ANIO || REG_T_SCOB_MULTA.CUM;
    VN_ME_SECUENCIA := 1;
    VV_ME_ESTADOMULTA := REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
    VV_ME_ESTADOPAGO := REG_T_SCOB_MULTA.FLG_TIPO_MULTA;
    VV_ME_ESTADOCOBRANZA := REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
    VV_ME_ESTADOEXPEDIENTE := REG_T_SCOB_EST_EXP_COB.CODIGO;
    VN_ME_CAPITAL := REG_T_SCOB_MULTA.MONTO_UIT;
    VN_ME_INTERESES := REG_T_SCOB_MULTA.MONTO_INTERES;
    VN_ME_MORA := REG_T_SCOB_MULTA.MONTO_INTERES_MORATORIO;
    VN_ME_GASTOS := REG_T_SCOB_MULTA.MONTO_COSTAS;
    VN_ME_CAPITAL_ANT := REG_T_SCOB_MULTA.MONTO_UIT;
    VN_ME_INTERESES_ANT := REG_T_SCOB_MULTA.MONTO_INTERES;
    VN_ME_MORA_ANT := REG_T_SCOB_MULTA.MONTO_INTERES_MORATORIO;
    VN_ME_GASTOS_ANT := REG_T_SCOB_MULTA.MONTO_COSTAS;
    VV_ME_CODIGOMOTIVOEXPEDIENTE := REG_T_SCOB_EST_EXP_COB_MOTIVO.CODIGO;
    VD_ME_FECHA := SYSDATE;
    VV_ME_CONTABILIZACIONPENDIENTEFLAG := 'S';
    VV_ME_PERIODO := TO_CHAR(SYSDATE, 'YYYYMM');
    VV_ME_VOUCHER := NULL;
    VV_ME_ULTIMOUSUARIO := 'SIA';
    VD_ME_ULTIMAFECHAMODIF := SYSDATE;
    VV_ME_CODIGOMULTA := NULL;
    VV_ME_ORCONCILIACIONESTADO := NULL;
    VD_ME_ORCONCILIACIONFECHA := NULL;
    VV_ME_CODAREA := REG_T_SCOB_ORGANO_RESOLUTIVO.CODIGO;
    VN_ME_UITNRO := NVL(REG_T_SCOB_MULTA_DETAL.VALOR_UIT, 0);
    VN_ME_SALDOCAPITAL := REG_T_SCOB_MULTA.SALDO;
    VN_ME_SALDOINTERES := REG_T_SCOB_MULTA.SALDO_IC;
    VN_ME_SALDOMORA := REG_T_SCOB_MULTA.SALDO_IM;
    VN_ME_SALDOGASTOS := REG_T_SCOB_MULTA.SALDO_COSTAS;
    VV_ME_CUENTAPROVISION := NULL;
    
    INSERT INTO SGCORESYS.CO_MULTAESTADO(
    IDENTIFICADOR,
    SECUENCIA,
    ESTADOMULTA,
    ESTADOPAGO,
    ESTADOCOBRANZA,
    ESTADOEXPEDIENTE,
    CAPITAL,
    INTERESES,
    MORA,
    GASTOS,
    CAPITAL_ANT,
    INTERESES_ANT,
    MORA_ANT,
    GASTOS_ANT,
    CODIGOMOTIVOEXPEDIENTE,
    FECHA,
    CONTABILIZACIONPENDIENTEFLAG,
    PERIODO,
    VOUCHER,
    ULTIMOUSUARIO,
    ULTIMAFECHAMODIF,
    CODIGOMULTA,
    ORCONCILIACIONESTADO,
    ORCONCILIACIONFECHA,
    CODAREA,
    UITNRO,
    SALDOCAPITAL,
    SALDOINTERES,
    SALDOMORA,
    SALDOGASTOS,
    CUENTAPROVISION)
    VALUES(
    VV_ME_IDENTIFICADOR,
    VN_ME_SECUENCIA,
    VV_ME_ESTADOMULTA,
    VV_ME_ESTADOPAGO,
    VV_ME_ESTADOCOBRANZA,
    VV_ME_ESTADOEXPEDIENTE,
    VN_ME_CAPITAL,
    VN_ME_INTERESES,
    VN_ME_MORA,
    VN_ME_GASTOS,
    VN_ME_CAPITAL_ANT,
    VN_ME_INTERESES_ANT,
    VN_ME_MORA_ANT,
    VN_ME_GASTOS_ANT,
    VV_ME_CODIGOMOTIVOEXPEDIENTE,
    VD_ME_FECHA,
    VV_ME_CONTABILIZACIONPENDIENTEFLAG,
    VV_ME_PERIODO,
    VV_ME_VOUCHER,
    VV_ME_ULTIMOUSUARIO,
    VD_ME_ULTIMAFECHAMODIF,
    VV_ME_CODIGOMULTA,
    VV_ME_ORCONCILIACIONESTADO,
    VD_ME_ORCONCILIACIONFECHA,
    VV_ME_CODAREA,
    VN_ME_UITNRO,
    VN_ME_SALDOCAPITAL,
    VN_ME_SALDOINTERES,
    VN_ME_SALDOMORA,
    VN_ME_SALDOGASTOS,
    VV_ME_CUENTAPROVISION);
    
    IF VV_TIPOFRACCIONAMIENTO = 'FR' THEN

       USR_SIA_INTFZ.PKG_INTFZ_MULTAS.S_LISTA_CRONO_TOTAL(PIN_NU_ORIGEN => VV_ORIGEN,
                PIN_VC_ANIO_EXPCOB=> VV_COMRESOLANIO,
                PIN_VC_NRO_EXPCOB => VV_COMRESOLCODIGO,
                PIN_DT_INI_RES_APROB => TO_DATE('2000-01-01', 'YYYY-MM-DD'),
                PIN_DT_FIN_RES_APROB => TRUNC(SYSDATE),
                POUT_CUR_RESULT      => VC_CUR_CRONOGRAMA,
                POUT_NU_ERROR        => PON_COD_RESULT,
                POUT_VC_ERROR        => POV_MSG_RESULT);

       VN_NU_VUELTA := 0;
            
       LOOP
         
         FETCH VC_CUR_CRONOGRAMA INTO VR_REC_CRONOGRAMA;
         
         EXIT WHEN VC_CUR_CRONOGRAMA%NOTFOUND;

             IF VN_NU_VUELTA = 0 THEN
               
                 BEGIN
                   
                    SELECT DISTINCT MUCU.FECHAAPROBACIONCUOTA INTO VD_DT_APROBACIONCUOTA
                     FROM SGCORESYS.CO_MULTACUOTA MUCU
                    WHERE MUCU.IDENTIFICADOR = VV_IDENTIFICADOR;

                    IF TRUNC(VD_DT_APROBACIONCUOTA) <> TRUNC(VR_REC_CRONOGRAMA.DT_EST_EXPED_COB) THEN
                      
                       DELETE FROM SGCORESYS.CO_MULTACUOTA MUCU
                          WHERE MUCU.IDENTIFICADOR = VV_IDENTIFICADOR;
                          
                    END IF;
                    
                    VN_NU_VUELTA := 1;
                    
                  EXCEPTION
                    WHEN OTHERS THEN
                      VN_NU_VUELTA := 1;
                  END;
                  
             END IF;

             INSERT INTO SGCORESYS.CO_MULTACUOTA (
                    IDENTIFICADOR,
                    CUOTA,
                    FECHAVENCIMIENTO,
                    CAPITAL,
                    INTERESES,
                    IMPORTE,
                    GASTOS,
                    MORA,
                    TOTAL,
                    AMORTIZADOMONTO,
                    AMORTIZADOCAPITAL,
                    SALDOCUOTA,
                    SALDOCAPITAL,
                    FECHAAPROBACIONCUOTA,
                    PERIODOCUOTA,
                    SALDOINTERES,
                    SALDOMORA,
                    SALDOCOSTAS,
                    AMORTIZADOINTERES,
                    AMORTIZADOMORA,
                    AMORTIZADOCOSTA,
                    COMPROBANTEINGRESO
                ) SELECT
                    VV_IDENTIFICADOR,
                    VR_REC_CRONOGRAMA.NU_NRO_CUOTA,
                    VR_REC_CRONOGRAMA.DT_VCTO,
                    VR_REC_CRONOGRAMA.NU_MTO_CAPITAL,
                    VR_REC_CRONOGRAMA.NU_MTO_INT_COMP,
                    VR_REC_CRONOGRAMA.NU_MTO_TOT_PAGAR,
                    VR_REC_CRONOGRAMA.NU_MTO_COSTAS,
                    VR_REC_CRONOGRAMA.NU_MTO_INT_MORA,
                    VR_REC_CRONOGRAMA.NU_MTO_TOT_PAGAR,
                    VR_REC_CRONOGRAMA.NU_AMORT_TOTAL,
                    VR_REC_CRONOGRAMA.NU_AMORT_CAP,
                    VR_REC_CRONOGRAMA.NU_SALDO_TOTAL,
                    VR_REC_CRONOGRAMA.NU_SALDO_CAP,
                    VR_REC_CRONOGRAMA.DT_EST_EXPED_COB,
                    TO_CHAR(VR_REC_CRONOGRAMA.DT_EST_EXPED_COB,'YYYYMM'),
                    VR_REC_CRONOGRAMA.NU_SALDO_IC,
                    VR_REC_CRONOGRAMA.NU_SALDO_IM,
                    VR_REC_CRONOGRAMA.NU_SALDO_CG,
                    VR_REC_CRONOGRAMA.NU_AMORT_IC,
                    VR_REC_CRONOGRAMA.NU_AMORT_IM,
                    VR_REC_CRONOGRAMA.NU_AMORT_CG,
                    VR_REC_CRONOGRAMA.VC_LISTA_CI
                   FROM DUAL
                   WHERE NOT EXISTS (SELECT 1 FROM SGCORESYS.CO_MULTACUOTA X
                        WHERE X.IDENTIFICADOR = VV_IDENTIFICADOR AND X.CUOTA=VR_REC_CRONOGRAMA.NU_NRO_CUOTA);


                UPDATE SGCORESYS.CO_MULTACUOTA MUCU
                SET MUCU.AMORTIZADOMONTO   = VR_REC_CRONOGRAMA.NU_AMORT_TOTAL,
                    MUCU.AMORTIZADOCAPITAL = VR_REC_CRONOGRAMA.NU_AMORT_CAP,
                    MUCU.AMORTIZADOINTERES = VR_REC_CRONOGRAMA.NU_AMORT_IC,
                    MUCU.AMORTIZADOMORA    = VR_REC_CRONOGRAMA.NU_AMORT_IM,
                    MUCU.AMORTIZADOCOSTA   = VR_REC_CRONOGRAMA.NU_AMORT_CG,
                    MUCU.COMPROBANTEINGRESO= VR_REC_CRONOGRAMA.VC_LISTA_CI,
                    MUCU.SALDOCUOTA        = VR_REC_CRONOGRAMA.NU_SALDO_TOTAL,
                    MUCU.SALDOCAPITAL      = VR_REC_CRONOGRAMA.NU_SALDO_CAP,
                    MUCU.SALDOINTERES      = VR_REC_CRONOGRAMA.NU_SALDO_IC,
                    MUCU.SALDOMORA         = VR_REC_CRONOGRAMA.NU_SALDO_IM,
                    MUCU.SALDOCOSTAS       = VR_REC_CRONOGRAMA.NU_SALDO_CG
                WHERE MUCU.IDENTIFICADOR = VV_IDENTIFICADOR 
                      AND MUCU.CUOTA = VR_REC_CRONOGRAMA.NU_NRO_CUOTA;

       END LOOP;
    END IF;
    
    COMMIT;
    
    PON_COD_RESULT := 0;
    POV_MSG_RESULT := 'CONFORME';
  
  EXCEPTION
    WHEN EX_CONTROLADO THEN
      PON_COD_RESULT := -1;
    WHEN OTHERS THEN
      PON_COD_RESULT := -1;
      POV_MSG_RESULT := 'ERROR NO CONTROLADO : SP_REGISTRO_MULTA_SICOB_A_SIA - ERROR : ' ||
                        SQLERRM;
  END SP_REGISTRO_MULTA_SICOB_A_SIA_BACKUP;


  PROCEDURE SP_REGISTRO_MULTA_SICOB_A_SIA(PIN_ID_MULTA   IN NUMBER,
                                          PON_COD_RESULT OUT NUMBER,
                                          POV_MSG_RESULT OUT VARCHAR2) IS
  
    REG_T_SCOB_MULTA                 USR_SICOB.T_SCOB_MULTA%ROWTYPE;
    REG_T_SCOB_MULTA_DETAL           USR_SICOB.T_SCOB_MULTA_DETAL%ROWTYPE;
    REG_T_SCOB_MATERIA               USR_SICOB.T_SCOB_MATERIA%ROWTYPE;
    REG_T_SCOB_TIPO_PROCEDIMIENTO    USR_SICOB.T_SCOB_TIPO_PROCEDIMIENTO%ROWTYPE;
    REG_T_SCOB_ORGANO_RESOLUTIVO     USR_SICOB.T_SCOB_ORGANO_RESOLUTIVO%ROWTYPE;
    REG_T_SCOB_SEDE                  USR_SICOB.T_SCOB_SEDE%ROWTYPE;
    REG_T_SCOB_SUBMATERIA            USR_SICOB.T_SCOB_SUBMATERIA%ROWTYPE;    
    REG_T_SCOB_ORG_RESOL_MATERIA     USR_SICOB.T_SCOB_ORG_RESOL_MATERIA%ROWTYPE;    
    
    VV_IDENTIFICADOR                 SGCORESYS.CO_MULTA.IDENTIFICADOR%TYPE;
    VV_ANIO                          SGCORESYS.CO_MULTA.ANIO%TYPE;
    VV_ORIGEN                        SGCORESYS.CO_MULTA.ORIGEN%TYPE;
    VD_FECHAREGISTRO                 SGCORESYS.CO_MULTA.FECHAREGISTRO%TYPE;
    VV_CODTIPOPROCEDIMIENTO          SGCORESYS.CO_MULTA.CODTIPOPROCEDIMIENTO%TYPE;
    VV_CODAREA                       SGCORESYS.CO_MULTA.CODAREA%TYPE;
    VV_CODSEDE                       SGCORESYS.CO_MULTA.CODSEDE%TYPE;
    VV_CODMATERIA                    SGCORESYS.CO_MULTA.CODMATERIA%TYPE;
    VV_CODSUBMATERIA                 SGCORESYS.CO_MULTA.CODSUBMATERIA%TYPE;
    VV_EXPEDIENTE                    SGCORESYS.CO_MULTA.EXPEDIENTE%TYPE;
    VV_EXPEDIENTEANTERIOR            SGCORESYS.CO_MULTA.EXPEDIENTEANTERIOR%TYPE;
    VV_ORPSRESOLNUMERO               SGCORESYS.CO_MULTA.ORPSRESOLNUMERO%TYPE;
    VD_ORPSRESOLFECHAREGISTRO        SGCORESYS.CO_MULTA.ORPSRESOLFECHAREGISTRO%TYPE;
    VD_ORPSRESOLFECHAEMISION         SGCORESYS.CO_MULTA.ORPSRESOLFECHAEMISION%TYPE;
    VD_ORPSRESOLFECHANOTIFICACION    SGCORESYS.CO_MULTA.ORPSRESOLFECHANOTIFICACION%TYPE;
    VD_ORPSFECHAAPELACION            SGCORESYS.CO_MULTA.ORPSFECHAAPELACION%TYPE;
    VV_ORPSUSUARIO                   SGCORESYS.CO_MULTA.ORPSUSUARIO%TYPE;
    VN_ORPSCANTIDADDIAS              SGCORESYS.CO_MULTA.ORPSCANTIDADDIAS%TYPE;
    VV_COMRESOLNUMERO                SGCORESYS.CO_MULTA.COMRESOLNUMERO%TYPE;
    VD_COMRESOLFECHAREGISTRO         SGCORESYS.CO_MULTA.COMRESOLFECHAREGISTRO%TYPE;
    VD_COMRESOLFECHAEMISION          SGCORESYS.CO_MULTA.COMRESOLFECHAEMISION%TYPE;
    VD_COMRESOLFECHANOTIFICACION     SGCORESYS.CO_MULTA.COMRESOLFECHANOTIFICACION%TYPE;
    VD_COMFECHAREVISION              SGCORESYS.CO_MULTA.COMFECHAREVISION%TYPE;
    VV_COMUSUARIO                    SGCORESYS.CO_MULTA.COMUSUARIO%TYPE;
    VN_COMCANTIDADDIAS               SGCORESYS.CO_MULTA.COMCANTIDADDIAS%TYPE;
    VV_SALARESOLNUMERO               SGCORESYS.CO_MULTA.SALARESOLNUMERO%TYPE;
    VD_SALARESOLFECHAREGISTRO        SGCORESYS.CO_MULTA.SALARESOLFECHAREGISTRO%TYPE;
    VD_SALARESOLFECHAEMISION         SGCORESYS.CO_MULTA.SALARESOLFECHAEMISION%TYPE;
    VD_SALARESOLFECHANOTIFICACION    SGCORESYS.CO_MULTA.SALARESOLFECHANOTIFICACION%TYPE;
    VV_SALAUSUARIO                   SGCORESYS.CO_MULTA.SALAUSUARIO%TYPE;
    VN_SALACANTIDADDIAS              SGCORESYS.CO_MULTA.SALACANTIDADDIAS%TYPE;
    VV_TIPOMULTA                     SGCORESYS.CO_MULTA.TIPOMULTA%TYPE;
    VN_DENUNCIANTE                   SGCORESYS.CO_MULTA.DENUNCIANTE%TYPE;
    VN_DENUNCIADO                    SGCORESYS.CO_MULTA.DENUNCIADO%TYPE;
    VV_DENUNCIANTENOMBRE             SGCORESYS.CO_MULTA.DENUNCIANTENOMBRE%TYPE;
    VN_SANCIONADO                    SGCORESYS.CO_MULTA.SANCIONADO%TYPE;
    VV_CODCLASIFICACION              SGCORESYS.CO_MULTA.CODCLASIFICACION%TYPE;
    VV_CODACTIVIDAD                  SGCORESYS.CO_MULTA.CODACTIVIDAD%TYPE;
    VV_ASOCUPORCFLAG                 SGCORESYS.CO_MULTA.ASOCUPORCFLAG%TYPE;
    VN_ASOCUPORC                     SGCORESYS.CO_MULTA.ASOCUPORC%TYPE;
    VN_UITNRO                        SGCORESYS.CO_MULTA.UITNRO%TYPE;
    VN_UITMONTOCAPITAL               SGCORESYS.CO_MULTA.UITMONTOCAPITAL%TYPE;
    VN_INTERESES                     SGCORESYS.CO_MULTA.INTERESES%TYPE;
    VN_MORA                          SGCORESYS.CO_MULTA.MORA%TYPE;
    VN_GASTOS                        SGCORESYS.CO_MULTA.GASTOS%TYPE;
    VN_AMORTIZADO                    SGCORESYS.CO_MULTA.AMORTIZADO%TYPE;
    VN_AMORTIZADOINTERESES           SGCORESYS.CO_MULTA.AMORTIZADOINTERESES%TYPE;
    VN_AMORTIZADOMORA                SGCORESYS.CO_MULTA.AMORTIZADOMORA%TYPE;
    VN_AMORTIZADOGASTOS              SGCORESYS.CO_MULTA.AMORTIZADOGASTOS%TYPE;
    VN_SALDO                         SGCORESYS.CO_MULTA.SALDO%TYPE;
    VN_SALDOINTERESES                SGCORESYS.CO_MULTA.SALDOINTERESES%TYPE;
    VN_SALDOMORA                     SGCORESYS.CO_MULTA.SALDOMORA%TYPE;
    VN_SALDOGASTOS                   SGCORESYS.CO_MULTA.SALDOGASTOS%TYPE;
    VV_ESTADOMULTA                   SGCORESYS.CO_MULTA.ESTADOMULTA%TYPE;
    VN_DESCUENTOMULTA                SGCORESYS.CO_MULTA.DESCUENTOMULTA%TYPE;
    VD_SECFECHAREGISTRO              SGCORESYS.CO_MULTA.SECFECHAREGISTRO%TYPE;
    VV_FILEANIO                      SGCORESYS.CO_MULTA.FILEANIO%TYPE;
    VD_FILEFECHARECEPCION            SGCORESYS.CO_MULTA.FILEFECHARECEPCION%TYPE;
    VV_FILENUMERO                    SGCORESYS.CO_MULTA.FILENUMERO%TYPE;
    VV_NUMEROINGRESO                 SGCORESYS.CO_MULTA.NUMEROINGRESO%TYPE;
    VV_ESTADOMULTACOBRANZA           SGCORESYS.CO_MULTA.ESTADOMULTACOBRANZA%TYPE;
    VV_CODMOTIVOMULTA                SGCORESYS.CO_MULTA.CODMOTIVOMULTA%TYPE;
    VD_FECHAOBSERVACION              SGCORESYS.CO_MULTA.FECHAOBSERVACION%TYPE;
    VD_FECHAULTIMOINGRESO            SGCORESYS.CO_MULTA.FECHAULTIMOINGRESO%TYPE;
    VV_COBEXPEDIENTENRO              SGCORESYS.CO_MULTA.COBEXPEDIENTENRO%TYPE;
    VD_COBEXPEDIENTEFECHA            SGCORESYS.CO_MULTA.COBEXPEDIENTEFECHA%TYPE;
    VV_COBGESTOR                     SGCORESYS.CO_MULTA.COBGESTOR%TYPE;
    VD_FECHAASIGNACION               SGCORESYS.CO_MULTA.FECHAASIGNACION%TYPE;
    VD_FECHACARTA                    SGCORESYS.CO_MULTA.FECHACARTA%TYPE;
    VD_RECFECHAEMISION               SGCORESYS.CO_MULTA.RECFECHAEMISION%TYPE;
    VD_RECFECHANOTIFICACION          SGCORESYS.CO_MULTA.RECFECHANOTIFICACION%TYPE;
    VV_EMBARGOFLAG                   SGCORESYS.CO_MULTA.EMBARGOFLAG%TYPE;
    VV_COBEXPEDIENTEESTADO           SGCORESYS.CO_MULTA.COBEXPEDIENTEESTADO%TYPE;
    VV_COBEXPEDIENTEMOTIVO           SGCORESYS.CO_MULTA.COBEXPEDIENTEMOTIVO%TYPE;
    VD_COBFECHAULTIMO                SGCORESYS.CO_MULTA.COBFECHAULTIMO%TYPE;
    VD_FECHARIESGO                   SGCORESYS.CO_MULTA.FECHARIESGO%TYPE;
    VV_COBROEXPECTATIVA              SGCORESYS.CO_MULTA.COBROEXPECTATIVA%TYPE;
    VV_REGION                        SGCORESYS.CO_MULTA.REGION%TYPE;
    VV_ENVIONUMERO                   SGCORESYS.CO_MULTA.ENVIONUMERO%TYPE;
    VD_ENVIOFECHA                    SGCORESYS.CO_MULTA.ENVIOFECHA%TYPE;
    VV_UBICACIONFISICA               SGCORESYS.CO_MULTA.UBICACIONFISICA%TYPE;
    VN_CUOTA                         SGCORESYS.CO_MULTA.CUOTA%TYPE;
    VD_FECHAVENCIMIENTO              SGCORESYS.CO_MULTA.FECHAVENCIMIENTO%TYPE;
    VV_ESTADOPAGO                    SGCORESYS.CO_MULTA.ESTADOPAGO%TYPE;
    VV_CODIGOMULTA                   SGCORESYS.CO_MULTA.CODIGOMULTA%TYPE;
    VV_AECNOTIFICACIONESTADO         SGCORESYS.CO_MULTA.AECNOTIFICACIONESTADO%TYPE;
    VD_AECNOTIFICACIONFECHA          SGCORESYS.CO_MULTA.AECNOTIFICACIONFECHA%TYPE;
    VV_TIPOFRACCIONAMIENTO           SGCORESYS.CO_MULTA.TIPOFRACCIONAMIENTO%TYPE;
    VV_COMRESOLANIO                  SGCORESYS.CO_MULTA.COMRESOLANIO%TYPE;
    VV_COMRESOLCODIGO                SGCORESYS.CO_MULTA.COMRESOLCODIGO%TYPE;
    VV_CUOTANOTIFICACIONESTADO       SGCORESYS.CO_MULTA.CUOTANOTIFICACIONESTADO%TYPE;
    VD_CUOTANOTIFICACIONFECHA        SGCORESYS.CO_MULTA.CUOTANOTIFICACIONFECHA%TYPE;
    VV_EXPEDCOBRANZAANIO             SGCORESYS.CO_MULTA.EXPEDCOBRANZAANIO%TYPE;
    VV_CUMANIO                       SGCORESYS.CO_MULTA.CUMANIO%TYPE;
    VV_COBRANZADUDOSAESTADO          SGCORESYS.CO_MULTA.COBRANZADUDOSAESTADO%TYPE;
    VV_COBRANZADUDOSAVOUCHER         SGCORESYS.CO_MULTA.COBRANZADUDOSAVOUCHER%TYPE;
    VD_COBRANZADUDOSAFECHA           SGCORESYS.CO_MULTA.COBRANZADUDOSAFECHA%TYPE;
    VV_COBRANZADUDOSAVOUCHERCLEARING SGCORESYS.CO_MULTA.COBRANZADUDOSAVOUCHERCLEARING%TYPE;
    VD_COBRANZADUDOSAFECHACLEARING   SGCORESYS.CO_MULTA.COBRANZADUDOSAFECHACLEARING%TYPE;
    VV_AECCONCILIACIONESTADO         SGCORESYS.CO_MULTA.AECCONCILIACIONESTADO%TYPE;
    VD_AECCONCILIACIONFECHA          SGCORESYS.CO_MULTA.AECCONCILIACIONFECHA%TYPE;
    VV_CODAREADESCRIPCION            SGCORESYS.CO_MULTA.CODAREADESCRIPCION%TYPE;
    VV_REFERENCIATIPO                SGCORESYS.CO_MULTA.REFERENCIATIPO%TYPE;
    VV_REFERENCIANUMERO              SGCORESYS.CO_MULTA.REFERENCIANUMERO%TYPE;
    VV_CASTIGORESOLNUMERO            SGCORESYS.CO_MULTA.CASTIGORESOLNUMERO%TYPE;
    VD_CASTIGORESOLFECHA             SGCORESYS.CO_MULTA.CASTIGORESOLFECHA%TYPE;
    VD_CUOTAFINRESOLFECHA            SGCORESYS.CO_MULTA.CUOTAFINRESOLFECHA%TYPE;
    VD_CUOTAFINRESOLNUMERO           SGCORESYS.CO_MULTA.CUOTAFINRESOLNUMERO%TYPE;
    VV_CUOTAFINFECHA                 SGCORESYS.CO_MULTA.CUOTAFINFECHA%TYPE;
    VV_CASTIGOOBSERVACION            SGCORESYS.CO_MULTA.CASTIGOOBSERVACION%TYPE;
    VV_CUOTAFINMOTIVO                SGCORESYS.CO_MULTA.CUOTAFINMOTIVO%TYPE;
    VN_COMPROBANTEINGRESO            SGCORESYS.CO_MULTA.COMPROBANTEINGRESO%TYPE;
    VV_CODMOTIVOMULTACOB             SGCORESYS.CO_MULTA.CODMOTIVOMULTACOB%TYPE;
    VV_CODCENTROCOSTO                SGCORESYS.CO_MULTA.CODCENTROCOSTO%TYPE;
    VV_DECLNUMERO01                  SGCORESYS.CO_MULTA.DECLNUMERO01%TYPE;
    VD_DECLFECHAEMISION01            SGCORESYS.CO_MULTA.DECLFECHAEMISION01%TYPE;
    VD_DECLFECHANOTIF01              SGCORESYS.CO_MULTA.DECLFECHANOTIF01%TYPE;
    VV_DECLNUMERO02                  SGCORESYS.CO_MULTA.DECLNUMERO02%TYPE;
    VD_DECLFECHAEMISION02            SGCORESYS.CO_MULTA.DECLFECHAEMISION02%TYPE;
    VD_DECLFECHANOTIF02              SGCORESYS.CO_MULTA.DECLFECHANOTIF02%TYPE;
    VV_DECLNUMERO03                  SGCORESYS.CO_MULTA.DECLNUMERO03%TYPE;
    VD_DECLFECHAEMISION03            SGCORESYS.CO_MULTA.DECLFECHAEMISION03%TYPE;
    VD_DECLFECHANOTIF03              SGCORESYS.CO_MULTA.DECLFECHANOTIF03%TYPE;
    VN_SALDOCAPITAL                  SGCORESYS.CO_MULTA.SALDOCAPITAL%TYPE;
    VN_SALDOINTERES                  SGCORESYS.CO_MULTA.SALDOINTERES%TYPE;
    VN_MONTOPROVISIONDUDOSA          SGCORESYS.CO_MULTA.MONTOPROVISIONDUDOSA%TYPE;
    VN_MONTOPROVISIONDUDOSAGASTOS    SGCORESYS.CO_MULTA.MONTOPROVISIONDUDOSAGASTOS%TYPE;
    VN_MONTOVOUCHERCOBRANZA          SGCORESYS.CO_MULTA.MONTOVOUCHERCOBRANZA%TYPE;
    VN_MONTOVOUCHERCOBRANZAGASTOS    SGCORESYS.CO_MULTA.MONTOVOUCHERCOBRANZAGASTOS%TYPE;
    
    VV_ME_IDENTIFICADOR                 SGCORESYS.CO_MULTAESTADO.IDENTIFICADOR%TYPE;
    VN_ME_SECUENCIA                     SGCORESYS.CO_MULTAESTADO.SECUENCIA%TYPE;
    VV_ME_ESTADOMULTA                   SGCORESYS.CO_MULTAESTADO.ESTADOMULTA%TYPE;
    VV_ME_ESTADOPAGO                    SGCORESYS.CO_MULTAESTADO.ESTADOPAGO%TYPE;
    VV_ME_ESTADOCOBRANZA                SGCORESYS.CO_MULTAESTADO.ESTADOCOBRANZA%TYPE;
    VV_ME_ESTADOEXPEDIENTE              SGCORESYS.CO_MULTAESTADO.ESTADOEXPEDIENTE%TYPE;
    VN_ME_CAPITAL                       SGCORESYS.CO_MULTAESTADO.CAPITAL%TYPE;
    VN_ME_INTERESES                     SGCORESYS.CO_MULTAESTADO.INTERESES%TYPE;
    VN_ME_MORA                          SGCORESYS.CO_MULTAESTADO.MORA%TYPE;
    VN_ME_GASTOS                        SGCORESYS.CO_MULTAESTADO.GASTOS%TYPE;
    VN_ME_CAPITAL_ANT                   SGCORESYS.CO_MULTAESTADO.CAPITAL_ANT%TYPE;
    VN_ME_INTERESES_ANT                 SGCORESYS.CO_MULTAESTADO.INTERESES_ANT%TYPE;
    VN_ME_MORA_ANT                      SGCORESYS.CO_MULTAESTADO.MORA_ANT%TYPE;
    VN_ME_GASTOS_ANT                    SGCORESYS.CO_MULTAESTADO.GASTOS_ANT%TYPE;
    VV_ME_CODIGOMOTIVOEXPEDIENTE        SGCORESYS.CO_MULTAESTADO.CODIGOMOTIVOEXPEDIENTE%TYPE;
    VD_ME_FECHA                         SGCORESYS.CO_MULTAESTADO.FECHA%TYPE;
    VV_ME_CONTABILIZACIONPENDIENTEFLAG  SGCORESYS.CO_MULTAESTADO.CONTABILIZACIONPENDIENTEFLAG%TYPE;
    VV_ME_PERIODO                       SGCORESYS.CO_MULTAESTADO.PERIODO%TYPE;
    VV_ME_VOUCHER                       SGCORESYS.CO_MULTAESTADO.VOUCHER%TYPE;
    VV_ME_ULTIMOUSUARIO                 SGCORESYS.CO_MULTAESTADO.ULTIMOUSUARIO%TYPE;
    VD_ME_ULTIMAFECHAMODIF              SGCORESYS.CO_MULTAESTADO.ULTIMAFECHAMODIF%TYPE;
    VV_ME_CODIGOMULTA                   SGCORESYS.CO_MULTAESTADO.CODIGOMULTA%TYPE;
    VV_ME_ORCONCILIACIONESTADO          SGCORESYS.CO_MULTAESTADO.ORCONCILIACIONESTADO%TYPE;
    VD_ME_ORCONCILIACIONFECHA           SGCORESYS.CO_MULTAESTADO.ORCONCILIACIONFECHA%TYPE;
    VV_ME_CODAREA                       SGCORESYS.CO_MULTAESTADO.CODAREA%TYPE;
    VN_ME_UITNRO                        SGCORESYS.CO_MULTAESTADO.UITNRO%TYPE;
    VN_ME_SALDOCAPITAL                  SGCORESYS.CO_MULTAESTADO.SALDOCAPITAL%TYPE;
    VN_ME_SALDOINTERES                  SGCORESYS.CO_MULTAESTADO.SALDOINTERES%TYPE;
    VN_ME_SALDOMORA                     SGCORESYS.CO_MULTAESTADO.SALDOMORA%TYPE;
    VN_ME_SALDOGASTOS                   SGCORESYS.CO_MULTAESTADO.SALDOGASTOS%TYPE;
    VV_ME_CUENTAPROVISION               SGCORESYS.CO_MULTAESTADO.CUENTAPROVISION%TYPE;
    
    VV_DESCRIPCION_TIPO_MULTA           USR_SICOB.T_SCOB_TABLA_DET.TXT_DESCRIPCION%TYPE;    
          
  BEGIN
        
    BEGIN
    
      SELECT MULTA.*
        INTO REG_T_SCOB_MULTA
        FROM USR_SICOB.T_SCOB_MULTA MULTA
       WHERE MULTA.ID_MULTA = PIN_ID_MULTA
             AND MULTA.ESTADO = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE MULTA CON : ID_MULTA => ' ||
                          PIN_ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MULTA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT MULTA_DETALLE.*
        INTO REG_T_SCOB_MULTA_DETAL
        FROM USR_SICOB.T_SCOB_MULTA_DETAL MULTA_DETALLE
       WHERE MULTA_DETALLE.ID_MULTA = PIN_ID_MULTA
             AND MULTA_DETALLE.ESTADO = '1'
             AND MULTA_DETALLE.FLG_ACTUAL = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE DETALLE DE MULTA CON : ID_MULTA => ' ||
                          PIN_ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MULTA_DETAL - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT MATE.*
        INTO REG_T_SCOB_MATERIA
        FROM USR_SICOB.T_SCOB_MATERIA MATE
       WHERE MATE.ID_MATERIA = REG_T_SCOB_MULTA.ID_MATERIA;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE MATERIA CON : ID_MATERIA => ' ||
                          REG_T_SCOB_MULTA.ID_MATERIA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MATERIA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT PROC.*
        INTO REG_T_SCOB_TIPO_PROCEDIMIENTO
        FROM USR_SICOB.T_SCOB_TIPO_PROCEDIMIENTO PROC
       WHERE PROC.ID_TIPO_PROCEDIMIENTO = REG_T_SCOB_MATERIA.ID_TIPO_PROCEDIMIENTO;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE TIPO DE PROCEDIMIENTO CON : ID_TIPO_PROCEDIMIENTO => ' ||
                          REG_T_SCOB_MATERIA.ID_TIPO_PROCEDIMIENTO;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_TIPO_PROCEDIMIENTO - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT ORGA.*
        INTO REG_T_SCOB_ORGANO_RESOLUTIVO
        FROM USR_SICOB.T_SCOB_ORGANO_RESOLUTIVO ORGA
       WHERE ORGA.ID_ORGANO_RESOLUTIVO = REG_T_SCOB_MULTA_DETAL.ID_ORGANO_RESOLUTIVO;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE ORGANO RESOLUTIVO CON : ID_ORGANO_RESOLUTIVO => ' ||
                          REG_T_SCOB_MULTA_DETAL.ID_ORGANO_RESOLUTIVO;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_ORGANO_RESOLUTIVO - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT SEDE.*
        INTO REG_T_SCOB_SEDE
        FROM USR_SICOB.T_SCOB_SEDE SEDE
       WHERE SEDE.ID_SEDE = REG_T_SCOB_MULTA.ID_SEDE;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE SEDE CON : ID_SEDE => ' ||
                          REG_T_SCOB_MULTA.ID_SEDE;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_SEDE - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT SUBM.*
        INTO REG_T_SCOB_SUBMATERIA
        FROM USR_SICOB.T_SCOB_SUBMATERIA SUBM
       WHERE SUBM.ID_SUBMATERIA = REG_T_SCOB_MULTA.ID_SUB_MATERIA;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE SUBMATERIA CON : ID_SUBMATERIA => ' ||
                          REG_T_SCOB_MULTA.ID_SUB_MATERIA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_SUBMATERIA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
     SELECT T.TXT_DESCRIPCION INTO VV_DESCRIPCION_TIPO_MULTA
       FROM USR_SICOB.T_SCOB_TABLA_DET T
      WHERE T.ID_TABLA = 45
        AND T.COD_INTERNO = REG_T_SCOB_MULTA.FLG_TIPO_MULTA;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE TIPO DE MULTA CON : FLG_TIPO_MULTA => ' ||
                          REG_T_SCOB_MULTA.FLG_TIPO_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_TABLA_DET - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;          
    
    BEGIN
    
      SELECT OXM.*
        INTO REG_T_SCOB_ORG_RESOL_MATERIA
        FROM USR_SICOB.T_SCOB_ORG_RESOL_MATERIA OXM
        WHERE OXM.ID_ORGANO_RESOLUTIVO = REG_T_SCOB_MULTA_DETAL.ID_ORGANO_RESOLUTIVO 
              AND OXM.ID_MATERIA = REG_T_SCOB_MULTA.ID_MATERIA 
              AND OXM.ESTADO = '1';
        
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE ORGANO RESOLUTIVO DE LA MATERIA CON : ID_ORGANO_RESOLUTIVO => ' ||
                          REG_T_SCOB_MULTA_DETAL.ID_ORGANO_RESOLUTIVO;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_ORG_RESOL_MATERIA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    
    VV_IDENTIFICADOR := REG_T_SCOB_MULTA.ANIO || REG_T_SCOB_MULTA.CUM;
    VV_ANIO := REG_T_SCOB_MULTA.ANIO;
    VV_ORIGEN := '1'; -- ORIGEN SICOB
    VD_FECHAREGISTRO := REG_T_SCOB_MULTA.FEC_INGRESO;
    VV_CODTIPOPROCEDIMIENTO := REG_T_SCOB_TIPO_PROCEDIMIENTO.CODIGO;
    VV_CODAREA := REG_T_SCOB_ORGANO_RESOLUTIVO.CODIGO;
    VV_CODSEDE := REG_T_SCOB_SEDE.CODIGO;
    VV_CODMATERIA := REG_T_SCOB_MATERIA.CODIGO;
    VV_CODSUBMATERIA := REG_T_SCOB_SUBMATERIA.CODIGO;
    VV_EXPEDIENTE := REG_T_SCOB_MULTA.NRO_EXP_ADMINISTRATIVO;
    VV_EXPEDIENTEANTERIOR := REG_T_SCOB_MULTA_DETAL.NRO_EXP_NIVEL;
    
    --TIPO_INSTANCIA DEL ÓRGANO RESOLUTIVO = 1
    IF REG_T_SCOB_ORGANO_RESOLUTIVO.TIPO_INSTANCIA = 1 THEN
      VV_ORPSRESOLNUMERO := REG_T_SCOB_MULTA_DETAL.NRO_RESOLUCION;
      VD_ORPSRESOLFECHAREGISTRO := TRUNC(REG_T_SCOB_MULTA_DETAL.AUDFECCREACION);
      VD_ORPSRESOLFECHAEMISION := REG_T_SCOB_MULTA_DETAL.FEC_RESOLUCION;
      VD_ORPSRESOLFECHANOTIFICACION := REG_T_SCOB_MULTA_DETAL.FEC_NOTIFICACION_RESOLUCION;
      VD_ORPSFECHAAPELACION := REG_T_SCOB_MULTA_DETAL.FEC_ESTADO_SGTE_INSTANCIA;
      VN_ORPSCANTIDADDIAS := REG_T_SCOB_MULTA_DETAL.NU_CANTIDAD_DIAS;
    END IF;
    
    VV_ORPSUSUARIO := SYSDATE;
    
    --TIPO_INSTANCIA DEL ÓRGANO RESOLUTIVO = 2
    IF REG_T_SCOB_ORGANO_RESOLUTIVO.TIPO_INSTANCIA = 2 THEN
      VV_COMRESOLNUMERO := REG_T_SCOB_MULTA_DETAL.NRO_RESOLUCION;
      VD_COMRESOLFECHAREGISTRO := TRUNC(REG_T_SCOB_MULTA_DETAL.AUDFECCREACION);
      VD_COMRESOLFECHAEMISION := REG_T_SCOB_MULTA_DETAL.FEC_RESOLUCION;
      VD_COMRESOLFECHANOTIFICACION := REG_T_SCOB_MULTA_DETAL.FEC_NOTIFICACION_RESOLUCION;
      VD_COMFECHAREVISION := REG_T_SCOB_MULTA_DETAL.FEC_ESTADO_SGTE_INSTANCIA;
      VV_COMUSUARIO := REG_T_SCOB_MULTA_DETAL.AUDUSUCREACION;
      VN_COMCANTIDADDIAS := REG_T_SCOB_MULTA_DETAL.NU_CANTIDAD_DIAS;
    END IF;
    
    --TIPO_INSTANCIA DEL ÓRGANO RESOLUTIVO = 3
    IF REG_T_SCOB_ORGANO_RESOLUTIVO.TIPO_INSTANCIA = 3 THEN
      VV_SALARESOLNUMERO := REG_T_SCOB_MULTA_DETAL.NRO_RESOLUCION;
      VD_SALARESOLFECHAREGISTRO := TRUNC(REG_T_SCOB_MULTA_DETAL.AUDFECCREACION);
      VD_SALARESOLFECHAEMISION := REG_T_SCOB_MULTA_DETAL.FEC_RESOLUCION;
      VD_SALARESOLFECHANOTIFICACION := REG_T_SCOB_MULTA_DETAL.FEC_NOTIFICACION_RESOLUCION;
      VV_SALAUSUARIO := REG_T_SCOB_MULTA_DETAL.AUDUSUCREACION;
      VN_SALACANTIDADDIAS := REG_T_SCOB_MULTA_DETAL.NU_CANTIDAD_DIAS;
    END IF;
    
    VV_TIPOMULTA := SUBSTR(VV_DESCRIPCION_TIPO_MULTA, 1, 1);
    IF NVL(REG_T_SCOB_MULTA_DETAL.POR_ASOCU, '0') = '0' THEN
      VV_ASOCUPORCFLAG := 'N';
    ELSE 
      VV_ASOCUPORCFLAG := 'S';
    END IF;
        
    VN_ASOCUPORC := NVL(REG_T_SCOB_MULTA_DETAL.POR_ASOCU, 0);
    VN_UITNRO := NVL(REG_T_SCOB_MULTA_DETAL.VALOR_UIT, 0);
    VN_UITMONTOCAPITAL := REG_T_SCOB_MULTA.MONTO_UIT;
    VN_INTERESES := REG_T_SCOB_MULTA.MONTO_INTERES;
    VN_MORA := REG_T_SCOB_MULTA.MONTO_INTERES_MORATORIO;
    VN_GASTOS := REG_T_SCOB_MULTA.MONTO_COSTAS;
    VN_AMORTIZADO := REG_T_SCOB_MULTA.TOTAL_AMORTIZADO;
    VN_AMORTIZADOINTERESES := REG_T_SCOB_MULTA.TOTAL_AMORTIZADO_IM;
    VN_AMORTIZADOMORA := REG_T_SCOB_MULTA.TOTAL_AMORTIZADO_IC;
    VN_AMORTIZADOGASTOS := REG_T_SCOB_MULTA.TOTAL_AMORTIZADO_COSTAS;
    VN_SALDO := REG_T_SCOB_MULTA.SALDO;
    VN_SALDOINTERESES := REG_T_SCOB_MULTA.SALDO_IC;
    VN_SALDOMORA := REG_T_SCOB_MULTA.SALDO_IM;
    VN_SALDOGASTOS := REG_T_SCOB_MULTA.SALDO_COSTAS;
    VV_ESTADOMULTA := REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
    
    IF REG_T_SCOB_MULTA.COD_ESTADO_PAGO = '4' THEN
      VN_DESCUENTOMULTA := REG_T_SCOB_MULTA.PORCENTAJE_DESCUENTO;
    ELSE 
      VN_DESCUENTOMULTA := NULL;
    END IF;
    
    VD_SECFECHAREGISTRO := REG_T_SCOB_MULTA.FEC_GENERACION_SEC;
    VV_FILEANIO := REG_T_SCOB_MULTA.ANIO_FILE_AEC;
    VD_FILEFECHARECEPCION := REG_T_SCOB_MULTA.FEC_INGRESO_AEC;   
    VV_ESTADOMULTACOBRANZA := REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
    VD_FECHAOBSERVACION := REG_T_SCOB_MULTA.FEC_ULT_IMPROCEDENCIA;
    VD_FECHAULTIMOINGRESO := REG_T_SCOB_MULTA.FEC_INGRESO_FILE;
    VD_FECHAASIGNACION := REG_T_SCOB_MULTA.FECHA_ASIG_COBRANZA;
    VD_FECHACARTA := REG_T_SCOB_MULTA.FEC_ULT_GEN_PRECOACTIVA;
    VD_RECFECHAEMISION := REG_T_SCOB_MULTA.FEC_EMISION_REC;
    VD_RECFECHANOTIFICACION := REG_T_SCOB_MULTA.FEC_NOTIF_REC;
    VD_FECHARIESGO := SYSDATE;
    VV_ESTADOPAGO := REG_T_SCOB_MULTA.FLG_TIPO_MULTA;
    VV_CODAREADESCRIPCION := REG_T_SCOB_ORGANO_RESOLUTIVO.DESCRIPCION;
    IF REG_T_SCOB_MULTA.COD_MOTIVO = 0 THEN
      VV_EMBARGOFLAG := NULL;
    ELSE 
      VV_EMBARGOFLAG := REG_T_SCOB_MULTA.COD_MOTIVO;
    END IF;
    VV_CODCENTROCOSTO := REG_T_SCOB_ORG_RESOL_MATERIA.VC_SIA_CC_COD;

    INSERT INTO SGCORESYS.CO_MULTA (
      IDENTIFICADOR,
      ANIO,
      ORIGEN,
      FECHAREGISTRO,
      CODTIPOPROCEDIMIENTO,
      CODAREA,
      CODSEDE,
      CODMATERIA,
      CODSUBMATERIA,
      EXPEDIENTE,
      EXPEDIENTEANTERIOR,
      ORPSRESOLNUMERO,
      ORPSRESOLFECHAREGISTRO,
      ORPSRESOLFECHAEMISION,
      ORPSRESOLFECHANOTIFICACION,
      ORPSFECHAAPELACION,
      ORPSUSUARIO,
      ORPSCANTIDADDIAS,
      COMRESOLNUMERO,
      COMRESOLFECHAREGISTRO,
      COMRESOLFECHAEMISION,
      COMRESOLFECHANOTIFICACION,
      COMFECHAREVISION,
      COMUSUARIO,
      COMCANTIDADDIAS,
      SALARESOLNUMERO,
      SALARESOLFECHAREGISTRO,
      SALARESOLFECHAEMISION,
      SALARESOLFECHANOTIFICACION,
      SALAUSUARIO,
      SALACANTIDADDIAS,
      TIPOMULTA,
      DENUNCIANTE,
      DENUNCIADO,
      DENUNCIANTENOMBRE,
      SANCIONADO,
      CODCLASIFICACION,
      CODACTIVIDAD,
      ASOCUPORCFLAG,
      ASOCUPORC,
      UITNRO,
      UITMONTOCAPITAL,
      INTERESES,
      MORA,
      GASTOS,
      AMORTIZADO,
      AMORTIZADOINTERESES,
      AMORTIZADOMORA,
      AMORTIZADOGASTOS,
      SALDO,
      SALDOINTERESES,
      SALDOMORA,
      SALDOGASTOS,
      ESTADOMULTA,
      DESCUENTOMULTA,
      SECFECHAREGISTRO,
      FILEANIO,
      FILEFECHARECEPCION,
      FILENUMERO,
      NUMEROINGRESO,
      ESTADOMULTACOBRANZA,
      CODMOTIVOMULTA,
      FECHAOBSERVACION,
      FECHAULTIMOINGRESO,
      COBEXPEDIENTENRO,
      COBEXPEDIENTEFECHA,
      COBGESTOR,
      FECHAASIGNACION,
      FECHACARTA,
      RECFECHAEMISION,
      RECFECHANOTIFICACION,
      EMBARGOFLAG,
      COBEXPEDIENTEESTADO,
      COBEXPEDIENTEMOTIVO,
      COBFECHAULTIMO,
      FECHARIESGO,
      COBROEXPECTATIVA,
      REGION,
      ENVIONUMERO,
      ENVIOFECHA,
      UBICACIONFISICA,
      CUOTA,
      FECHAVENCIMIENTO,
      ESTADOPAGO,
      CODIGOMULTA,
      AECNOTIFICACIONESTADO,
      AECNOTIFICACIONFECHA,
      TIPOFRACCIONAMIENTO,
      COMRESOLANIO,
      COMRESOLCODIGO,
      CUOTANOTIFICACIONESTADO,
      CUOTANOTIFICACIONFECHA,
      EXPEDCOBRANZAANIO,
      CUMANIO,
      COBRANZADUDOSAESTADO,
      COBRANZADUDOSAVOUCHER,
      COBRANZADUDOSAFECHA,
      COBRANZADUDOSAVOUCHERCLEARING,
      COBRANZADUDOSAFECHACLEARING,
      AECCONCILIACIONESTADO,
      AECCONCILIACIONFECHA,
      CODAREADESCRIPCION,
      REFERENCIATIPO,
      REFERENCIANUMERO,
      CASTIGORESOLNUMERO,
      CASTIGORESOLFECHA,
      CUOTAFINRESOLFECHA,
      CUOTAFINRESOLNUMERO,
      CUOTAFINFECHA,
      CASTIGOOBSERVACION,
      CUOTAFINMOTIVO,
      COMPROBANTEINGRESO,
      CODMOTIVOMULTACOB,
      CODCENTROCOSTO,
      DECLNUMERO01,
      DECLFECHAEMISION01,
      DECLFECHANOTIF01,
      DECLNUMERO02,
      DECLFECHAEMISION02,
      DECLFECHANOTIF02,
      DECLNUMERO03,
      DECLFECHAEMISION03,
      DECLFECHANOTIF03,
      SALDOCAPITAL,
      SALDOINTERES,
      MONTOPROVISIONDUDOSA,
      MONTOPROVISIONDUDOSAGASTOS,
      MONTOVOUCHERCOBRANZA,
      MONTOVOUCHERCOBRANZAGASTOS)
    VALUES
    (
      VV_IDENTIFICADOR,
      VV_ANIO,
      VV_ORIGEN,
      VD_FECHAREGISTRO,
      VV_CODTIPOPROCEDIMIENTO,
      VV_CODAREA,
      VV_CODSEDE,
      VV_CODMATERIA,
      VV_CODSUBMATERIA,
      VV_EXPEDIENTE,
      VV_EXPEDIENTEANTERIOR,
      VV_ORPSRESOLNUMERO,
      VD_ORPSRESOLFECHAREGISTRO,
      VD_ORPSRESOLFECHAEMISION,
      VD_ORPSRESOLFECHANOTIFICACION,
      VD_ORPSFECHAAPELACION,
      VV_ORPSUSUARIO,
      VN_ORPSCANTIDADDIAS,
      VV_COMRESOLNUMERO,
      VD_COMRESOLFECHAREGISTRO,
      VD_COMRESOLFECHAEMISION,
      VD_COMRESOLFECHANOTIFICACION,
      VD_COMFECHAREVISION,
      VV_COMUSUARIO,
      VN_COMCANTIDADDIAS,
      VV_SALARESOLNUMERO,
      VD_SALARESOLFECHAREGISTRO,
      VD_SALARESOLFECHAEMISION,
      VD_SALARESOLFECHANOTIFICACION,
      VV_SALAUSUARIO,
      VN_SALACANTIDADDIAS,
      VV_TIPOMULTA,
      VN_DENUNCIANTE,
      VN_DENUNCIADO,
      VV_DENUNCIANTENOMBRE,
      VN_SANCIONADO,
      VV_CODCLASIFICACION,
      VV_CODACTIVIDAD,
      VV_ASOCUPORCFLAG,
      VN_ASOCUPORC,
      VN_UITNRO,
      VN_UITMONTOCAPITAL,
      VN_INTERESES,
      VN_MORA,
      VN_GASTOS,
      VN_AMORTIZADO,
      VN_AMORTIZADOINTERESES,
      VN_AMORTIZADOMORA,
      VN_AMORTIZADOGASTOS,
      VN_SALDO,
      VN_SALDOINTERESES,
      VN_SALDOMORA,
      VN_SALDOGASTOS,
      VV_ESTADOMULTA,
      VN_DESCUENTOMULTA,
      VD_SECFECHAREGISTRO,
      VV_FILEANIO,
      VD_FILEFECHARECEPCION,
      VV_FILENUMERO,
      VV_NUMEROINGRESO,
      VV_ESTADOMULTACOBRANZA,
      VV_CODMOTIVOMULTA,
      VD_FECHAOBSERVACION,
      VD_FECHAULTIMOINGRESO,
      VV_COBEXPEDIENTENRO,
      VD_COBEXPEDIENTEFECHA,
      VV_COBGESTOR,
      VD_FECHAASIGNACION,
      VD_FECHACARTA,
      VD_RECFECHAEMISION,
      VD_RECFECHANOTIFICACION,
      VV_EMBARGOFLAG,
      VV_COBEXPEDIENTEESTADO,
      VV_COBEXPEDIENTEMOTIVO,
      VD_COBFECHAULTIMO,
      VD_FECHARIESGO,
      VV_COBROEXPECTATIVA,
      VV_REGION,
      VV_ENVIONUMERO,
      VD_ENVIOFECHA,
      VV_UBICACIONFISICA,
      VN_CUOTA,
      VD_FECHAVENCIMIENTO,
      VV_ESTADOPAGO,
      VV_CODIGOMULTA,
      VV_AECNOTIFICACIONESTADO,
      VD_AECNOTIFICACIONFECHA,
      VV_TIPOFRACCIONAMIENTO,
      VV_COMRESOLANIO,
      VV_COMRESOLCODIGO,
      VV_CUOTANOTIFICACIONESTADO,
      VD_CUOTANOTIFICACIONFECHA,
      VV_EXPEDCOBRANZAANIO,
      VV_CUMANIO,
      VV_COBRANZADUDOSAESTADO,
      VV_COBRANZADUDOSAVOUCHER,
      VD_COBRANZADUDOSAFECHA,
      VV_COBRANZADUDOSAVOUCHERCLEARING,
      VD_COBRANZADUDOSAFECHACLEARING,
      VV_AECCONCILIACIONESTADO,
      VD_AECCONCILIACIONFECHA,
      VV_CODAREADESCRIPCION,
      VV_REFERENCIATIPO,
      VV_REFERENCIANUMERO,
      VV_CASTIGORESOLNUMERO,
      VD_CASTIGORESOLFECHA,
      VD_CUOTAFINRESOLFECHA,
      VD_CUOTAFINRESOLNUMERO,
      VV_CUOTAFINFECHA,
      VV_CASTIGOOBSERVACION,
      VV_CUOTAFINMOTIVO,
      VN_COMPROBANTEINGRESO,
      VV_CODMOTIVOMULTACOB,
      VV_CODCENTROCOSTO,
      VV_DECLNUMERO01,
      VD_DECLFECHAEMISION01,
      VD_DECLFECHANOTIF01,
      VV_DECLNUMERO02,
      VD_DECLFECHAEMISION02,
      VD_DECLFECHANOTIF02,
      VV_DECLNUMERO03,
      VD_DECLFECHAEMISION03,
      VD_DECLFECHANOTIF03,
      VN_SALDOCAPITAL,
      VN_SALDOINTERES,
      VN_MONTOPROVISIONDUDOSA,
      VN_MONTOPROVISIONDUDOSAGASTOS,
      VN_MONTOVOUCHERCOBRANZA,
      VN_MONTOVOUCHERCOBRANZAGASTOS
    );
    
    VV_ME_IDENTIFICADOR := REG_T_SCOB_MULTA.ANIO || REG_T_SCOB_MULTA.CUM;
    VN_ME_SECUENCIA := 1;
    VV_ME_ESTADOMULTA := REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
    VV_ME_ESTADOPAGO := REG_T_SCOB_MULTA.FLG_TIPO_MULTA;
    VV_ME_ESTADOCOBRANZA := REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
    VN_ME_CAPITAL := REG_T_SCOB_MULTA.MONTO_UIT;
    VN_ME_INTERESES := REG_T_SCOB_MULTA.MONTO_INTERES;
    VN_ME_MORA := REG_T_SCOB_MULTA.MONTO_INTERES_MORATORIO;
    VN_ME_GASTOS := REG_T_SCOB_MULTA.MONTO_COSTAS;
    VN_ME_CAPITAL_ANT := REG_T_SCOB_MULTA.MONTO_UIT;
    VN_ME_INTERESES_ANT := REG_T_SCOB_MULTA.MONTO_INTERES;
    VN_ME_MORA_ANT := REG_T_SCOB_MULTA.MONTO_INTERES_MORATORIO;
    VN_ME_GASTOS_ANT := REG_T_SCOB_MULTA.MONTO_COSTAS;
    VD_ME_FECHA := SYSDATE;
    VV_ME_CONTABILIZACIONPENDIENTEFLAG := 'S';
    VV_ME_PERIODO := TO_CHAR(SYSDATE, 'YYYYMM');
    VV_ME_VOUCHER := NULL;
    VV_ME_ULTIMOUSUARIO := 'SIA';
    VD_ME_ULTIMAFECHAMODIF := SYSDATE;
    VV_ME_CODIGOMULTA := NULL;
    VV_ME_ORCONCILIACIONESTADO := NULL;
    VD_ME_ORCONCILIACIONFECHA := NULL;
    VV_ME_CODAREA := REG_T_SCOB_ORGANO_RESOLUTIVO.CODIGO;
    VN_ME_UITNRO := NVL(REG_T_SCOB_MULTA_DETAL.VALOR_UIT, 0);
    VN_ME_SALDOCAPITAL := REG_T_SCOB_MULTA.SALDO;
    VN_ME_SALDOINTERES := REG_T_SCOB_MULTA.SALDO_IC;
    VN_ME_SALDOMORA := REG_T_SCOB_MULTA.SALDO_IM;
    VN_ME_SALDOGASTOS := REG_T_SCOB_MULTA.SALDO_COSTAS;
    VV_ME_CUENTAPROVISION := NULL;
    
    INSERT INTO SGCORESYS.CO_MULTAESTADO(
      IDENTIFICADOR,
      SECUENCIA,
      ESTADOMULTA,
      ESTADOPAGO,
      ESTADOCOBRANZA,
      ESTADOEXPEDIENTE,
      CAPITAL,
      INTERESES,
      MORA,
      GASTOS,
      CAPITAL_ANT,
      INTERESES_ANT,
      MORA_ANT,
      GASTOS_ANT,
      CODIGOMOTIVOEXPEDIENTE,
      FECHA,
      CONTABILIZACIONPENDIENTEFLAG,
      PERIODO,
      VOUCHER,
      ULTIMOUSUARIO,
      ULTIMAFECHAMODIF,
      CODIGOMULTA,
      ORCONCILIACIONESTADO,
      ORCONCILIACIONFECHA,
      CODAREA,
      UITNRO,
      SALDOCAPITAL,
      SALDOINTERES,
      SALDOMORA,
      SALDOGASTOS,
      CUENTAPROVISION)
      VALUES(
      VV_ME_IDENTIFICADOR,
      VN_ME_SECUENCIA,
      VV_ME_ESTADOMULTA,
      VV_ME_ESTADOPAGO,
      VV_ME_ESTADOCOBRANZA,
      VV_ME_ESTADOEXPEDIENTE,
      VN_ME_CAPITAL,
      VN_ME_INTERESES,
      VN_ME_MORA,
      VN_ME_GASTOS,
      VN_ME_CAPITAL_ANT,
      VN_ME_INTERESES_ANT,
      VN_ME_MORA_ANT,
      VN_ME_GASTOS_ANT,
      VV_ME_CODIGOMOTIVOEXPEDIENTE,
      VD_ME_FECHA,
      VV_ME_CONTABILIZACIONPENDIENTEFLAG,
      VV_ME_PERIODO,
      VV_ME_VOUCHER,
      VV_ME_ULTIMOUSUARIO,
      VD_ME_ULTIMAFECHAMODIF,
      VV_ME_CODIGOMULTA,
      VV_ME_ORCONCILIACIONESTADO,
      VD_ME_ORCONCILIACIONFECHA,
      VV_ME_CODAREA,
      VN_ME_UITNRO,
      VN_ME_SALDOCAPITAL,
      VN_ME_SALDOINTERES,
      VN_ME_SALDOMORA,
      VN_ME_SALDOGASTOS,
      VV_ME_CUENTAPROVISION);       
    
    --REGISTRAR PERSONAS EN CASO SE AÑADAN
    SP_REGISTRO_PERSONA_SICOB_A_SIA(PIN_ID_MULTA,
                                    VV_IDENTIFICADOR,
                                    PON_COD_RESULT,
                                    POV_MSG_RESULT);
                                    
                                    
    IF PON_COD_RESULT <> 0 THEN
       RAISE EX_CONTROLADO;
    END IF;
    
    COMMIT;
    
    PON_COD_RESULT := 0;
    POV_MSG_RESULT := 'CONFORME';
  
  EXCEPTION
    WHEN EX_CONTROLADO THEN
      PON_COD_RESULT := -1;
    WHEN OTHERS THEN
      PON_COD_RESULT := -1;
      POV_MSG_RESULT := 'ERROR NO CONTROLADO : SP_REGISTRO_MULTA_SICOB_A_SIA - ERROR : ' ||
                        SQLERRM;
  END SP_REGISTRO_MULTA_SICOB_A_SIA;
  
  PROCEDURE SP_ACTUALIZA_MULTA_SICOB_A_SIA(PIN_ID_MULTA   IN NUMBER,
                                          PON_COD_RESULT OUT NUMBER,
                                          POV_MSG_RESULT OUT VARCHAR2) IS
  
    REG_T_SCOB_MULTA                 USR_SICOB.T_SCOB_MULTA%ROWTYPE;
    REG_T_SCOB_MULTA_DETAL           USR_SICOB.T_SCOB_MULTA_DETAL%ROWTYPE;
    REG_T_SCOB_MATERIA               USR_SICOB.T_SCOB_MATERIA%ROWTYPE;
    REG_T_SCOB_TIPO_PROCEDIMIENTO    USR_SICOB.T_SCOB_TIPO_PROCEDIMIENTO%ROWTYPE;
    REG_T_SCOB_ORGANO_RESOLUTIVO     USR_SICOB.T_SCOB_ORGANO_RESOLUTIVO%ROWTYPE;
    REG_T_SCOB_SEDE                  USR_SICOB.T_SCOB_SEDE%ROWTYPE;
    REG_T_SCOB_SUBMATERIA            USR_SICOB.T_SCOB_SUBMATERIA%ROWTYPE;    
    REG_T_SCOB_ORG_RESOL_MATERIA     USR_SICOB.T_SCOB_ORG_RESOL_MATERIA%ROWTYPE;    
    
    VV_IDENTIFICADOR                 SGCORESYS.CO_MULTA.IDENTIFICADOR%TYPE;
    VV_ANIO                          SGCORESYS.CO_MULTA.ANIO%TYPE;
    VV_ORIGEN                        SGCORESYS.CO_MULTA.ORIGEN%TYPE;
    VD_FECHAREGISTRO                 SGCORESYS.CO_MULTA.FECHAREGISTRO%TYPE;
    VV_CODTIPOPROCEDIMIENTO          SGCORESYS.CO_MULTA.CODTIPOPROCEDIMIENTO%TYPE;
    VV_CODAREA                       SGCORESYS.CO_MULTA.CODAREA%TYPE;
    VV_CODSEDE                       SGCORESYS.CO_MULTA.CODSEDE%TYPE;
    VV_CODMATERIA                    SGCORESYS.CO_MULTA.CODMATERIA%TYPE;
    VV_CODSUBMATERIA                 SGCORESYS.CO_MULTA.CODSUBMATERIA%TYPE;
    VV_EXPEDIENTE                    SGCORESYS.CO_MULTA.EXPEDIENTE%TYPE;
    VV_EXPEDIENTEANTERIOR            SGCORESYS.CO_MULTA.EXPEDIENTEANTERIOR%TYPE;
    VV_ORPSRESOLNUMERO               SGCORESYS.CO_MULTA.ORPSRESOLNUMERO%TYPE;
    VD_ORPSRESOLFECHAREGISTRO        SGCORESYS.CO_MULTA.ORPSRESOLFECHAREGISTRO%TYPE;
    VD_ORPSRESOLFECHAEMISION         SGCORESYS.CO_MULTA.ORPSRESOLFECHAEMISION%TYPE;
    VD_ORPSRESOLFECHANOTIFICACION    SGCORESYS.CO_MULTA.ORPSRESOLFECHANOTIFICACION%TYPE;
    VD_ORPSFECHAAPELACION            SGCORESYS.CO_MULTA.ORPSFECHAAPELACION%TYPE;
    VV_ORPSUSUARIO                   SGCORESYS.CO_MULTA.ORPSUSUARIO%TYPE;
    VN_ORPSCANTIDADDIAS              SGCORESYS.CO_MULTA.ORPSCANTIDADDIAS%TYPE;
    VV_COMRESOLNUMERO                SGCORESYS.CO_MULTA.COMRESOLNUMERO%TYPE;
    VD_COMRESOLFECHAREGISTRO         SGCORESYS.CO_MULTA.COMRESOLFECHAREGISTRO%TYPE;
    VD_COMRESOLFECHAEMISION          SGCORESYS.CO_MULTA.COMRESOLFECHAEMISION%TYPE;
    VD_COMRESOLFECHANOTIFICACION     SGCORESYS.CO_MULTA.COMRESOLFECHANOTIFICACION%TYPE;
    VD_COMFECHAREVISION              SGCORESYS.CO_MULTA.COMFECHAREVISION%TYPE;
    VV_COMUSUARIO                    SGCORESYS.CO_MULTA.COMUSUARIO%TYPE;
    VN_COMCANTIDADDIAS               SGCORESYS.CO_MULTA.COMCANTIDADDIAS%TYPE;
    VV_SALARESOLNUMERO               SGCORESYS.CO_MULTA.SALARESOLNUMERO%TYPE;
    VD_SALARESOLFECHAREGISTRO        SGCORESYS.CO_MULTA.SALARESOLFECHAREGISTRO%TYPE;
    VD_SALARESOLFECHAEMISION         SGCORESYS.CO_MULTA.SALARESOLFECHAEMISION%TYPE;
    VD_SALARESOLFECHANOTIFICACION    SGCORESYS.CO_MULTA.SALARESOLFECHANOTIFICACION%TYPE;
    VV_SALAUSUARIO                   SGCORESYS.CO_MULTA.SALAUSUARIO%TYPE;
    VN_SALACANTIDADDIAS              SGCORESYS.CO_MULTA.SALACANTIDADDIAS%TYPE;
    VV_TIPOMULTA                     SGCORESYS.CO_MULTA.TIPOMULTA%TYPE;    
    VV_ASOCUPORCFLAG                 SGCORESYS.CO_MULTA.ASOCUPORCFLAG%TYPE;
    VN_ASOCUPORC                     SGCORESYS.CO_MULTA.ASOCUPORC%TYPE;
    VN_UITNRO                        SGCORESYS.CO_MULTA.UITNRO%TYPE;
    VN_UITMONTOCAPITAL               SGCORESYS.CO_MULTA.UITMONTOCAPITAL%TYPE;
    VN_INTERESES                     SGCORESYS.CO_MULTA.INTERESES%TYPE;
    VN_MORA                          SGCORESYS.CO_MULTA.MORA%TYPE;
    VN_GASTOS                        SGCORESYS.CO_MULTA.GASTOS%TYPE;
    VN_AMORTIZADO                    SGCORESYS.CO_MULTA.AMORTIZADO%TYPE;
    VN_AMORTIZADOINTERESES           SGCORESYS.CO_MULTA.AMORTIZADOINTERESES%TYPE;
    VN_AMORTIZADOMORA                SGCORESYS.CO_MULTA.AMORTIZADOMORA%TYPE;
    VN_AMORTIZADOGASTOS              SGCORESYS.CO_MULTA.AMORTIZADOGASTOS%TYPE;
    VN_SALDO                         SGCORESYS.CO_MULTA.SALDO%TYPE;
    VN_SALDOINTERESES                SGCORESYS.CO_MULTA.SALDOINTERESES%TYPE;
    VN_SALDOMORA                     SGCORESYS.CO_MULTA.SALDOMORA%TYPE;
    VN_SALDOGASTOS                   SGCORESYS.CO_MULTA.SALDOGASTOS%TYPE;
    VV_ESTADOMULTA                   SGCORESYS.CO_MULTA.ESTADOMULTA%TYPE;
    VN_DESCUENTOMULTA                SGCORESYS.CO_MULTA.DESCUENTOMULTA%TYPE;
    VD_SECFECHAREGISTRO              SGCORESYS.CO_MULTA.SECFECHAREGISTRO%TYPE;
    VV_FILEANIO                      SGCORESYS.CO_MULTA.FILEANIO%TYPE;
    VD_FILEFECHARECEPCION            SGCORESYS.CO_MULTA.FILEFECHARECEPCION%TYPE;    
    VV_ESTADOMULTACOBRANZA           SGCORESYS.CO_MULTA.ESTADOMULTACOBRANZA%TYPE;    
    VD_FECHAOBSERVACION              SGCORESYS.CO_MULTA.FECHAOBSERVACION%TYPE;
    VD_FECHAULTIMOINGRESO            SGCORESYS.CO_MULTA.FECHAULTIMOINGRESO%TYPE;    
    VD_FECHAASIGNACION               SGCORESYS.CO_MULTA.FECHAASIGNACION%TYPE;
    VD_FECHACARTA                    SGCORESYS.CO_MULTA.FECHACARTA%TYPE;
    VD_RECFECHAEMISION               SGCORESYS.CO_MULTA.RECFECHAEMISION%TYPE;
    VD_RECFECHANOTIFICACION          SGCORESYS.CO_MULTA.RECFECHANOTIFICACION%TYPE;
    VV_EMBARGOFLAG                   SGCORESYS.CO_MULTA.EMBARGOFLAG%TYPE;    
    VD_FECHARIESGO                   SGCORESYS.CO_MULTA.FECHARIESGO%TYPE;
    VV_ESTADOPAGO                    SGCORESYS.CO_MULTA.ESTADOPAGO%TYPE;        
    VV_CODAREADESCRIPCION            SGCORESYS.CO_MULTA.CODAREADESCRIPCION%TYPE;    
    VV_CODCENTROCOSTO                SGCORESYS.CO_MULTA.CODCENTROCOSTO%TYPE;   
    
    VV_ME_IDENTIFICADOR                 SGCORESYS.CO_MULTAESTADO.IDENTIFICADOR%TYPE;
    VN_ME_SECUENCIA                     SGCORESYS.CO_MULTAESTADO.SECUENCIA%TYPE;
    VV_ME_ESTADOMULTA                   SGCORESYS.CO_MULTAESTADO.ESTADOMULTA%TYPE;
    VV_ME_ESTADOPAGO                    SGCORESYS.CO_MULTAESTADO.ESTADOPAGO%TYPE;
    VV_ME_ESTADOCOBRANZA                SGCORESYS.CO_MULTAESTADO.ESTADOCOBRANZA%TYPE;
    VV_ME_ESTADOEXPEDIENTE              SGCORESYS.CO_MULTAESTADO.ESTADOEXPEDIENTE%TYPE;
    VN_ME_CAPITAL                       SGCORESYS.CO_MULTAESTADO.CAPITAL%TYPE;
    VN_ME_INTERESES                     SGCORESYS.CO_MULTAESTADO.INTERESES%TYPE;
    VN_ME_MORA                          SGCORESYS.CO_MULTAESTADO.MORA%TYPE;
    VN_ME_GASTOS                        SGCORESYS.CO_MULTAESTADO.GASTOS%TYPE;
    VN_ME_CAPITAL_ANT                   SGCORESYS.CO_MULTAESTADO.CAPITAL_ANT%TYPE;
    VN_ME_INTERESES_ANT                 SGCORESYS.CO_MULTAESTADO.INTERESES_ANT%TYPE;
    VN_ME_MORA_ANT                      SGCORESYS.CO_MULTAESTADO.MORA_ANT%TYPE;
    VN_ME_GASTOS_ANT                    SGCORESYS.CO_MULTAESTADO.GASTOS_ANT%TYPE;
    VV_ME_CODIGOMOTIVOEXPEDIENTE        SGCORESYS.CO_MULTAESTADO.CODIGOMOTIVOEXPEDIENTE%TYPE;
    VD_ME_FECHA                         SGCORESYS.CO_MULTAESTADO.FECHA%TYPE;
    VV_ME_CONTABILIZACIONPENDIENTEFLAG  SGCORESYS.CO_MULTAESTADO.CONTABILIZACIONPENDIENTEFLAG%TYPE;
    VV_ME_PERIODO                       SGCORESYS.CO_MULTAESTADO.PERIODO%TYPE;
    VV_ME_VOUCHER                       SGCORESYS.CO_MULTAESTADO.VOUCHER%TYPE;
    VV_ME_ULTIMOUSUARIO                 SGCORESYS.CO_MULTAESTADO.ULTIMOUSUARIO%TYPE;
    VD_ME_ULTIMAFECHAMODIF              SGCORESYS.CO_MULTAESTADO.ULTIMAFECHAMODIF%TYPE;
    VV_ME_CODIGOMULTA                   SGCORESYS.CO_MULTAESTADO.CODIGOMULTA%TYPE;
    VV_ME_ORCONCILIACIONESTADO          SGCORESYS.CO_MULTAESTADO.ORCONCILIACIONESTADO%TYPE;
    VD_ME_ORCONCILIACIONFECHA           SGCORESYS.CO_MULTAESTADO.ORCONCILIACIONFECHA%TYPE;
    VV_ME_CODAREA                       SGCORESYS.CO_MULTAESTADO.CODAREA%TYPE;
    VN_ME_UITNRO                        SGCORESYS.CO_MULTAESTADO.UITNRO%TYPE;
    VN_ME_SALDOCAPITAL                  SGCORESYS.CO_MULTAESTADO.SALDOCAPITAL%TYPE;
    VN_ME_SALDOINTERES                  SGCORESYS.CO_MULTAESTADO.SALDOINTERES%TYPE;
    VN_ME_SALDOMORA                     SGCORESYS.CO_MULTAESTADO.SALDOMORA%TYPE;
    VN_ME_SALDOGASTOS                   SGCORESYS.CO_MULTAESTADO.SALDOGASTOS%TYPE;
    VV_ME_CUENTAPROVISION               SGCORESYS.CO_MULTAESTADO.CUENTAPROVISION%TYPE;
    
    VV_DESCRIPCION_TIPO_MULTA           USR_SICOB.T_SCOB_TABLA_DET.TXT_DESCRIPCION%TYPE;    
    VV_ESTADOMULTA_SIA                  SGCORESYS.CO_MULTA.ESTADOMULTA%TYPE;
    VN_SECUENCIA_ACTUAL                 SGCORESYS.CO_MULTAESTADO.SECUENCIA%TYPE;
    
  BEGIN
        
    BEGIN
    
      SELECT MULTA.*
        INTO REG_T_SCOB_MULTA
        FROM USR_SICOB.T_SCOB_MULTA MULTA
       WHERE MULTA.ID_MULTA = PIN_ID_MULTA
             AND MULTA.ESTADO = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE MULTA CON : ID_MULTA => ' ||
                          PIN_ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MULTA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT MULTA_DETALLE.*
        INTO REG_T_SCOB_MULTA_DETAL
        FROM USR_SICOB.T_SCOB_MULTA_DETAL MULTA_DETALLE
       WHERE MULTA_DETALLE.ID_MULTA = PIN_ID_MULTA
             AND MULTA_DETALLE.ESTADO = '1'
             AND MULTA_DETALLE.FLG_ACTUAL = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE DETALLE DE MULTA CON : ID_MULTA => ' ||
                          PIN_ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MULTA_DETAL - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT MATE.*
        INTO REG_T_SCOB_MATERIA
        FROM USR_SICOB.T_SCOB_MATERIA MATE
       WHERE MATE.ID_MATERIA = REG_T_SCOB_MULTA.ID_MATERIA;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE MATERIA CON : ID_MATERIA => ' ||
                          REG_T_SCOB_MULTA.ID_MATERIA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MATERIA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT PROC.*
        INTO REG_T_SCOB_TIPO_PROCEDIMIENTO
        FROM USR_SICOB.T_SCOB_TIPO_PROCEDIMIENTO PROC
       WHERE PROC.ID_TIPO_PROCEDIMIENTO = REG_T_SCOB_MATERIA.ID_TIPO_PROCEDIMIENTO;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE TIPO DE PROCEDIMIENTO CON : ID_TIPO_PROCEDIMIENTO => ' ||
                          REG_T_SCOB_MATERIA.ID_TIPO_PROCEDIMIENTO;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_TIPO_PROCEDIMIENTO - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT ORGA.*
        INTO REG_T_SCOB_ORGANO_RESOLUTIVO
        FROM USR_SICOB.T_SCOB_ORGANO_RESOLUTIVO ORGA
       WHERE ORGA.ID_ORGANO_RESOLUTIVO = REG_T_SCOB_MULTA_DETAL.ID_ORGANO_RESOLUTIVO;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE ORGANO RESOLUTIVO CON : ID_ORGANO_RESOLUTIVO => ' ||
                          REG_T_SCOB_MULTA_DETAL.ID_ORGANO_RESOLUTIVO;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_ORGANO_RESOLUTIVO - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT SEDE.*
        INTO REG_T_SCOB_SEDE
        FROM USR_SICOB.T_SCOB_SEDE SEDE
       WHERE SEDE.ID_SEDE = REG_T_SCOB_MULTA.ID_SEDE;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE SEDE CON : ID_SEDE => ' ||
                          REG_T_SCOB_MULTA.ID_SEDE;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_SEDE - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT SUBM.*
        INTO REG_T_SCOB_SUBMATERIA
        FROM USR_SICOB.T_SCOB_SUBMATERIA SUBM
       WHERE SUBM.ID_SUBMATERIA = REG_T_SCOB_MULTA.ID_SUB_MATERIA;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE SUBMATERIA CON : ID_SUBMATERIA => ' ||
                          REG_T_SCOB_MULTA.ID_SUB_MATERIA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_SUBMATERIA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
     SELECT T.TXT_DESCRIPCION INTO VV_DESCRIPCION_TIPO_MULTA
       FROM USR_SICOB.T_SCOB_TABLA_DET T
      WHERE T.ID_TABLA = 45
        AND T.COD_INTERNO = REG_T_SCOB_MULTA.FLG_TIPO_MULTA;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE TIPO DE MULTA CON : FLG_TIPO_MULTA => ' ||
                          REG_T_SCOB_MULTA.FLG_TIPO_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_TABLA_DET - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;          
    
    BEGIN
    
      SELECT OXM.*
        INTO REG_T_SCOB_ORG_RESOL_MATERIA
        FROM USR_SICOB.T_SCOB_ORG_RESOL_MATERIA OXM
        WHERE OXM.ID_ORGANO_RESOLUTIVO = REG_T_SCOB_MULTA_DETAL.ID_ORGANO_RESOLUTIVO 
              AND OXM.ID_MATERIA = REG_T_SCOB_MULTA.ID_MATERIA 
              AND OXM.ESTADO = '1';
        
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE ORGANO RESOLUTIVO DE LA MATERIA CON : ID_ORGANO_RESOLUTIVO => ' ||
                          REG_T_SCOB_MULTA_DETAL.ID_ORGANO_RESOLUTIVO;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_ORG_RESOL_MATERIA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;        
      
    VV_IDENTIFICADOR := REG_T_SCOB_MULTA.ANIO || REG_T_SCOB_MULTA.CUM;
    VV_ANIO := REG_T_SCOB_MULTA.ANIO;
    VV_ORIGEN := '1'; -- ORIGEN SICOB
    VD_FECHAREGISTRO := REG_T_SCOB_MULTA.FEC_INGRESO;
    VV_CODTIPOPROCEDIMIENTO := REG_T_SCOB_TIPO_PROCEDIMIENTO.CODIGO;
    VV_CODAREA := REG_T_SCOB_ORGANO_RESOLUTIVO.CODIGO;
    VV_CODSEDE := REG_T_SCOB_SEDE.CODIGO;
    VV_CODMATERIA := REG_T_SCOB_MATERIA.CODIGO;
    VV_CODSUBMATERIA := REG_T_SCOB_SUBMATERIA.CODIGO;
    VV_EXPEDIENTE := REG_T_SCOB_MULTA.NRO_EXP_ADMINISTRATIVO;
    VV_EXPEDIENTEANTERIOR := REG_T_SCOB_MULTA_DETAL.NRO_EXP_NIVEL;
    
    --TIPO_INSTANCIA DEL ÓRGANO RESOLUTIVO = 1
    IF REG_T_SCOB_ORGANO_RESOLUTIVO.TIPO_INSTANCIA = 1 THEN
      VV_ORPSRESOLNUMERO := REG_T_SCOB_MULTA_DETAL.NRO_RESOLUCION;
      VD_ORPSRESOLFECHAREGISTRO := TRUNC(REG_T_SCOB_MULTA_DETAL.AUDFECCREACION);
      VD_ORPSRESOLFECHAEMISION := REG_T_SCOB_MULTA_DETAL.FEC_RESOLUCION;
      VD_ORPSRESOLFECHANOTIFICACION := REG_T_SCOB_MULTA_DETAL.FEC_NOTIFICACION_RESOLUCION;
      VD_ORPSFECHAAPELACION := REG_T_SCOB_MULTA_DETAL.FEC_ESTADO_SGTE_INSTANCIA;
      VN_ORPSCANTIDADDIAS := REG_T_SCOB_MULTA_DETAL.NU_CANTIDAD_DIAS;
    END IF;
    
    VV_ORPSUSUARIO := SYSDATE;
    
    --TIPO_INSTANCIA DEL ÓRGANO RESOLUTIVO = 2
    IF REG_T_SCOB_ORGANO_RESOLUTIVO.TIPO_INSTANCIA = 2 THEN
      VV_COMRESOLNUMERO := REG_T_SCOB_MULTA_DETAL.NRO_RESOLUCION;
      VD_COMRESOLFECHAREGISTRO := TRUNC(REG_T_SCOB_MULTA_DETAL.AUDFECCREACION);
      VD_COMRESOLFECHAEMISION := REG_T_SCOB_MULTA_DETAL.FEC_RESOLUCION;
      VD_COMRESOLFECHANOTIFICACION := REG_T_SCOB_MULTA_DETAL.FEC_NOTIFICACION_RESOLUCION;
      VD_COMFECHAREVISION := REG_T_SCOB_MULTA_DETAL.FEC_ESTADO_SGTE_INSTANCIA;
      VV_COMUSUARIO := REG_T_SCOB_MULTA_DETAL.AUDUSUCREACION;
      VN_COMCANTIDADDIAS := REG_T_SCOB_MULTA_DETAL.NU_CANTIDAD_DIAS;
    END IF;
    
    --TIPO_INSTANCIA DEL ÓRGANO RESOLUTIVO = 3
    IF REG_T_SCOB_ORGANO_RESOLUTIVO.TIPO_INSTANCIA = 3 THEN
      VV_SALARESOLNUMERO := REG_T_SCOB_MULTA_DETAL.NRO_RESOLUCION;
      VD_SALARESOLFECHAREGISTRO := TRUNC(REG_T_SCOB_MULTA_DETAL.AUDFECCREACION);
      VD_SALARESOLFECHAEMISION := REG_T_SCOB_MULTA_DETAL.FEC_RESOLUCION;
      VD_SALARESOLFECHANOTIFICACION := REG_T_SCOB_MULTA_DETAL.FEC_NOTIFICACION_RESOLUCION;
      VV_SALAUSUARIO := REG_T_SCOB_MULTA_DETAL.AUDUSUCREACION;
      VN_SALACANTIDADDIAS := REG_T_SCOB_MULTA_DETAL.NU_CANTIDAD_DIAS;
    END IF;
    
    VV_TIPOMULTA := SUBSTR(VV_DESCRIPCION_TIPO_MULTA, 1, 1);
    IF NVL(REG_T_SCOB_MULTA_DETAL.POR_ASOCU, '0') = '0' THEN
      VV_ASOCUPORCFLAG := 'N';
    ELSE 
      VV_ASOCUPORCFLAG := 'S';
    END IF;
        
    VN_ASOCUPORC := NVL(REG_T_SCOB_MULTA_DETAL.POR_ASOCU, 0);
    VN_UITNRO := NVL(REG_T_SCOB_MULTA_DETAL.VALOR_UIT, 0);
    VN_UITMONTOCAPITAL := REG_T_SCOB_MULTA.MONTO_UIT;
    VN_INTERESES := REG_T_SCOB_MULTA.MONTO_INTERES;
    VN_MORA := REG_T_SCOB_MULTA.MONTO_INTERES_MORATORIO;
    VN_GASTOS := REG_T_SCOB_MULTA.MONTO_COSTAS;
    VN_AMORTIZADO := REG_T_SCOB_MULTA.TOTAL_AMORTIZADO;
    VN_AMORTIZADOINTERESES := REG_T_SCOB_MULTA.TOTAL_AMORTIZADO_IM;
    VN_AMORTIZADOMORA := REG_T_SCOB_MULTA.TOTAL_AMORTIZADO_IC;
    VN_AMORTIZADOGASTOS := REG_T_SCOB_MULTA.TOTAL_AMORTIZADO_COSTAS;
    VN_SALDO := REG_T_SCOB_MULTA.SALDO;
    VN_SALDOINTERESES := REG_T_SCOB_MULTA.SALDO_IC;
    VN_SALDOMORA := REG_T_SCOB_MULTA.SALDO_IM;
    VN_SALDOGASTOS := REG_T_SCOB_MULTA.SALDO_COSTAS;
    VV_ESTADOMULTA := REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
    
    IF REG_T_SCOB_MULTA.COD_ESTADO_PAGO = '4' THEN
      VN_DESCUENTOMULTA := REG_T_SCOB_MULTA.PORCENTAJE_DESCUENTO;
    ELSE 
      VN_DESCUENTOMULTA := NULL;
    END IF;
    
    VD_SECFECHAREGISTRO := REG_T_SCOB_MULTA.FEC_GENERACION_SEC;
    VV_FILEANIO := REG_T_SCOB_MULTA.ANIO_FILE_AEC;
    VD_FILEFECHARECEPCION := REG_T_SCOB_MULTA.FEC_INGRESO_AEC;   
    VV_ESTADOMULTACOBRANZA := REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
    VD_FECHAOBSERVACION := REG_T_SCOB_MULTA.FEC_ULT_IMPROCEDENCIA;
    VD_FECHAULTIMOINGRESO := REG_T_SCOB_MULTA.FEC_INGRESO_FILE;
    VD_FECHAASIGNACION := REG_T_SCOB_MULTA.FECHA_ASIG_COBRANZA;
    VD_FECHACARTA := REG_T_SCOB_MULTA.FEC_ULT_GEN_PRECOACTIVA;
    VD_RECFECHAEMISION := REG_T_SCOB_MULTA.FEC_EMISION_REC;
    VD_RECFECHANOTIFICACION := REG_T_SCOB_MULTA.FEC_NOTIF_REC;
    VD_FECHARIESGO := SYSDATE;
    VV_ESTADOPAGO := REG_T_SCOB_MULTA.FLG_TIPO_MULTA;
    VV_CODAREADESCRIPCION := REG_T_SCOB_ORGANO_RESOLUTIVO.DESCRIPCION;
    IF REG_T_SCOB_MULTA.COD_MOTIVO = 0 THEN
      VV_EMBARGOFLAG := NULL;
    ELSE 
      VV_EMBARGOFLAG := REG_T_SCOB_MULTA.COD_MOTIVO;
    END IF;
    VV_CODCENTROCOSTO := REG_T_SCOB_ORG_RESOL_MATERIA.VC_SIA_CC_COD;
    
    -- SE SACA EL ESTADO DE LA MULTA DEL SIA 
    SELECT ESTADOMULTA INTO VV_ESTADOMULTA_SIA
      FROM SGCORESYS.CO_MULTA
      WHERE IDENTIFICADOR = VV_IDENTIFICADOR;
    
    -- SE ACTUALIZA LA MULTA
    UPDATE SGCORESYS.CO_MULTA SET 
      ANIO = VV_ANIO,
      ORIGEN = VV_ORIGEN,
      FECHAREGISTRO = VD_FECHAREGISTRO,
      CODTIPOPROCEDIMIENTO = VV_CODTIPOPROCEDIMIENTO,
      CODAREA = VV_CODAREA,
      CODSEDE = VV_CODSEDE,
      CODMATERIA = VV_CODMATERIA,
      CODSUBMATERIA = VV_CODSUBMATERIA,
      EXPEDIENTE = VV_EXPEDIENTE,
      EXPEDIENTEANTERIOR = VV_EXPEDIENTEANTERIOR,
      ORPSRESOLNUMERO = VV_ORPSRESOLNUMERO,
      ORPSRESOLFECHAREGISTRO = VD_ORPSRESOLFECHAREGISTRO,
      ORPSRESOLFECHAEMISION = VD_ORPSRESOLFECHAEMISION,
      ORPSRESOLFECHANOTIFICACION = VD_ORPSRESOLFECHANOTIFICACION,
      ORPSFECHAAPELACION = VD_ORPSFECHAAPELACION,
      ORPSUSUARIO = VV_ORPSUSUARIO,
      ORPSCANTIDADDIAS = VN_ORPSCANTIDADDIAS,
      COMRESOLNUMERO = VV_COMRESOLNUMERO,
      COMRESOLFECHAREGISTRO = VD_COMRESOLFECHAREGISTRO,
      COMRESOLFECHAEMISION = VD_COMRESOLFECHAEMISION,
      COMRESOLFECHANOTIFICACION = VD_COMRESOLFECHANOTIFICACION,
      COMFECHAREVISION = VD_COMFECHAREVISION,
      COMUSUARIO = VV_COMUSUARIO,
      COMCANTIDADDIAS = VN_COMCANTIDADDIAS,
      SALARESOLNUMERO = VV_SALARESOLNUMERO,
      SALARESOLFECHAREGISTRO = VD_SALARESOLFECHAREGISTRO,
      SALARESOLFECHAEMISION = VD_SALARESOLFECHAEMISION,
      SALARESOLFECHANOTIFICACION = VD_SALARESOLFECHANOTIFICACION,
      SALAUSUARIO = VV_SALAUSUARIO,
      SALACANTIDADDIAS = VN_SALACANTIDADDIAS,
      TIPOMULTA = VV_TIPOMULTA,
      ASOCUPORCFLAG = VV_ASOCUPORCFLAG,
      ASOCUPORC = VN_ASOCUPORC,
      UITNRO = VN_UITNRO,
      UITMONTOCAPITAL = VN_UITMONTOCAPITAL,
      INTERESES = VN_INTERESES,
      MORA = VN_MORA,
      GASTOS = VN_GASTOS,
      AMORTIZADO = VN_AMORTIZADO,
      AMORTIZADOINTERESES = VN_AMORTIZADOINTERESES,
      AMORTIZADOMORA = VN_AMORTIZADOMORA,
      AMORTIZADOGASTOS = VN_AMORTIZADOGASTOS,
      SALDO = VN_SALDO,
      SALDOINTERESES = VN_SALDOINTERESES,
      SALDOMORA = VN_SALDOMORA,
      SALDOGASTOS = VN_SALDOGASTOS,
      ESTADOMULTA = VV_ESTADOMULTA,
      DESCUENTOMULTA = VN_DESCUENTOMULTA,
      SECFECHAREGISTRO = VD_SECFECHAREGISTRO,
      FILEANIO = VV_FILEANIO,
      FILEFECHARECEPCION = VD_FILEFECHARECEPCION,
      ESTADOMULTACOBRANZA = VV_ESTADOMULTACOBRANZA,
      FECHAOBSERVACION = VD_FECHAOBSERVACION,
      FECHAULTIMOINGRESO = VD_FECHAULTIMOINGRESO,
      FECHAASIGNACION = VD_FECHAASIGNACION,
      FECHACARTA = VD_FECHACARTA,
      RECFECHAEMISION = VD_RECFECHAEMISION,
      RECFECHANOTIFICACION = VD_RECFECHANOTIFICACION,
      EMBARGOFLAG = VV_EMBARGOFLAG,
      FECHARIESGO = VD_FECHARIESGO,
      ESTADOPAGO = VV_ESTADOPAGO,
      CODAREADESCRIPCION = VV_CODAREADESCRIPCION,
      CODCENTROCOSTO = VV_CODCENTROCOSTO
    WHERE   
    IDENTIFICADOR = VV_IDENTIFICADOR;               
      
    SELECT MAX(SECUENCIA) INTO VN_SECUENCIA_ACTUAL
          FROM SGCORESYS.CO_MULTAESTADO
          WHERE IDENTIFICADOR = VV_IDENTIFICADOR;    
    
    --EN CASO EL ESTADO CAMBIA SE HACE UN NUEVO REGISTRO EN ESTADO_MULTA
    IF VV_ESTADOMULTA_SIA <> VV_ESTADOMULTA THEN             
      
        VV_ME_IDENTIFICADOR := REG_T_SCOB_MULTA.ANIO || REG_T_SCOB_MULTA.CUM;
        VN_ME_SECUENCIA := VN_SECUENCIA_ACTUAL + 1;
        VV_ME_ESTADOMULTA := REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
        VV_ME_ESTADOPAGO := REG_T_SCOB_MULTA.FLG_TIPO_MULTA;
        VV_ME_ESTADOCOBRANZA := REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
        VN_ME_CAPITAL := REG_T_SCOB_MULTA.MONTO_UIT;
        VN_ME_INTERESES := REG_T_SCOB_MULTA.MONTO_INTERES;
        VN_ME_MORA := REG_T_SCOB_MULTA.MONTO_INTERES_MORATORIO;
        VN_ME_GASTOS := REG_T_SCOB_MULTA.MONTO_COSTAS;
        VN_ME_CAPITAL_ANT := REG_T_SCOB_MULTA.MONTO_UIT;
        VN_ME_INTERESES_ANT := REG_T_SCOB_MULTA.MONTO_INTERES;
        VN_ME_MORA_ANT := REG_T_SCOB_MULTA.MONTO_INTERES_MORATORIO;
        VN_ME_GASTOS_ANT := REG_T_SCOB_MULTA.MONTO_COSTAS;
        VD_ME_FECHA := SYSDATE;
        VV_ME_CONTABILIZACIONPENDIENTEFLAG := 'S';
        VV_ME_PERIODO := TO_CHAR(SYSDATE, 'YYYYMM');
        VV_ME_VOUCHER := NULL;
        VV_ME_ULTIMOUSUARIO := 'SIA';
        VD_ME_ULTIMAFECHAMODIF := SYSDATE;
        VV_ME_CODIGOMULTA := NULL;
        VV_ME_ORCONCILIACIONESTADO := NULL;
        VD_ME_ORCONCILIACIONFECHA := NULL;
        VV_ME_CODAREA := REG_T_SCOB_ORGANO_RESOLUTIVO.CODIGO;
        VN_ME_UITNRO := NVL(REG_T_SCOB_MULTA_DETAL.VALOR_UIT, 0);
        VN_ME_SALDOCAPITAL := REG_T_SCOB_MULTA.SALDO;
        VN_ME_SALDOINTERES := REG_T_SCOB_MULTA.SALDO_IC;
        VN_ME_SALDOMORA := REG_T_SCOB_MULTA.SALDO_IM;
        VN_ME_SALDOGASTOS := REG_T_SCOB_MULTA.SALDO_COSTAS;
        VV_ME_CUENTAPROVISION := NULL;
        
        INSERT INTO SGCORESYS.CO_MULTAESTADO(
        IDENTIFICADOR,
        SECUENCIA,
        ESTADOMULTA,
        ESTADOPAGO,
        ESTADOCOBRANZA,
        ESTADOEXPEDIENTE,
        CAPITAL,
        INTERESES,
        MORA,
        GASTOS,
        CAPITAL_ANT,
        INTERESES_ANT,
        MORA_ANT,
        GASTOS_ANT,
        CODIGOMOTIVOEXPEDIENTE,
        FECHA,
        CONTABILIZACIONPENDIENTEFLAG,
        PERIODO,
        VOUCHER,
        ULTIMOUSUARIO,
        ULTIMAFECHAMODIF,
        CODIGOMULTA,
        ORCONCILIACIONESTADO,
        ORCONCILIACIONFECHA,
        CODAREA,
        UITNRO,
        SALDOCAPITAL,
        SALDOINTERES,
        SALDOMORA,
        SALDOGASTOS,
        CUENTAPROVISION)
        VALUES(
        VV_ME_IDENTIFICADOR,
        VN_ME_SECUENCIA,
        VV_ME_ESTADOMULTA,
        VV_ME_ESTADOPAGO,
        VV_ME_ESTADOCOBRANZA,
        VV_ME_ESTADOEXPEDIENTE,
        VN_ME_CAPITAL,
        VN_ME_INTERESES,
        VN_ME_MORA,
        VN_ME_GASTOS,
        VN_ME_CAPITAL_ANT,
        VN_ME_INTERESES_ANT,
        VN_ME_MORA_ANT,
        VN_ME_GASTOS_ANT,
        VV_ME_CODIGOMOTIVOEXPEDIENTE,
        VD_ME_FECHA,
        VV_ME_CONTABILIZACIONPENDIENTEFLAG,
        VV_ME_PERIODO,
        VV_ME_VOUCHER,
        VV_ME_ULTIMOUSUARIO,
        VD_ME_ULTIMAFECHAMODIF,
        VV_ME_CODIGOMULTA,
        VV_ME_ORCONCILIACIONESTADO,
        VD_ME_ORCONCILIACIONFECHA,
        VV_ME_CODAREA,
        VN_ME_UITNRO,
        VN_ME_SALDOCAPITAL,
        VN_ME_SALDOINTERES,
        VN_ME_SALDOMORA,
        VN_ME_SALDOGASTOS,
        VV_ME_CUENTAPROVISION);     
    
    ELSE
      
      --EN CASO EL ESTADO NO CAMBIA SE HACE UN UPDATE A MULTA_ESTADO
      VV_ME_IDENTIFICADOR := REG_T_SCOB_MULTA.ANIO || REG_T_SCOB_MULTA.CUM;
      VN_ME_SECUENCIA := VN_SECUENCIA_ACTUAL;
      VV_ME_ESTADOMULTA := REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
      VV_ME_ESTADOPAGO := REG_T_SCOB_MULTA.FLG_TIPO_MULTA;
      VV_ME_ESTADOCOBRANZA := REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
      VN_ME_CAPITAL := REG_T_SCOB_MULTA.MONTO_UIT;
      VN_ME_INTERESES := REG_T_SCOB_MULTA.MONTO_INTERES;
      VN_ME_MORA := REG_T_SCOB_MULTA.MONTO_INTERES_MORATORIO;
      VN_ME_GASTOS := REG_T_SCOB_MULTA.MONTO_COSTAS;
      VN_ME_CAPITAL_ANT := REG_T_SCOB_MULTA.MONTO_UIT;
      VN_ME_INTERESES_ANT := REG_T_SCOB_MULTA.MONTO_INTERES;
      VN_ME_MORA_ANT := REG_T_SCOB_MULTA.MONTO_INTERES_MORATORIO;
      VN_ME_GASTOS_ANT := REG_T_SCOB_MULTA.MONTO_COSTAS;
      VV_ME_ULTIMOUSUARIO := 'SIA';
      VD_ME_ULTIMAFECHAMODIF := SYSDATE;
      VV_ME_CODAREA := REG_T_SCOB_ORGANO_RESOLUTIVO.CODIGO;
      VN_ME_UITNRO := NVL(REG_T_SCOB_MULTA_DETAL.VALOR_UIT, 0);
      VN_ME_SALDOCAPITAL := REG_T_SCOB_MULTA.SALDO;
      VN_ME_SALDOINTERES := REG_T_SCOB_MULTA.SALDO_IC;
      VN_ME_SALDOMORA := REG_T_SCOB_MULTA.SALDO_IM;
      VN_ME_SALDOGASTOS := REG_T_SCOB_MULTA.SALDO_COSTAS;
      
      UPDATE SGCORESYS.CO_MULTAESTADO SET 
        ESTADOMULTA = VV_ME_ESTADOMULTA,
        ESTADOPAGO = VV_ME_ESTADOPAGO,
        ESTADOCOBRANZA = VV_ME_ESTADOCOBRANZA,
        ESTADOEXPEDIENTE = VV_ME_ESTADOEXPEDIENTE,
        CAPITAL = VN_ME_CAPITAL,
        INTERESES = VN_ME_INTERESES,
        MORA = VN_ME_MORA,
        GASTOS = VN_ME_GASTOS,
        CAPITAL_ANT = VN_ME_CAPITAL_ANT,
        INTERESES_ANT = VN_ME_INTERESES_ANT,
        MORA_ANT = VN_ME_MORA_ANT,
        GASTOS_ANT = VN_ME_GASTOS_ANT,
        CODIGOMOTIVOEXPEDIENTE = VV_ME_CODIGOMOTIVOEXPEDIENTE,
        ULTIMOUSUARIO = VV_ME_ULTIMOUSUARIO,
        ULTIMAFECHAMODIF = VD_ME_ULTIMAFECHAMODIF,
        CODAREA = VV_ME_CODAREA,
        UITNRO = VN_ME_UITNRO,
        SALDOCAPITAL = VN_ME_SALDOCAPITAL,
        SALDOINTERES = VN_ME_SALDOINTERES,
        SALDOMORA = VN_ME_SALDOMORA,
        SALDOGASTOS = VN_ME_SALDOGASTOS
      WHERE 
      IDENTIFICADOR = VV_ME_IDENTIFICADOR
      AND SECUENCIA = VN_ME_SECUENCIA;       
    
    END IF;
    
    --REGISTRAR PERSONAS EN CASO SE AÑADAN
    SP_REGISTRO_PERSONA_SICOB_A_SIA(PIN_ID_MULTA,
                                    VV_IDENTIFICADOR,
                                    PON_COD_RESULT,
                                    POV_MSG_RESULT);
                                    
                                    
    IF PON_COD_RESULT <> 0 THEN
       RAISE EX_CONTROLADO;
    END IF;
    
    COMMIT;
    
    PON_COD_RESULT := 0;
    POV_MSG_RESULT := 'CONFORME';
  
  EXCEPTION
    WHEN EX_CONTROLADO THEN
      PON_COD_RESULT := -1;
    WHEN OTHERS THEN
      PON_COD_RESULT := -1;
      POV_MSG_RESULT := 'ERROR NO CONTROLADO : SP_REGISTRO_MULTA_SICOB_A_SIA - ERROR : ' ||
                        SQLERRM;
  END SP_ACTUALIZA_MULTA_SICOB_A_SIA;
  
  PROCEDURE SP_REGISTRO_PERSONA_SICOB_A_SIA(PIN_ID_MULTA                IN NUMBER,                            
                                            PIV_IDENTIFICADOR           IN VARCHAR2,
                                            PON_COD_RESULT              OUT NUMBER,
                                            POV_MSG_RESULT              OUT VARCHAR2) IS
  
    REG_T_SCOB_PERSONA            USR_SICOB.T_SCOB_PERSONA%ROWTYPE;
    VN_NUM_PERSONA_SANCIONADO     NUMBER;
    VN_NUM_PERSONA_DENUNCIANTE    NUMBER;
    VV_TDOC_PERSONA               VARCHAR(10);
    VV_DOC_DENUNCIANTE            VARCHAR2(50);
    VV_DOC_SANCIONADO             VARCHAR2(50);
    VV_DESCRIPCION_TIPO_DOCUMENTO VARCHAR2(100);
    VV_SANCIONADONOMBRE           SGCORESYS.CO_MULTA.DENUNCIANTENOMBRE%TYPE;
    VV_DENUNCIANTENOMBRE          SGCORESYS.CO_MULTA.DENUNCIANTENOMBRE%TYPE;
  
    CURSOR CURSOR_DENUNCIANTES(P_ID_MULTA NUMBER) IS
      SELECT DISTINCT PERS.*
        FROM USR_SICOB.T_SCOB_MULTA_DETAL MDET
       INNER JOIN USR_SICOB.T_SCOB_MULTA_DENUNCIANTE MDEN
          ON (MDEN.ID_MULTA_DETAL = MDET.ID_MULTA_DETAL AND
             MDEN.ESTADO = '1')
       INNER JOIN USR_SICOB.T_SCOB_PERSONA PERS
          ON (PERS.ID_PERSONA = MDEN.ID_PERSONA)
       INNER JOIN USR_SICOB.T_SCOB_MULTA MULT
          ON (MULT.ID_MULTA = MDET.ID_MULTA)
       WHERE MDET.FLG_ACTUAL = '1'
         AND MDET.ID_MULTA = P_ID_MULTA;
  
    CURSOR CURSOR_SANCIONADOS(P_ID_MULTA NUMBER) IS
      SELECT DISTINCT PERS.*
        FROM USR_SICOB.T_SCOB_MULTA_DETAL MDET
       INNER JOIN USR_SICOB.T_SCOB_MULTA_SANCIONADO MSAN
          ON MSAN.ID_MULTA_DETAL = MDET.ID_MULTA_DETAL
         AND MSAN.ESTADO = '1'
         AND NVL(MSAN.COD_TIPO_PERSONA, '1') = '1'
       INNER JOIN USR_SICOB.T_SCOB_PERSONA PERS
          ON PERS.ID_PERSONA = MSAN.ID_PERSONA
       INNER JOIN USR_SICOB.T_SCOB_MULTA MULT
          ON (MULT.ID_MULTA = MDET.ID_MULTA)
       WHERE MDET.FLG_ACTUAL = '1'
         AND MDET.ID_MULTA = P_ID_MULTA;
  
  BEGIN
  
  OPEN CURSOR_DENUNCIANTES(PIN_ID_MULTA);
      
      LOOP 
          
        FETCH CURSOR_DENUNCIANTES INTO REG_T_SCOB_PERSONA;
           
        EXIT WHEN CURSOR_DENUNCIANTES%NOTFOUND;      
                
        IF REG_T_SCOB_PERSONA.TIPO_PERSONA = 2 THEN
           VV_DENUNCIANTENOMBRE := REG_T_SCOB_PERSONA.RAZON_SOCIAL;
        ELSE
           VV_DENUNCIANTENOMBRE := REG_T_SCOB_PERSONA.APE_PATERNO || ' ' || REG_T_SCOB_PERSONA.APE_MATERNO || ' ' || REG_T_SCOB_PERSONA.PRI_NOMBRE || ' ' ||
                                       REG_T_SCOB_PERSONA.SEG_NOMBRE || ' ' || REG_T_SCOB_PERSONA.APE_CASADA;
        END IF;
          
        IF REG_T_SCOB_PERSONA.NRO_DOC IS NOT NULL THEN
            
            SELECT TRIM(DECODE(INSTR(REG_T_SCOB_PERSONA.NRO_DOC, '/'), 0, REG_T_SCOB_PERSONA.NRO_DOC, SUBSTR(REG_T_SCOB_PERSONA.NRO_DOC, 1, INSTR(REG_T_SCOB_PERSONA.NRO_DOC, '/') - 1)))
            INTO VV_DOC_DENUNCIANTE
            FROM DUAL;
            
            -- VERIFICACION EN EMPLEADO
            SELECT MAX(PERS.PERSONA) INTO VN_NUM_PERSONA_DENUNCIANTE 
              FROM SGCORESYS.PERSONAMAST PERS
              LEFT JOIN SGCORESYS.EMPLEADOMAST EMPL 
                ON (PERS.PERSONA = EMPL.EMPLEADO)
              WHERE (PERS.DOCUMENTO = VV_DOC_DENUNCIANTE 
                OR PERS.DOCUMENTOFISCAL = VV_DOC_DENUNCIANTE
                OR PERS.DOCUMENTOIDENTIDAD = VV_DOC_DENUNCIANTE);

            IF NVL(VN_NUM_PERSONA_DENUNCIANTE, 0) = 0 THEN
                -- VERIFICACION CON OTROS
                SELECT MAX(PERS.PERSONA) INTO VN_NUM_PERSONA_DENUNCIANTE 
                   FROM SGCORESYS.PERSONAMAST PERS
                   WHERE PERS.ESTADO = 'A' 
                     AND (PERS.DOCUMENTO = VV_DOC_DENUNCIANTE 
                     OR PERS.DOCUMENTOFISCAL = VV_DOC_DENUNCIANTE
                     OR PERS.DOCUMENTOIDENTIDAD = VV_DOC_DENUNCIANTE);
            END IF;
            
            IF LENGTH(TRIM(VV_DOC_DENUNCIANTE)) = 11 THEN
              VV_TDOC_PERSONA :='R';
            ELSIF LENGTH(TRIM(VV_DOC_DENUNCIANTE)) = 8 THEN
              VV_TDOC_PERSONA := 'D';
            ELSE
              VV_TDOC_PERSONA :='O';
            END IF;
            
            dbms_output.put_line('VN_NUM_PERSONA_DENUNCIANTE ==> ' || VN_NUM_PERSONA_DENUNCIANTE);
            
            IF NVL(VN_NUM_PERSONA_DENUNCIANTE, 0) = 0 THEN             
              
              dbms_output.put_line('VV_DENUNCIANTENOMBRE ==> ' || VV_DENUNCIANTENOMBRE);
              dbms_output.put_line('VV_TDOC_PERSONA ==> ' || VV_TDOC_PERSONA);
              dbms_output.put_line('VV_DOC_DENUNCIANTE ==> ' || VV_DOC_DENUNCIANTE);
              USR_SIA_INTFZ.PKG_INTFZ_MULTAS_SIA.SIA_S_GENERA_PERSONA(PIN_CH_CLIENTENOMBRE    => VV_DENUNCIANTENOMBRE,
                                                        PIN_CH_TIPODOCUMENTO    => VV_TDOC_PERSONA,
                                                        PIN_CH_CLIENTEDOCUMENTO => VV_DOC_DENUNCIANTE,
                                                        PIN_CH_ULTIMOUSUARIO    => 'INTERFAZ',
                                                        POUT_NU_PERSONA         => VN_NUM_PERSONA_DENUNCIANTE);
                                                        
                                                        
              dbms_output.put_line('VN_NUM_PERSONA_DENUNCIANTE ==> ' || VN_NUM_PERSONA_DENUNCIANTE);
             END IF;
         
        
         UPDATE SGCORESYS.CO_MULTA SET
           DENUNCIANTE = VN_NUM_PERSONA_DENUNCIANTE,
           DENUNCIANTENOMBRE = VV_DENUNCIANTENOMBRE
         WHERE IDENTIFICADOR = PIV_IDENTIFICADOR;                                                               
           
         END IF ;
                                       
         EXIT WHEN TRUE;                                 
           
      END LOOP;
        
    CLOSE CURSOR_DENUNCIANTES;
    
    OPEN CURSOR_SANCIONADOS(PIN_ID_MULTA);
      
      LOOP 
          
        FETCH CURSOR_SANCIONADOS INTO REG_T_SCOB_PERSONA;
           
        EXIT WHEN CURSOR_SANCIONADOS%NOTFOUND;                              
        
        SELECT TRIM(DECODE(INSTR(REG_T_SCOB_PERSONA.NRO_DOC, '/'), 0, REG_T_SCOB_PERSONA.NRO_DOC, SUBSTR(REG_T_SCOB_PERSONA.NRO_DOC, 1, INSTR(REG_T_SCOB_PERSONA.NRO_DOC, '/') - 1)))
        INTO VV_DOC_SANCIONADO
        FROM DUAL;
        
        SELECT TDE.TXT_DESCRIPCION INTO VV_DESCRIPCION_TIPO_DOCUMENTO
               FROM USR_SICOB.T_SCOB_TABLA_DET TDE 
               WHERE TDE.ID_TABLA = 10 AND TDE.COD_INTERNO = REG_T_SCOB_PERSONA.TIPO_DOC;
        
        SELECT SUBSTR(TRIM(DECODE(INSTR(VV_DESCRIPCION_TIPO_DOCUMENTO, '/'), 0, VV_DESCRIPCION_TIPO_DOCUMENTO, SUBSTR(VV_DESCRIPCION_TIPO_DOCUMENTO, 1, INSTR(VV_DESCRIPCION_TIPO_DOCUMENTO, '/') - 1))),1,1)
        INTO VV_TDOC_PERSONA
        FROM DUAL;
        
        IF VV_TDOC_PERSONA<>'D' AND VV_TDOC_PERSONA<>'R' THEN
           VV_TDOC_PERSONA :='O';
        END IF;
        
        IF VV_DOC_SANCIONADO IS NOT NULL THEN
           
            -- VERIFICACION EN EMPLEADO
            SELECT MAX(PERS.PERSONA) INTO VN_NUM_PERSONA_SANCIONADO 
              FROM SGCORESYS.PERSONAMAST PERS
              LEFT JOIN SGCORESYS.EMPLEADOMAST EMPL 
                ON (PERS.PERSONA = EMPL.EMPLEADO)
              WHERE (PERS.DOCUMENTO = VV_DOC_SANCIONADO 
                OR PERS.DOCUMENTOFISCAL = VV_DOC_SANCIONADO 
                OR PERS.DOCUMENTOIDENTIDAD = VV_DOC_SANCIONADO);

            IF NVL(VN_NUM_PERSONA_SANCIONADO, 0) = 0 THEN
                -- VERIFICACION CON OTROS
                SELECT MAX(PERS.PERSONA) INTO VN_NUM_PERSONA_SANCIONADO 
                   FROM SGCORESYS.PERSONAMAST PERS
                   WHERE PERS.ESTADO = 'A' 
                     AND (PERS.DOCUMENTO = VV_DOC_SANCIONADO 
                     OR PERS.DOCUMENTOFISCAL = VV_DOC_SANCIONADO 
                     OR PERS.DOCUMENTOIDENTIDAD = VV_DOC_SANCIONADO);
            END IF;

            IF NVL(VN_NUM_PERSONA_SANCIONADO, 0) = 0 THEN
               
                IF REG_T_SCOB_PERSONA.TIPO_PERSONA = 2 THEN
                   VV_SANCIONADONOMBRE := REG_T_SCOB_PERSONA.RAZON_SOCIAL;
                ELSE
                   VV_SANCIONADONOMBRE := REG_T_SCOB_PERSONA.APE_PATERNO || ' ' || REG_T_SCOB_PERSONA.APE_MATERNO || ' ' || REG_T_SCOB_PERSONA.PRI_NOMBRE || ' ' ||
                                               REG_T_SCOB_PERSONA.SEG_NOMBRE || ' ' || REG_T_SCOB_PERSONA.APE_CASADA;
                END IF;
        
                USR_SIA_INTFZ.PKG_INTFZ_MULTAS_SIA.SIA_S_GENERA_PERSONA(PIN_CH_CLIENTENOMBRE    => VV_SANCIONADONOMBRE,
                                                          PIN_CH_TIPODOCUMENTO    => VV_TDOC_PERSONA,
                                                          PIN_CH_CLIENTEDOCUMENTO => VV_DOC_SANCIONADO,
                                                          PIN_CH_ULTIMOUSUARIO    => 'INTERFAZ',
                                                          POUT_NU_PERSONA         => VN_NUM_PERSONA_SANCIONADO);
                
             END IF;
             
             UPDATE SGCORESYS.CO_MULTA SET
               SANCIONADO = VN_NUM_PERSONA_SANCIONADO
             WHERE IDENTIFICADOR = PIV_IDENTIFICADOR;      
             
         END IF ;
         
         EXIT WHEN TRUE;
         
      END LOOP;
        
    CLOSE CURSOR_SANCIONADOS;
    
    PON_COD_RESULT := 0;
    POV_MSG_RESULT := 'CONFORME';
  
  EXCEPTION
    WHEN EX_CONTROLADO THEN
      PON_COD_RESULT := -1;
    WHEN OTHERS THEN
      PON_COD_RESULT := -1;
      POV_MSG_RESULT := 'ERROR NO CONTROLADO : SP_REGISTRO_PERSONA_SICOB_A_SIA - ERROR : ' || SQLERRM;
                        
  END SP_REGISTRO_PERSONA_SICOB_A_SIA;

  PROCEDURE SP_RECEPCION_MULTA_SICOB_A_SIA(PIN_ID_MULTA   IN NUMBER,
                                          PON_COD_RESULT OUT NUMBER,
                                          POV_MSG_RESULT OUT VARCHAR2) IS
  
    REG_T_SCOB_MULTA                 USR_SICOB.T_SCOB_MULTA%ROWTYPE;
    REG_T_SCOB_MULTA_DETAL           USR_SICOB.T_SCOB_MULTA_DETAL%ROWTYPE;    
    REG_T_SCOB_ORGANO_RESOLUTIVO     USR_SICOB.T_SCOB_ORGANO_RESOLUTIVO%ROWTYPE;   
    REG_T_SCOB_AREA_COBRANZA         USR_SICOB.T_SCOB_AREA_COBRANZA%ROWTYPE;
    REG_T_SCOB_MULTA_COBRANZA        USR_SICOB.T_SCOB_MULTA_COBRANZA%ROWTYPE;
    
    VV_IDENTIFICADOR                 SGCORESYS.CO_MULTA.IDENTIFICADOR%TYPE;
    VV_ESTADOMULTA                   SGCORESYS.CO_MULTA.ESTADOMULTA%TYPE;   
    VV_FILEANIO                      SGCORESYS.CO_MULTA.FILEANIO%TYPE;
    VD_FILEFECHARECEPCION            SGCORESYS.CO_MULTA.FILEFECHARECEPCION%TYPE;    
    VV_ESTADOMULTACOBRANZA           SGCORESYS.CO_MULTA.ESTADOMULTACOBRANZA%TYPE;       
    VD_FECHAULTIMOINGRESO            SGCORESYS.CO_MULTA.FECHAULTIMOINGRESO%TYPE;        
    VV_EMBARGOFLAG                   SGCORESYS.CO_MULTA.EMBARGOFLAG%TYPE;       
    VV_FILENUMERO                    SGCORESYS.CO_MULTA.FILENUMERO%TYPE;
    VV_NUMEROINGRESO                 SGCORESYS.CO_MULTA.NUMEROINGRESO%TYPE;
    VV_UBICACIONFISICA               SGCORESYS.CO_MULTA.UBICACIONFISICA%TYPE;
    
    VV_ME_IDENTIFICADOR                 SGCORESYS.CO_MULTAESTADO.IDENTIFICADOR%TYPE;
    VN_ME_SECUENCIA                     SGCORESYS.CO_MULTAESTADO.SECUENCIA%TYPE;
    VV_ME_ESTADOMULTA                   SGCORESYS.CO_MULTAESTADO.ESTADOMULTA%TYPE;
    VV_ME_ESTADOPAGO                    SGCORESYS.CO_MULTAESTADO.ESTADOPAGO%TYPE;
    VV_ME_ESTADOCOBRANZA                SGCORESYS.CO_MULTAESTADO.ESTADOCOBRANZA%TYPE;
    VV_ME_ESTADOEXPEDIENTE              SGCORESYS.CO_MULTAESTADO.ESTADOEXPEDIENTE%TYPE;
    VN_ME_CAPITAL                       SGCORESYS.CO_MULTAESTADO.CAPITAL%TYPE;
    VN_ME_INTERESES                     SGCORESYS.CO_MULTAESTADO.INTERESES%TYPE;
    VN_ME_MORA                          SGCORESYS.CO_MULTAESTADO.MORA%TYPE;
    VN_ME_GASTOS                        SGCORESYS.CO_MULTAESTADO.GASTOS%TYPE;
    VN_ME_CAPITAL_ANT                   SGCORESYS.CO_MULTAESTADO.CAPITAL_ANT%TYPE;
    VN_ME_INTERESES_ANT                 SGCORESYS.CO_MULTAESTADO.INTERESES_ANT%TYPE;
    VN_ME_MORA_ANT                      SGCORESYS.CO_MULTAESTADO.MORA_ANT%TYPE;
    VN_ME_GASTOS_ANT                    SGCORESYS.CO_MULTAESTADO.GASTOS_ANT%TYPE;
    VV_ME_CODIGOMOTIVOEXPEDIENTE        SGCORESYS.CO_MULTAESTADO.CODIGOMOTIVOEXPEDIENTE%TYPE;
    VD_ME_FECHA                         SGCORESYS.CO_MULTAESTADO.FECHA%TYPE;
    VV_ME_CONTABILIZACIONPENDIENTEFLAG  SGCORESYS.CO_MULTAESTADO.CONTABILIZACIONPENDIENTEFLAG%TYPE;
    VV_ME_PERIODO                       SGCORESYS.CO_MULTAESTADO.PERIODO%TYPE;
    VV_ME_VOUCHER                       SGCORESYS.CO_MULTAESTADO.VOUCHER%TYPE;
    VV_ME_ULTIMOUSUARIO                 SGCORESYS.CO_MULTAESTADO.ULTIMOUSUARIO%TYPE;
    VD_ME_ULTIMAFECHAMODIF              SGCORESYS.CO_MULTAESTADO.ULTIMAFECHAMODIF%TYPE;
    VV_ME_CODIGOMULTA                   SGCORESYS.CO_MULTAESTADO.CODIGOMULTA%TYPE;
    VV_ME_ORCONCILIACIONESTADO          SGCORESYS.CO_MULTAESTADO.ORCONCILIACIONESTADO%TYPE;
    VD_ME_ORCONCILIACIONFECHA           SGCORESYS.CO_MULTAESTADO.ORCONCILIACIONFECHA%TYPE;
    VV_ME_CODAREA                       SGCORESYS.CO_MULTAESTADO.CODAREA%TYPE;
    VN_ME_UITNRO                        SGCORESYS.CO_MULTAESTADO.UITNRO%TYPE;
    VN_ME_SALDOCAPITAL                  SGCORESYS.CO_MULTAESTADO.SALDOCAPITAL%TYPE;
    VN_ME_SALDOINTERES                  SGCORESYS.CO_MULTAESTADO.SALDOINTERES%TYPE;
    VN_ME_SALDOMORA                     SGCORESYS.CO_MULTAESTADO.SALDOMORA%TYPE;
    VN_ME_SALDOGASTOS                   SGCORESYS.CO_MULTAESTADO.SALDOGASTOS%TYPE;
    VV_ME_CUENTAPROVISION               SGCORESYS.CO_MULTAESTADO.CUENTAPROVISION%TYPE;
    
    VV_ESTADOMULTA_SIA                  SGCORESYS.CO_MULTA.ESTADOMULTA%TYPE;
    VN_SECUENCIA_ACTUAL                 SGCORESYS.CO_MULTAESTADO.SECUENCIA%TYPE;
    
  BEGIN
        
    BEGIN
    
      SELECT MULTA.*
        INTO REG_T_SCOB_MULTA
        FROM USR_SICOB.T_SCOB_MULTA MULTA
       WHERE MULTA.ID_MULTA = PIN_ID_MULTA
             AND MULTA.ESTADO = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE MULTA CON : ID_MULTA => ' ||
                          PIN_ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MULTA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT MULTA_DETALLE.*
        INTO REG_T_SCOB_MULTA_DETAL
        FROM USR_SICOB.T_SCOB_MULTA_DETAL MULTA_DETALLE
       WHERE MULTA_DETALLE.ID_MULTA = PIN_ID_MULTA
             AND MULTA_DETALLE.ESTADO = '1'
             AND MULTA_DETALLE.FLG_ACTUAL = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE DETALLE DE MULTA CON : ID_MULTA => ' ||
                          PIN_ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MULTA_DETAL - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT ACOB.*
        INTO REG_T_SCOB_AREA_COBRANZA
        FROM USR_SICOB.T_SCOB_AREA_COBRANZA ACOB
       WHERE ACOB.ID_AREA_COBRANZA = REG_T_SCOB_MULTA.ID_AREA_COBRANZA;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE AREA DE COBRANZA CON : ID_AREA_COBRANZA => ' ||
                          REG_T_SCOB_MULTA.ID_AREA_COBRANZA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_AREA_COBRANZA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT MCOB.*
        INTO REG_T_SCOB_MULTA_COBRANZA
        FROM USR_SICOB.T_SCOB_MULTA_COBRANZA MCOB
       WHERE MCOB.ID_MULTA = REG_T_SCOB_MULTA.ID_MULTA
             AND MCOB.FLG_ACTUAL = '1'
             AND MCOB.ESTADO = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE MULTA DE COBRANZA CON : ID_MULTA => ' ||
                          REG_T_SCOB_MULTA.ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MULTA_COBRANZA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;    
    
    BEGIN
    
      SELECT ORGA.*
        INTO REG_T_SCOB_ORGANO_RESOLUTIVO
        FROM USR_SICOB.T_SCOB_ORGANO_RESOLUTIVO ORGA
       WHERE ORGA.ID_ORGANO_RESOLUTIVO = REG_T_SCOB_MULTA_DETAL.ID_ORGANO_RESOLUTIVO;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE ORGANO RESOLUTIVO CON : ID_ORGANO_RESOLUTIVO => ' ||
                          REG_T_SCOB_MULTA_DETAL.ID_ORGANO_RESOLUTIVO;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_ORGANO_RESOLUTIVO - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
      
    VV_IDENTIFICADOR := REG_T_SCOB_MULTA.ANIO || REG_T_SCOB_MULTA.CUM;              
    VV_ESTADOMULTA := REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
    VV_FILEANIO := REG_T_SCOB_MULTA.ANIO_FILE_AEC;
    VD_FILEFECHARECEPCION := REG_T_SCOB_MULTA.FEC_INGRESO_AEC;
    VV_FILENUMERO := REG_T_SCOB_AREA_COBRANZA.CODIGO || REG_T_SCOB_MULTA.NRO_FILE_AEC;
    VV_NUMEROINGRESO := REG_T_SCOB_MULTA_COBRANZA.NRO_INGRESO;
    VV_ESTADOMULTACOBRANZA := REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;        
    
    IF REG_T_SCOB_MULTA.ESTADO_ENVIO_ARCHIVO = 2 THEN
      VV_UBICACIONFISICA := 'ARCHIVO CENTRAL'; 
    ELSIF REG_T_SCOB_MULTA.ESTADO_MULTA = 9 OR REG_T_SCOB_MULTA.ESTADO_MULTA = 10 OR REG_T_SCOB_MULTA.ESTADO_MULTA = 11 
        OR REG_T_SCOB_MULTA.ESTADO_MULTA = 12 OR REG_T_SCOB_MULTA.ESTADO_MULTA = 13 THEN
      VV_UBICACIONFISICA := 'AEC'; 
    ELSE
        VV_UBICACIONFISICA := ''; 
    END IF;
           
    IF REG_T_SCOB_MULTA.COD_MOTIVO = 0 THEN
      VV_EMBARGOFLAG := NULL;
    ELSE 
      VV_EMBARGOFLAG := REG_T_SCOB_MULTA.COD_MOTIVO;
    END IF;
    
    -- SE SACA EL ESTADO DE LA MULTA DEL SIA 
    SELECT ESTADOMULTA INTO VV_ESTADOMULTA_SIA
      FROM SGCORESYS.CO_MULTA
      WHERE IDENTIFICADOR = VV_IDENTIFICADOR;
    
    -- SE ACTUALIZA LA MULTA
    UPDATE SGCORESYS.CO_MULTA SET 
      IDENTIFICADOR = VV_IDENTIFICADOR,
      ESTADOMULTA = VV_ESTADOMULTA,
      FILEANIO = VV_FILEANIO,
      FILEFECHARECEPCION = VD_FILEFECHARECEPCION,
      ESTADOMULTACOBRANZA = VV_ESTADOMULTACOBRANZA,
      FECHAULTIMOINGRESO = VD_FECHAULTIMOINGRESO,
      EMBARGOFLAG = VV_EMBARGOFLAG,
      FILENUMERO = VV_FILENUMERO,
      NUMEROINGRESO = VV_NUMEROINGRESO,
      UBICACIONFISICA = VV_UBICACIONFISICA
    WHERE   
      IDENTIFICADOR = VV_IDENTIFICADOR;               
      
    SELECT MAX(SECUENCIA) INTO VN_SECUENCIA_ACTUAL
          FROM SGCORESYS.CO_MULTAESTADO
          WHERE IDENTIFICADOR = VV_IDENTIFICADOR;    
    
    --EN CASO EL ESTADO CAMBIA SE HACE UN NUEVO REGISTRO EN ESTADO_MULTA
    IF VV_ESTADOMULTA_SIA <> VV_ESTADOMULTA THEN             
      
        VV_ME_IDENTIFICADOR := REG_T_SCOB_MULTA.ANIO || REG_T_SCOB_MULTA.CUM;
        VN_ME_SECUENCIA := VN_SECUENCIA_ACTUAL + 1;
        VV_ME_ESTADOMULTA := REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
        VV_ME_ESTADOPAGO := REG_T_SCOB_MULTA.FLG_TIPO_MULTA;
        VV_ME_ESTADOCOBRANZA := REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
        VN_ME_CAPITAL := REG_T_SCOB_MULTA.MONTO_UIT;
        VN_ME_INTERESES := REG_T_SCOB_MULTA.MONTO_INTERES;
        VN_ME_MORA := REG_T_SCOB_MULTA.MONTO_INTERES_MORATORIO;
        VN_ME_GASTOS := REG_T_SCOB_MULTA.MONTO_COSTAS;
        VN_ME_CAPITAL_ANT := REG_T_SCOB_MULTA.MONTO_UIT;
        VN_ME_INTERESES_ANT := REG_T_SCOB_MULTA.MONTO_INTERES;
        VN_ME_MORA_ANT := REG_T_SCOB_MULTA.MONTO_INTERES_MORATORIO;
        VN_ME_GASTOS_ANT := REG_T_SCOB_MULTA.MONTO_COSTAS;
        VD_ME_FECHA := SYSDATE;
        VV_ME_CONTABILIZACIONPENDIENTEFLAG := 'S';
        VV_ME_PERIODO := TO_CHAR(SYSDATE, 'YYYYMM');
        VV_ME_VOUCHER := NULL;
        VV_ME_ULTIMOUSUARIO := 'SIA';
        VD_ME_ULTIMAFECHAMODIF := SYSDATE;
        VV_ME_CODIGOMULTA := NULL;
        VV_ME_ORCONCILIACIONESTADO := NULL;
        VD_ME_ORCONCILIACIONFECHA := NULL;
        VV_ME_CODAREA := REG_T_SCOB_ORGANO_RESOLUTIVO.CODIGO;
        VN_ME_UITNRO := NVL(REG_T_SCOB_MULTA_DETAL.VALOR_UIT, 0);
        VN_ME_SALDOCAPITAL := REG_T_SCOB_MULTA.SALDO;
        VN_ME_SALDOINTERES := REG_T_SCOB_MULTA.SALDO_IC;
        VN_ME_SALDOMORA := REG_T_SCOB_MULTA.SALDO_IM;
        VN_ME_SALDOGASTOS := REG_T_SCOB_MULTA.SALDO_COSTAS;
        VV_ME_CUENTAPROVISION := NULL;
        
        INSERT INTO SGCORESYS.CO_MULTAESTADO(
          IDENTIFICADOR,
          SECUENCIA,
          ESTADOMULTA,
          ESTADOPAGO,
          ESTADOCOBRANZA,
          ESTADOEXPEDIENTE,
          CAPITAL,
          INTERESES,
          MORA,
          GASTOS,
          CAPITAL_ANT,
          INTERESES_ANT,
          MORA_ANT,
          GASTOS_ANT,
          CODIGOMOTIVOEXPEDIENTE,
          FECHA,
          CONTABILIZACIONPENDIENTEFLAG,
          PERIODO,
          VOUCHER,
          ULTIMOUSUARIO,
          ULTIMAFECHAMODIF,
          CODIGOMULTA,
          ORCONCILIACIONESTADO,
          ORCONCILIACIONFECHA,
          CODAREA,
          UITNRO,
          SALDOCAPITAL,
          SALDOINTERES,
          SALDOMORA,
          SALDOGASTOS,
          CUENTAPROVISION)
        VALUES(
          VV_ME_IDENTIFICADOR,
          VN_ME_SECUENCIA,
          VV_ME_ESTADOMULTA,
          VV_ME_ESTADOPAGO,
          VV_ME_ESTADOCOBRANZA,
          VV_ME_ESTADOEXPEDIENTE,
          VN_ME_CAPITAL,
          VN_ME_INTERESES,
          VN_ME_MORA,
          VN_ME_GASTOS,
          VN_ME_CAPITAL_ANT,
          VN_ME_INTERESES_ANT,
          VN_ME_MORA_ANT,
          VN_ME_GASTOS_ANT,
          VV_ME_CODIGOMOTIVOEXPEDIENTE,
          VD_ME_FECHA,
          VV_ME_CONTABILIZACIONPENDIENTEFLAG,
          VV_ME_PERIODO,
          VV_ME_VOUCHER,
          VV_ME_ULTIMOUSUARIO,
          VD_ME_ULTIMAFECHAMODIF,
          VV_ME_CODIGOMULTA,
          VV_ME_ORCONCILIACIONESTADO,
          VD_ME_ORCONCILIACIONFECHA,
          VV_ME_CODAREA,
          VN_ME_UITNRO,
          VN_ME_SALDOCAPITAL,
          VN_ME_SALDOINTERES,
          VN_ME_SALDOMORA,
          VN_ME_SALDOGASTOS,
          VV_ME_CUENTAPROVISION);     
    
    ELSE
      
      --EN CASO EL ESTADO NO CAMBIA SE HACE UN UPDATE A MULTA_ESTADO
      VV_ME_IDENTIFICADOR := REG_T_SCOB_MULTA.ANIO || REG_T_SCOB_MULTA.CUM;
      VN_ME_SECUENCIA := VN_SECUENCIA_ACTUAL;
      VV_ME_ESTADOMULTA := REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
      VV_ME_ESTADOPAGO := REG_T_SCOB_MULTA.FLG_TIPO_MULTA;
      VV_ME_ESTADOCOBRANZA := REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
      VN_ME_CAPITAL := REG_T_SCOB_MULTA.MONTO_UIT;
      VN_ME_INTERESES := REG_T_SCOB_MULTA.MONTO_INTERES;
      VN_ME_MORA := REG_T_SCOB_MULTA.MONTO_INTERES_MORATORIO;
      VN_ME_GASTOS := REG_T_SCOB_MULTA.MONTO_COSTAS;
      VN_ME_CAPITAL_ANT := REG_T_SCOB_MULTA.MONTO_UIT;
      VN_ME_INTERESES_ANT := REG_T_SCOB_MULTA.MONTO_INTERES;
      VN_ME_MORA_ANT := REG_T_SCOB_MULTA.MONTO_INTERES_MORATORIO;
      VN_ME_GASTOS_ANT := REG_T_SCOB_MULTA.MONTO_COSTAS;
      VV_ME_ULTIMOUSUARIO := 'SIA';
      VD_ME_ULTIMAFECHAMODIF := SYSDATE;
      VV_ME_CODAREA := REG_T_SCOB_ORGANO_RESOLUTIVO.CODIGO;
      VN_ME_UITNRO := NVL(REG_T_SCOB_MULTA_DETAL.VALOR_UIT, 0);
      VN_ME_SALDOCAPITAL := REG_T_SCOB_MULTA.SALDO;
      VN_ME_SALDOINTERES := REG_T_SCOB_MULTA.SALDO_IC;
      VN_ME_SALDOMORA := REG_T_SCOB_MULTA.SALDO_IM;
      VN_ME_SALDOGASTOS := REG_T_SCOB_MULTA.SALDO_COSTAS;
      
      UPDATE SGCORESYS.CO_MULTAESTADO SET 
        ESTADOMULTA = VV_ME_ESTADOMULTA,
        ESTADOPAGO = VV_ME_ESTADOPAGO,
        ESTADOCOBRANZA = VV_ME_ESTADOCOBRANZA,
        ESTADOEXPEDIENTE = VV_ME_ESTADOEXPEDIENTE,
        CAPITAL = VN_ME_CAPITAL,
        INTERESES = VN_ME_INTERESES,
        MORA = VN_ME_MORA,
        GASTOS = VN_ME_GASTOS,
        CAPITAL_ANT = VN_ME_CAPITAL_ANT,
        INTERESES_ANT = VN_ME_INTERESES_ANT,
        MORA_ANT = VN_ME_MORA_ANT,
        GASTOS_ANT = VN_ME_GASTOS_ANT,
        CODIGOMOTIVOEXPEDIENTE = VV_ME_CODIGOMOTIVOEXPEDIENTE,
        ULTIMOUSUARIO = VV_ME_ULTIMOUSUARIO,
        ULTIMAFECHAMODIF = VD_ME_ULTIMAFECHAMODIF,
        CODAREA = VV_ME_CODAREA,
        UITNRO = VN_ME_UITNRO,
        SALDOCAPITAL = VN_ME_SALDOCAPITAL,
        SALDOINTERES = VN_ME_SALDOINTERES,
        SALDOMORA = VN_ME_SALDOMORA,
        SALDOGASTOS = VN_ME_SALDOGASTOS
      WHERE 
      IDENTIFICADOR = VV_ME_IDENTIFICADOR
      AND SECUENCIA = VN_ME_SECUENCIA;       
    
    END IF;      
    
    COMMIT;
    
    PON_COD_RESULT := 0;
    POV_MSG_RESULT := 'CONFORME';
  
  EXCEPTION
    WHEN EX_CONTROLADO THEN
      PON_COD_RESULT := -1;
    WHEN OTHERS THEN
      PON_COD_RESULT := -1;
      POV_MSG_RESULT := 'ERROR NO CONTROLADO : SP_RECEPCION_MULTA_SICOB_A_SIA - ERROR : ' ||
                        SQLERRM;
  END SP_RECEPCION_MULTA_SICOB_A_SIA;
  
  
  PROCEDURE SP_ASIGNAR_MULTA_SICOB_A_SIA(PIN_ID_MULTA   IN NUMBER,
                                         PON_COD_RESULT OUT NUMBER,
                                         POV_MSG_RESULT OUT VARCHAR2) IS
  
    REG_T_SCOB_MULTA                 USR_SICOB.T_SCOB_MULTA%ROWTYPE;
    REG_T_SCOB_MULTA_DETAL           USR_SICOB.T_SCOB_MULTA_DETAL%ROWTYPE;    
    REG_T_SCOB_ORGANO_RESOLUTIVO     USR_SICOB.T_SCOB_ORGANO_RESOLUTIVO%ROWTYPE;   
    REG_T_SCOB_USUARIO               USR_SICOB.T_SCOB_USUARIO%ROWTYPE;
    
    VV_IDENTIFICADOR                 SGCORESYS.CO_MULTA.IDENTIFICADOR%TYPE;
    VV_ESTADOMULTA                   SGCORESYS.CO_MULTA.ESTADOMULTA%TYPE;   
    VV_EMBARGOFLAG                   SGCORESYS.CO_MULTA.EMBARGOFLAG%TYPE;    
    VV_UBICACIONFISICA               SGCORESYS.CO_MULTA.UBICACIONFISICA%TYPE;
    VV_COBGESTOR                     SGCORESYS.CO_MULTA.COBGESTOR%TYPE;
    VD_FECHAASIGNACION               SGCORESYS.CO_MULTA.FECHAASIGNACION%TYPE;
    
    VV_ME_IDENTIFICADOR                 SGCORESYS.CO_MULTAESTADO.IDENTIFICADOR%TYPE;
    VN_ME_SECUENCIA                     SGCORESYS.CO_MULTAESTADO.SECUENCIA%TYPE;
    VV_ME_ESTADOMULTA                   SGCORESYS.CO_MULTAESTADO.ESTADOMULTA%TYPE;
    VV_ME_ESTADOPAGO                    SGCORESYS.CO_MULTAESTADO.ESTADOPAGO%TYPE;
    VV_ME_ESTADOCOBRANZA                SGCORESYS.CO_MULTAESTADO.ESTADOCOBRANZA%TYPE;
    VV_ME_ESTADOEXPEDIENTE              SGCORESYS.CO_MULTAESTADO.ESTADOEXPEDIENTE%TYPE;
    VN_ME_CAPITAL                       SGCORESYS.CO_MULTAESTADO.CAPITAL%TYPE;
    VN_ME_INTERESES                     SGCORESYS.CO_MULTAESTADO.INTERESES%TYPE;
    VN_ME_MORA                          SGCORESYS.CO_MULTAESTADO.MORA%TYPE;
    VN_ME_GASTOS                        SGCORESYS.CO_MULTAESTADO.GASTOS%TYPE;
    VN_ME_CAPITAL_ANT                   SGCORESYS.CO_MULTAESTADO.CAPITAL_ANT%TYPE;
    VN_ME_INTERESES_ANT                 SGCORESYS.CO_MULTAESTADO.INTERESES_ANT%TYPE;
    VN_ME_MORA_ANT                      SGCORESYS.CO_MULTAESTADO.MORA_ANT%TYPE;
    VN_ME_GASTOS_ANT                    SGCORESYS.CO_MULTAESTADO.GASTOS_ANT%TYPE;
    VV_ME_CODIGOMOTIVOEXPEDIENTE        SGCORESYS.CO_MULTAESTADO.CODIGOMOTIVOEXPEDIENTE%TYPE;
    VD_ME_FECHA                         SGCORESYS.CO_MULTAESTADO.FECHA%TYPE;
    VV_ME_CONTABILIZACIONPENDIENTEFLAG  SGCORESYS.CO_MULTAESTADO.CONTABILIZACIONPENDIENTEFLAG%TYPE;
    VV_ME_PERIODO                       SGCORESYS.CO_MULTAESTADO.PERIODO%TYPE;
    VV_ME_VOUCHER                       SGCORESYS.CO_MULTAESTADO.VOUCHER%TYPE;
    VV_ME_ULTIMOUSUARIO                 SGCORESYS.CO_MULTAESTADO.ULTIMOUSUARIO%TYPE;
    VD_ME_ULTIMAFECHAMODIF              SGCORESYS.CO_MULTAESTADO.ULTIMAFECHAMODIF%TYPE;
    VV_ME_CODIGOMULTA                   SGCORESYS.CO_MULTAESTADO.CODIGOMULTA%TYPE;
    VV_ME_ORCONCILIACIONESTADO          SGCORESYS.CO_MULTAESTADO.ORCONCILIACIONESTADO%TYPE;
    VD_ME_ORCONCILIACIONFECHA           SGCORESYS.CO_MULTAESTADO.ORCONCILIACIONFECHA%TYPE;
    VV_ME_CODAREA                       SGCORESYS.CO_MULTAESTADO.CODAREA%TYPE;
    VN_ME_UITNRO                        SGCORESYS.CO_MULTAESTADO.UITNRO%TYPE;
    VN_ME_SALDOCAPITAL                  SGCORESYS.CO_MULTAESTADO.SALDOCAPITAL%TYPE;
    VN_ME_SALDOINTERES                  SGCORESYS.CO_MULTAESTADO.SALDOINTERES%TYPE;
    VN_ME_SALDOMORA                     SGCORESYS.CO_MULTAESTADO.SALDOMORA%TYPE;
    VN_ME_SALDOGASTOS                   SGCORESYS.CO_MULTAESTADO.SALDOGASTOS%TYPE;
    VV_ME_CUENTAPROVISION               SGCORESYS.CO_MULTAESTADO.CUENTAPROVISION%TYPE;
    
    VV_ESTADOMULTA_SIA                  SGCORESYS.CO_MULTA.ESTADOMULTA%TYPE;
    VN_SECUENCIA_ACTUAL                 SGCORESYS.CO_MULTAESTADO.SECUENCIA%TYPE;
    
  BEGIN
        
    BEGIN
    
      SELECT MULTA.*
        INTO REG_T_SCOB_MULTA
        FROM USR_SICOB.T_SCOB_MULTA MULTA
       WHERE MULTA.ID_MULTA = PIN_ID_MULTA
             AND MULTA.ESTADO = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE MULTA CON : ID_MULTA => ' ||
                          PIN_ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MULTA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT MULTA_DETALLE.*
        INTO REG_T_SCOB_MULTA_DETAL
        FROM USR_SICOB.T_SCOB_MULTA_DETAL MULTA_DETALLE
       WHERE MULTA_DETALLE.ID_MULTA = PIN_ID_MULTA
             AND MULTA_DETALLE.ESTADO = '1'
             AND MULTA_DETALLE.FLG_ACTUAL = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE DETALLE DE MULTA CON : ID_MULTA => ' ||
                          PIN_ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MULTA_DETAL - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT USUA.*
        INTO REG_T_SCOB_USUARIO
        FROM USR_SICOB.T_SCOB_USUARIO USUA
       WHERE USUA.ID_USUARIO = REG_T_SCOB_MULTA.ID_USUARIO_ASIG_COBRANZA;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE AREA DE USUARIO CON : ID_USUARIO_ASIG_COBRANZA => ' ||
                          REG_T_SCOB_MULTA.ID_USUARIO_ASIG_COBRANZA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_USUARIO - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT ORGA.*
        INTO REG_T_SCOB_ORGANO_RESOLUTIVO
        FROM USR_SICOB.T_SCOB_ORGANO_RESOLUTIVO ORGA
       WHERE ORGA.ID_ORGANO_RESOLUTIVO = REG_T_SCOB_MULTA_DETAL.ID_ORGANO_RESOLUTIVO;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE ORGANO RESOLUTIVO CON : ID_ORGANO_RESOLUTIVO => ' ||
                          REG_T_SCOB_MULTA_DETAL.ID_ORGANO_RESOLUTIVO;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_ORGANO_RESOLUTIVO - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
      
    VV_IDENTIFICADOR := REG_T_SCOB_MULTA.ANIO || REG_T_SCOB_MULTA.CUM;              
    VV_ESTADOMULTA := REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
    VV_COBGESTOR := REG_T_SCOB_USUARIO.USUARIO;
    VD_FECHAASIGNACION := REG_T_SCOB_MULTA.FECHA_ASIG_COBRANZA;
    
    IF REG_T_SCOB_MULTA.ESTADO_ENVIO_ARCHIVO = 2 THEN
      VV_UBICACIONFISICA := 'ARCHIVO CENTRAL'; 
    ELSIF REG_T_SCOB_MULTA.ESTADO_MULTA = 9 OR REG_T_SCOB_MULTA.ESTADO_MULTA = 10 OR REG_T_SCOB_MULTA.ESTADO_MULTA = 11 
        OR REG_T_SCOB_MULTA.ESTADO_MULTA = 12 OR REG_T_SCOB_MULTA.ESTADO_MULTA = 13 THEN
      VV_UBICACIONFISICA := 'AEC'; 
    ELSE
        VV_UBICACIONFISICA := ''; 
    END IF;
           
    IF REG_T_SCOB_MULTA.COD_MOTIVO = 0 THEN
      VV_EMBARGOFLAG := NULL;
    ELSE 
      VV_EMBARGOFLAG := REG_T_SCOB_MULTA.COD_MOTIVO;
    END IF;
    
    -- SE SACA EL ESTADO DE LA MULTA DEL SIA 
    SELECT ESTADOMULTA INTO VV_ESTADOMULTA_SIA
      FROM SGCORESYS.CO_MULTA
      WHERE IDENTIFICADOR = VV_IDENTIFICADOR;
    
    -- SE ACTUALIZA LA MULTA
    UPDATE SGCORESYS.CO_MULTA SET 
      ESTADOMULTA = VV_ESTADOMULTA,
      FILEANIO = VV_COBGESTOR,
      FILEFECHARECEPCION = VD_FECHAASIGNACION,      
      EMBARGOFLAG = VV_EMBARGOFLAG,
      UBICACIONFISICA = VV_UBICACIONFISICA
    WHERE   
      IDENTIFICADOR = VV_IDENTIFICADOR;               
      
    SELECT MAX(SECUENCIA) INTO VN_SECUENCIA_ACTUAL
          FROM SGCORESYS.CO_MULTAESTADO
          WHERE IDENTIFICADOR = VV_IDENTIFICADOR;    
    
    --EN CASO EL ESTADO CAMBIA SE HACE UN NUEVO REGISTRO EN ESTADO_MULTA
    IF VV_ESTADOMULTA_SIA <> VV_ESTADOMULTA THEN             
      
        VV_ME_IDENTIFICADOR := REG_T_SCOB_MULTA.ANIO || REG_T_SCOB_MULTA.CUM;
        VN_ME_SECUENCIA := VN_SECUENCIA_ACTUAL + 1;
        VV_ME_ESTADOMULTA := REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
        VV_ME_ESTADOPAGO := REG_T_SCOB_MULTA.FLG_TIPO_MULTA;
        VV_ME_ESTADOCOBRANZA := REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
        VN_ME_CAPITAL := REG_T_SCOB_MULTA.MONTO_UIT;
        VN_ME_INTERESES := REG_T_SCOB_MULTA.MONTO_INTERES;
        VN_ME_MORA := REG_T_SCOB_MULTA.MONTO_INTERES_MORATORIO;
        VN_ME_GASTOS := REG_T_SCOB_MULTA.MONTO_COSTAS;
        VN_ME_CAPITAL_ANT := REG_T_SCOB_MULTA.MONTO_UIT;
        VN_ME_INTERESES_ANT := REG_T_SCOB_MULTA.MONTO_INTERES;
        VN_ME_MORA_ANT := REG_T_SCOB_MULTA.MONTO_INTERES_MORATORIO;
        VN_ME_GASTOS_ANT := REG_T_SCOB_MULTA.MONTO_COSTAS;
        VD_ME_FECHA := SYSDATE;
        VV_ME_CONTABILIZACIONPENDIENTEFLAG := 'S';
        VV_ME_PERIODO := TO_CHAR(SYSDATE, 'YYYYMM');
        VV_ME_VOUCHER := NULL;
        VV_ME_ULTIMOUSUARIO := 'SIA';
        VD_ME_ULTIMAFECHAMODIF := SYSDATE;
        VV_ME_CODIGOMULTA := NULL;
        VV_ME_ORCONCILIACIONESTADO := NULL;
        VD_ME_ORCONCILIACIONFECHA := NULL;
        VV_ME_CODAREA := REG_T_SCOB_ORGANO_RESOLUTIVO.CODIGO;
        VN_ME_UITNRO := NVL(REG_T_SCOB_MULTA_DETAL.VALOR_UIT, 0);
        VN_ME_SALDOCAPITAL := REG_T_SCOB_MULTA.SALDO;
        VN_ME_SALDOINTERES := REG_T_SCOB_MULTA.SALDO_IC;
        VN_ME_SALDOMORA := REG_T_SCOB_MULTA.SALDO_IM;
        VN_ME_SALDOGASTOS := REG_T_SCOB_MULTA.SALDO_COSTAS;
        VV_ME_CUENTAPROVISION := NULL;
        
        INSERT INTO SGCORESYS.CO_MULTAESTADO(
          IDENTIFICADOR,
          SECUENCIA,
          ESTADOMULTA,
          ESTADOPAGO,
          ESTADOCOBRANZA,
          ESTADOEXPEDIENTE,
          CAPITAL,
          INTERESES,
          MORA,
          GASTOS,
          CAPITAL_ANT,
          INTERESES_ANT,
          MORA_ANT,
          GASTOS_ANT,
          CODIGOMOTIVOEXPEDIENTE,
          FECHA,
          CONTABILIZACIONPENDIENTEFLAG,
          PERIODO,
          VOUCHER,
          ULTIMOUSUARIO,
          ULTIMAFECHAMODIF,
          CODIGOMULTA,
          ORCONCILIACIONESTADO,
          ORCONCILIACIONFECHA,
          CODAREA,
          UITNRO,
          SALDOCAPITAL,
          SALDOINTERES,
          SALDOMORA,
          SALDOGASTOS,
          CUENTAPROVISION)
        VALUES(
          VV_ME_IDENTIFICADOR,
          VN_ME_SECUENCIA,
          VV_ME_ESTADOMULTA,
          VV_ME_ESTADOPAGO,
          VV_ME_ESTADOCOBRANZA,
          VV_ME_ESTADOEXPEDIENTE,
          VN_ME_CAPITAL,
          VN_ME_INTERESES,
          VN_ME_MORA,
          VN_ME_GASTOS,
          VN_ME_CAPITAL_ANT,
          VN_ME_INTERESES_ANT,
          VN_ME_MORA_ANT,
          VN_ME_GASTOS_ANT,
          VV_ME_CODIGOMOTIVOEXPEDIENTE,
          VD_ME_FECHA,
          VV_ME_CONTABILIZACIONPENDIENTEFLAG,
          VV_ME_PERIODO,
          VV_ME_VOUCHER,
          VV_ME_ULTIMOUSUARIO,
          VD_ME_ULTIMAFECHAMODIF,
          VV_ME_CODIGOMULTA,
          VV_ME_ORCONCILIACIONESTADO,
          VD_ME_ORCONCILIACIONFECHA,
          VV_ME_CODAREA,
          VN_ME_UITNRO,
          VN_ME_SALDOCAPITAL,
          VN_ME_SALDOINTERES,
          VN_ME_SALDOMORA,
          VN_ME_SALDOGASTOS,
          VV_ME_CUENTAPROVISION);     
    
    ELSE
      
      --EN CASO EL ESTADO NO CAMBIA SE HACE UN UPDATE A MULTA_ESTADO
      VV_ME_IDENTIFICADOR := REG_T_SCOB_MULTA.ANIO || REG_T_SCOB_MULTA.CUM;
      VN_ME_SECUENCIA := VN_SECUENCIA_ACTUAL;
      VV_ME_ESTADOMULTA := REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
      VV_ME_ESTADOPAGO := REG_T_SCOB_MULTA.FLG_TIPO_MULTA;
      VV_ME_ESTADOCOBRANZA := REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
      VN_ME_CAPITAL := REG_T_SCOB_MULTA.MONTO_UIT;
      VN_ME_INTERESES := REG_T_SCOB_MULTA.MONTO_INTERES;
      VN_ME_MORA := REG_T_SCOB_MULTA.MONTO_INTERES_MORATORIO;
      VN_ME_GASTOS := REG_T_SCOB_MULTA.MONTO_COSTAS;
      VN_ME_CAPITAL_ANT := REG_T_SCOB_MULTA.MONTO_UIT;
      VN_ME_INTERESES_ANT := REG_T_SCOB_MULTA.MONTO_INTERES;
      VN_ME_MORA_ANT := REG_T_SCOB_MULTA.MONTO_INTERES_MORATORIO;
      VN_ME_GASTOS_ANT := REG_T_SCOB_MULTA.MONTO_COSTAS;
      VV_ME_ULTIMOUSUARIO := 'SIA';
      VD_ME_ULTIMAFECHAMODIF := SYSDATE;
      VV_ME_CODAREA := REG_T_SCOB_ORGANO_RESOLUTIVO.CODIGO;
      VN_ME_UITNRO := NVL(REG_T_SCOB_MULTA_DETAL.VALOR_UIT, 0);
      VN_ME_SALDOCAPITAL := REG_T_SCOB_MULTA.SALDO;
      VN_ME_SALDOINTERES := REG_T_SCOB_MULTA.SALDO_IC;
      VN_ME_SALDOMORA := REG_T_SCOB_MULTA.SALDO_IM;
      VN_ME_SALDOGASTOS := REG_T_SCOB_MULTA.SALDO_COSTAS;
      
      UPDATE SGCORESYS.CO_MULTAESTADO SET 
        ESTADOMULTA = VV_ME_ESTADOMULTA,
        ESTADOPAGO = VV_ME_ESTADOPAGO,
        ESTADOCOBRANZA = VV_ME_ESTADOCOBRANZA,
        ESTADOEXPEDIENTE = VV_ME_ESTADOEXPEDIENTE,
        CAPITAL = VN_ME_CAPITAL,
        INTERESES = VN_ME_INTERESES,
        MORA = VN_ME_MORA,
        GASTOS = VN_ME_GASTOS,
        CAPITAL_ANT = VN_ME_CAPITAL_ANT,
        INTERESES_ANT = VN_ME_INTERESES_ANT,
        MORA_ANT = VN_ME_MORA_ANT,
        GASTOS_ANT = VN_ME_GASTOS_ANT,
        CODIGOMOTIVOEXPEDIENTE = VV_ME_CODIGOMOTIVOEXPEDIENTE,
        ULTIMOUSUARIO = VV_ME_ULTIMOUSUARIO,
        ULTIMAFECHAMODIF = VD_ME_ULTIMAFECHAMODIF,
        CODAREA = VV_ME_CODAREA,
        UITNRO = VN_ME_UITNRO,
        SALDOCAPITAL = VN_ME_SALDOCAPITAL,
        SALDOINTERES = VN_ME_SALDOINTERES,
        SALDOMORA = VN_ME_SALDOMORA,
        SALDOGASTOS = VN_ME_SALDOGASTOS
      WHERE 
      IDENTIFICADOR = VV_ME_IDENTIFICADOR
      AND SECUENCIA = VN_ME_SECUENCIA;       
    
    END IF;
                                    
    
    COMMIT;
    
    PON_COD_RESULT := 0;
    POV_MSG_RESULT := 'CONFORME';
  
  EXCEPTION
    WHEN EX_CONTROLADO THEN
      PON_COD_RESULT := -1;
    WHEN OTHERS THEN
      PON_COD_RESULT := -1;
      POV_MSG_RESULT := 'ERROR NO CONTROLADO : SP_ASIGNAR_MULTA_SICOB_A_SIA - ERROR : ' ||
                        SQLERRM;
  END SP_ASIGNAR_MULTA_SICOB_A_SIA;
  
  PROCEDURE SP_GENERA_EXPEDIENTE_MULTA_SICOB_A_SIA(PIN_ID_MULTA   IN NUMBER,
                                                   PON_COD_RESULT OUT NUMBER,
                                                   POV_MSG_RESULT OUT VARCHAR2) IS
  
    REG_T_SCOB_MULTA                 USR_SICOB.T_SCOB_MULTA%ROWTYPE;
    REG_T_SCOB_MULTA_DETAL           USR_SICOB.T_SCOB_MULTA_DETAL%ROWTYPE;    
    REG_T_SCOB_EXPEDIENTE            USR_SICOB.T_SCOB_EXPEDIENTE%ROWTYPE;
    REG_T_SCOB_EST_EXP_COB_MOTIVO    USR_SICOB.T_SCOB_EST_EXP_COB_MOTIVO%ROWTYPE;
    REG_T_SCOB_EST_EXP_COB           USR_SICOB.T_SCOB_EST_EXP_COB%ROWTYPE;
    
    VV_IDENTIFICADOR                 SGCORESYS.CO_MULTA.IDENTIFICADOR%TYPE;
    VV_ESTADOMULTA                   SGCORESYS.CO_MULTA.ESTADOMULTA%TYPE;   
    VV_EMBARGOFLAG                   SGCORESYS.CO_MULTA.EMBARGOFLAG%TYPE;    
    VV_COBEXPEDIENTENRO              SGCORESYS.CO_MULTA.COBEXPEDIENTENRO%TYPE;
    VD_COBEXPEDIENTEFECHA            SGCORESYS.CO_MULTA.COBEXPEDIENTEFECHA%TYPE;
    VV_COMRESOLANIO                  SGCORESYS.CO_MULTA.COMRESOLANIO%TYPE;
    VV_COMRESOLCODIGO                SGCORESYS.CO_MULTA.COMRESOLCODIGO%TYPE;
    VV_TIPOFRACCIONAMIENTO           SGCORESYS.CO_MULTA.TIPOFRACCIONAMIENTO%TYPE;
    VD_COBFECHAULTIMO                SGCORESYS.CO_MULTA.COBFECHAULTIMO%TYPE;
    VV_CODMOTIVOMULTA                SGCORESYS.CO_MULTA.CODMOTIVOMULTA%TYPE;
    VV_COBEXPEDIENTEMOTIVO           SGCORESYS.CO_MULTA.COBEXPEDIENTEMOTIVO%TYPE;
    VV_COBEXPEDIENTEESTADO           SGCORESYS.CO_MULTA.COBEXPEDIENTEESTADO%TYPE;
    
    VV_ME_IDENTIFICADOR                 SGCORESYS.CO_MULTAESTADO.IDENTIFICADOR%TYPE;
    VN_ME_SECUENCIA                     SGCORESYS.CO_MULTAESTADO.SECUENCIA%TYPE;
    VV_ME_ESTADOEXPEDIENTE              SGCORESYS.CO_MULTAESTADO.ESTADOEXPEDIENTE%TYPE;    
    VV_ME_CODIGOMOTIVOEXPEDIENTE        SGCORESYS.CO_MULTAESTADO.CODIGOMOTIVOEXPEDIENTE%TYPE;    
    
    VV_ESTADOMULTA_SIA                  SGCORESYS.CO_MULTA.ESTADOMULTA%TYPE;
    VN_SECUENCIA_ACTUAL                 SGCORESYS.CO_MULTAESTADO.SECUENCIA%TYPE;
    
  BEGIN
        
    BEGIN
    
      SELECT MULTA.*
        INTO REG_T_SCOB_MULTA
        FROM USR_SICOB.T_SCOB_MULTA MULTA
       WHERE MULTA.ID_MULTA = PIN_ID_MULTA
             AND MULTA.ESTADO = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE MULTA CON : ID_MULTA => ' ||
                          PIN_ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MULTA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT MULTA_DETALLE.*
        INTO REG_T_SCOB_MULTA_DETAL
        FROM USR_SICOB.T_SCOB_MULTA_DETAL MULTA_DETALLE
       WHERE MULTA_DETALLE.ID_MULTA = PIN_ID_MULTA
             AND MULTA_DETALLE.ESTADO = '1'
             AND MULTA_DETALLE.FLG_ACTUAL = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE DETALLE DE MULTA CON : ID_MULTA => ' ||
                          PIN_ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MULTA_DETAL - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT EXPE.*
        INTO REG_T_SCOB_EXPEDIENTE
         FROM USR_SICOB.T_SCOB_EXPEDIENTE_MULTA EXMU
        LEFT JOIN USR_SICOB.T_SCOB_EXPEDIENTE EXPE
          ON EXPE.ID_EXPEDIENTE = EXMU.ID_EXPEDIENTE
         AND EXPE.ESTADO = '1'
          WHERE EXMU.ID_MULTA = REG_T_SCOB_MULTA.ID_MULTA
         AND EXMU.ESTADO = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE EXPEDIENTE CON : ID_MULTA => ' ||
                          REG_T_SCOB_MULTA.ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_EXPEDIENTE - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT EXCM.*
        INTO REG_T_SCOB_EST_EXP_COB_MOTIVO
        FROM USR_SICOB.T_SCOB_EST_EXP_COB_MOTIVO EXCM
       WHERE EXCM.ID_MOTIVO = REG_T_SCOB_EXPEDIENTE.ID_MOTIVO;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE AREA DE ESTADO DE MOTIVO DE COBRANZA CON : ID_MOTIVO => ' ||
                          REG_T_SCOB_EXPEDIENTE.ID_MOTIVO;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_EST_EXP_COB_MOTIVO - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT ESEC.*
        INTO REG_T_SCOB_EST_EXP_COB
        FROM USR_SICOB.T_SCOB_EST_EXP_COB ESEC
       WHERE ESEC.ID_EST_EXP_COB = REG_T_SCOB_EXPEDIENTE.ESTADO_EXPEDIENTE;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE AREA DE ESTADO DE EXPEDIENTE DE COBRANZA CON : ESTADO_EXPEDIENTE => ' ||
                          REG_T_SCOB_EXPEDIENTE.ESTADO_EXPEDIENTE;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_EST_EXP_COB - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
      
    VV_IDENTIFICADOR := REG_T_SCOB_MULTA.ANIO || REG_T_SCOB_MULTA.CUM; 
    VV_ESTADOMULTA := REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;             
    VV_COBEXPEDIENTENRO := REG_T_SCOB_EXPEDIENTE.ANIO || REG_T_SCOB_EXPEDIENTE.NRO_EXPEDIENTE;
    VD_COBEXPEDIENTEFECHA := REG_T_SCOB_EXPEDIENTE.FEC_INGRESO;       
    VD_COBFECHAULTIMO := REG_T_SCOB_EXPEDIENTE.FEC_ESTADO_EXPEDIENTE;
    VV_TIPOFRACCIONAMIENTO := (CASE WHEN REG_T_SCOB_EXPEDIENTE.ESTADO_EXPEDIENTE = 4 THEN 'FR' ELSE 'NF' END);
    VV_COMRESOLANIO := REG_T_SCOB_EXPEDIENTE.ANIO;
    VV_COMRESOLCODIGO := REG_T_SCOB_EXPEDIENTE.NRO_EXPEDIENTE;
    VV_CODMOTIVOMULTA := REG_T_SCOB_EST_EXP_COB_MOTIVO.CODIGO;
    VV_COBEXPEDIENTEESTADO := REG_T_SCOB_EST_EXP_COB.CODIGO;
    VV_COBEXPEDIENTEMOTIVO := REG_T_SCOB_EST_EXP_COB_MOTIVO.CODIGO;
           
    IF NVL(REG_T_SCOB_EXPEDIENTE.FLG_EMBARGO, '0') = '0' THEN
      VV_EMBARGOFLAG := 'N';
    ELSE 
      VV_EMBARGOFLAG := 'S';
    END IF;
    
    -- SE SACA EL ESTADO DE LA MULTA DEL SIA 
    SELECT ESTADOMULTA INTO VV_ESTADOMULTA_SIA
      FROM SGCORESYS.CO_MULTA
      WHERE IDENTIFICADOR = VV_IDENTIFICADOR;
    
    -- SE ACTUALIZA LA MULTA
    UPDATE SGCORESYS.CO_MULTA SET 
      ESTADOMULTA = VV_ESTADOMULTA,
      COBEXPEDIENTENRO = VV_COBEXPEDIENTENRO,
      COBEXPEDIENTEFECHA = VD_COBEXPEDIENTEFECHA,
      COBFECHAULTIMO = VD_COBFECHAULTIMO,
      TIPOFRACCIONAMIENTO = VV_TIPOFRACCIONAMIENTO,
      COMRESOLANIO = VV_COMRESOLANIO,
      COMRESOLCODIGO = VV_COMRESOLCODIGO,
      CODMOTIVOMULTA = VV_CODMOTIVOMULTA,
      COBEXPEDIENTEESTADO = VV_COBEXPEDIENTEESTADO,
      COBEXPEDIENTEMOTIVO = VV_COBEXPEDIENTEMOTIVO,
      EMBARGOFLAG = VV_EMBARGOFLAG
    WHERE   
      IDENTIFICADOR = VV_IDENTIFICADOR;               
      
    SELECT MAX(SECUENCIA) INTO VN_SECUENCIA_ACTUAL
          FROM SGCORESYS.CO_MULTAESTADO
          WHERE IDENTIFICADOR = VV_IDENTIFICADOR;   
      
    VV_ME_IDENTIFICADOR := REG_T_SCOB_MULTA.ANIO || REG_T_SCOB_MULTA.CUM;
    VN_ME_SECUENCIA := VN_SECUENCIA_ACTUAL;
    VV_ME_ESTADOEXPEDIENTE := REG_T_SCOB_EST_EXP_COB.CODIGO;
    VV_ME_CODIGOMOTIVOEXPEDIENTE := REG_T_SCOB_EST_EXP_COB_MOTIVO.CODIGO;
    
    -- SE ACTUALIZA EL ESTADO DE LA MULTA
    UPDATE SGCORESYS.CO_MULTAESTADO SET        
      ESTADOEXPEDIENTE = VV_ME_ESTADOEXPEDIENTE,        
      CODIGOMOTIVOEXPEDIENTE = VV_ME_CODIGOMOTIVOEXPEDIENTE       
    WHERE 
      IDENTIFICADOR = VV_ME_IDENTIFICADOR
      AND SECUENCIA = VN_ME_SECUENCIA;       
    
    COMMIT;
    
    PON_COD_RESULT := 0;
    POV_MSG_RESULT := 'CONFORME';
  
  EXCEPTION
    WHEN EX_CONTROLADO THEN
      PON_COD_RESULT := -1;
    WHEN OTHERS THEN
      PON_COD_RESULT := -1;
      POV_MSG_RESULT := 'ERROR NO CONTROLADO : SP_GENERA_EXPEDIENTE_MULTA_SICOB_A_SIA - ERROR : ' ||
                        SQLERRM;
  END SP_GENERA_EXPEDIENTE_MULTA_SICOB_A_SIA;
  
  PROCEDURE SP_MARCAR_MULTA_FILE_SICOB_A_SIA(PIN_ID_MULTA   IN NUMBER,
                                             PON_COD_RESULT OUT NUMBER,
                                             POV_MSG_RESULT OUT VARCHAR2) IS
  
    REG_T_SCOB_MULTA                 USR_SICOB.T_SCOB_MULTA%ROWTYPE;    
    
    VV_IDENTIFICADOR                 SGCORESYS.CO_MULTA.IDENTIFICADOR%TYPE;
    VV_UBICACIONFISICA               SGCORESYS.CO_MULTA.UBICACIONFISICA%TYPE;    
    
  BEGIN
        
    BEGIN
    
      SELECT MULTA.*
        INTO REG_T_SCOB_MULTA
        FROM USR_SICOB.T_SCOB_MULTA MULTA
       WHERE MULTA.ID_MULTA = PIN_ID_MULTA
             AND MULTA.ESTADO = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE MULTA CON : ID_MULTA => ' ||
                          PIN_ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MULTA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;        
      
    VV_IDENTIFICADOR := REG_T_SCOB_MULTA.ANIO || REG_T_SCOB_MULTA.CUM;   
      
    IF REG_T_SCOB_MULTA.ESTADO_ENVIO_ARCHIVO = 2 THEN
      VV_UBICACIONFISICA := 'ARCHIVO CENTRAL'; 
    ELSIF REG_T_SCOB_MULTA.ESTADO_MULTA = 9 OR REG_T_SCOB_MULTA.ESTADO_MULTA = 10 OR REG_T_SCOB_MULTA.ESTADO_MULTA = 11 
        OR REG_T_SCOB_MULTA.ESTADO_MULTA = 12 OR REG_T_SCOB_MULTA.ESTADO_MULTA = 13 THEN
      VV_UBICACIONFISICA := 'AEC'; 
    ELSE
        VV_UBICACIONFISICA := ''; 
    END IF;
    
    -- SE ACTUALIZA LA MULTA
    UPDATE SGCORESYS.CO_MULTA SET 
      UBICACIONFISICA = VV_UBICACIONFISICA
    WHERE   
      IDENTIFICADOR = VV_IDENTIFICADOR;                          
    
    COMMIT;
    
    PON_COD_RESULT := 0;
    POV_MSG_RESULT := 'CONFORME';
  
  EXCEPTION
    WHEN EX_CONTROLADO THEN
      PON_COD_RESULT := -1;
    WHEN OTHERS THEN
      PON_COD_RESULT := -1;
      POV_MSG_RESULT := 'ERROR NO CONTROLADO : SP_MARCAR_MULTA_FILE_SICOB_A_SIA - ERROR : ' ||
                        SQLERRM;
  END SP_MARCAR_MULTA_FILE_SICOB_A_SIA;
  
  PROCEDURE SP_ENVIAR_ARCHIVO_CENTRAL_SICOB_A_SIA(PIN_ID_MULTA   IN NUMBER,
                                                  PON_COD_RESULT OUT NUMBER,
                                                  POV_MSG_RESULT OUT VARCHAR2) IS
  
    REG_T_SCOB_MULTA                 USR_SICOB.T_SCOB_MULTA%ROWTYPE;    
    REG_T_SCOB_ARCHIVO_CENTRAL       USR_SICOB.T_SCOB_ARCHIVO_CENTRAL%ROWTYPE;
    
    VV_IDENTIFICADOR                 SGCORESYS.CO_MULTA.IDENTIFICADOR%TYPE;
    VV_UBICACIONFISICA               SGCORESYS.CO_MULTA.UBICACIONFISICA%TYPE;    
    VD_ENVIOFECHA                    SGCORESYS.CO_MULTA.ENVIOFECHA%TYPE;        
    
  BEGIN
        
    BEGIN
    
      SELECT MULTA.*
        INTO REG_T_SCOB_MULTA
        FROM USR_SICOB.T_SCOB_MULTA MULTA
       WHERE MULTA.ID_MULTA = PIN_ID_MULTA
             AND MULTA.ESTADO = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE MULTA CON : ID_MULTA => ' ||
                          PIN_ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MULTA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;     
    
    BEGIN
    
      SELECT ARCH_CEN.*
        INTO REG_T_SCOB_ARCHIVO_CENTRAL
        FROM USR_SICOB.T_SCOB_MULTA_ARCHIVO_CENTRAL EXPED_ARCH_CEN          
        LEFT JOIN USR_SICOB.T_SCOB_ARCHIVO_CENTRAL ARCH_CEN
          ON ARCH_CEN.ID_ARCHIVO_CENTRAL = EXPED_ARCH_CEN.ID_MULTA_ARCHIVO_CENTRAL
         AND ARCH_CEN.ESTADO = '1'
         WHERE EXPED_ARCH_CEN.ID_MULTA = REG_T_SCOB_MULTA.ID_MULTA
         AND EXPED_ARCH_CEN.FLG_ACTUAL = '1'
         AND EXPED_ARCH_CEN.ESTADO = '1';
        
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE ARCHIVO CENTRAL CON : ID_MULTA => ' ||
                          REG_T_SCOB_MULTA.ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_ARCHIVO_CENTRAL - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;   
      
    VV_IDENTIFICADOR := REG_T_SCOB_MULTA.ANIO || REG_T_SCOB_MULTA.CUM;   
    VD_ENVIOFECHA := REG_T_SCOB_ARCHIVO_CENTRAL.FEC_ENVIO;
    
    IF REG_T_SCOB_MULTA.ESTADO_ENVIO_ARCHIVO = 2 THEN
      VV_UBICACIONFISICA := 'ARCHIVO CENTRAL'; 
    ELSIF REG_T_SCOB_MULTA.ESTADO_MULTA = 9 OR REG_T_SCOB_MULTA.ESTADO_MULTA = 10 OR REG_T_SCOB_MULTA.ESTADO_MULTA = 11 
        OR REG_T_SCOB_MULTA.ESTADO_MULTA = 12 OR REG_T_SCOB_MULTA.ESTADO_MULTA = 13 THEN
      VV_UBICACIONFISICA := 'AEC'; 
    ELSE
        VV_UBICACIONFISICA := ''; 
    END IF;
    
    -- SE ACTUALIZA LA MULTA
    UPDATE SGCORESYS.CO_MULTA SET 
      UBICACIONFISICA = VV_UBICACIONFISICA,
      ENVIOFECHA = VD_ENVIOFECHA
    WHERE   
      IDENTIFICADOR = VV_IDENTIFICADOR;                          
    
    COMMIT;
    
    PON_COD_RESULT := 0;
    POV_MSG_RESULT := 'CONFORME';
  
  EXCEPTION
    WHEN EX_CONTROLADO THEN
      PON_COD_RESULT := -1;
    WHEN OTHERS THEN
      PON_COD_RESULT := -1;
      POV_MSG_RESULT := 'ERROR NO CONTROLADO : SP_MARCAR_MULTA_FILE_SICOB_A_SIA - ERROR : ' ||
                        SQLERRM;
  END SP_ENVIAR_ARCHIVO_CENTRAL_SICOB_A_SIA;
  
  PROCEDURE SP_CREAR_CRONOGRAMA_SICOB_A_SIA(PIN_ID_MULTA                IN NUMBER,    
                                            PON_COD_RESULT              OUT NUMBER,
                                            POV_MSG_RESULT              OUT VARCHAR2) IS
  
    REG_T_SCOB_EXPED_CRONOGRAMA_DET  USR_SICOB.T_SCOB_EXPED_CRONOGRAMA_DET%ROWTYPE;      
    REG_T_SCOB_MULTA                 USR_SICOB.T_SCOB_MULTA%ROWTYPE;  
    REG_T_SCOB_EXPEDIENTE            USR_SICOB.T_SCOB_EXPEDIENTE%ROWTYPE;
    
    VV_IDENTIFICADOR                 SGCORESYS.CO_MULTACUOTA.IDENTIFICADOR%TYPE;
    VN_CUOTA                         SGCORESYS.CO_MULTACUOTA.CUOTA%TYPE;
    VD_FECHAVENCIMIENTO              SGCORESYS.CO_MULTACUOTA.FECHAVENCIMIENTO%TYPE;
    VN_CAPITAL                       SGCORESYS.CO_MULTACUOTA.CAPITAL%TYPE;
    VN_INTERESES                     SGCORESYS.CO_MULTACUOTA.INTERESES%TYPE;
    VN_IMPORTE                       SGCORESYS.CO_MULTACUOTA.IMPORTE%TYPE;
    VN_GASTOS                        SGCORESYS.CO_MULTACUOTA.GASTOS%TYPE;
    VN_MORA                          SGCORESYS.CO_MULTACUOTA.MORA%TYPE;
    VN_TOTAL                         SGCORESYS.CO_MULTACUOTA.TOTAL%TYPE;
    VN_AMORTIZADOMONTO               SGCORESYS.CO_MULTACUOTA.AMORTIZADOMONTO%TYPE;
    VN_AMORTIZADOCAPITAL             SGCORESYS.CO_MULTACUOTA.AMORTIZADOCAPITAL%TYPE;
    VN_SALDOCUOTA                    SGCORESYS.CO_MULTACUOTA.SALDOCUOTA%TYPE;
    VN_SALDOCAPITAL                  SGCORESYS.CO_MULTACUOTA.SALDOCAPITAL%TYPE;
    VD_FECHAAPROBACIONCUOTA          SGCORESYS.CO_MULTACUOTA.FECHAAPROBACIONCUOTA%TYPE;
    VV_PERIODOCUOTA                  SGCORESYS.CO_MULTACUOTA.PERIODOCUOTA%TYPE;
    VV_VOUCHER                       SGCORESYS.CO_MULTACUOTA.VOUCHER%TYPE;
    VV_COMPROBANTEINGRESO            SGCORESYS.CO_MULTACUOTA.COMPROBANTEINGRESO%TYPE;
    VN_SALDOINTERES                  SGCORESYS.CO_MULTACUOTA.SALDOINTERES%TYPE;
    VN_SALDOMORA                     SGCORESYS.CO_MULTACUOTA.SALDOMORA%TYPE;
    VN_SALDOCOSTAS                   SGCORESYS.CO_MULTACUOTA.SALDOCOSTAS%TYPE;
    VN_AMORTIZADOINTERES             SGCORESYS.CO_MULTACUOTA.AMORTIZADOINTERES%TYPE;
    VN_AMORTIZADOMORA                SGCORESYS.CO_MULTACUOTA.AMORTIZADOMORA%TYPE;
    VN_AMORTIZADOCOSTA               SGCORESYS.CO_MULTACUOTA.AMORTIZADOCOSTA%TYPE;

    CURSOR CURSOR_CUOTAS_CRONOGRAMA(P_ID_MULTA NUMBER) IS
      SELECT ECDE.*
        FROM USR_SICOB.T_SCOB_EXPED_CRONOGRAMA_DET ECDE
       INNER JOIN USR_SICOB.T_SCOB_EXPED_CRONOGRAMA CRONO
         ON CRONO.ID_EXPED_CRONOGRAMA_PAGO = ECDE.ID_EXPED_CRONOGRAMA_PAGO
         AND CRONO.ESTADO = '1'
       INNER JOIN USR_SICOB.T_SCOB_EXPEDIENTE_MULTA EXMU
         ON EXMU.ID_EXPEDIENTE = CRONO.ID_EXPEDIENTE
         AND EXMU.ESTADO = '1'
       INNER JOIN USR_SICOB.T_SCOB_EXPEDIENTE EXPE
         ON EXPE.ID_EXPEDIENTE = EXMU.ID_EXPEDIENTE
         AND EXPE.ESTADO = '1'
       WHERE  ECDE.ESTADO = '1'
         AND EXMU.ID_MULTA = P_ID_MULTA;
  
  BEGIN
  
    BEGIN
    
      SELECT MULTA.*
        INTO REG_T_SCOB_MULTA
        FROM USR_SICOB.T_SCOB_MULTA MULTA
       WHERE MULTA.ID_MULTA = PIN_ID_MULTA
             AND MULTA.ESTADO = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE MULTA CON : ID_MULTA => ' ||
                          PIN_ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MULTA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT EXPE.*
        INTO REG_T_SCOB_EXPEDIENTE
         FROM USR_SICOB.T_SCOB_EXPEDIENTE_MULTA EXMU
        LEFT JOIN USR_SICOB.T_SCOB_EXPEDIENTE EXPE
          ON EXPE.ID_EXPEDIENTE = EXMU.ID_EXPEDIENTE
         AND EXPE.ESTADO = '1'
          WHERE EXMU.ID_MULTA = REG_T_SCOB_MULTA.ID_MULTA
         AND EXMU.ESTADO = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POV_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE EXPEDIENTE CON : ID_MULTA => ' ||
                          REG_T_SCOB_MULTA.ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POV_MSG_RESULT := 'NO CONFORME : SP_REGISTRO_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_EXPEDIENTE - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    OPEN CURSOR_CUOTAS_CRONOGRAMA(PIN_ID_MULTA);
      
      LOOP 
          
        FETCH CURSOR_CUOTAS_CRONOGRAMA INTO REG_T_SCOB_EXPED_CRONOGRAMA_DET;
           
        EXIT WHEN CURSOR_CUOTAS_CRONOGRAMA%NOTFOUND;    
        
        VV_IDENTIFICADOR := REG_T_SCOB_MULTA.ANIO || REG_T_SCOB_MULTA.CUM;
        VN_CUOTA := REG_T_SCOB_EXPED_CRONOGRAMA_DET.NRO_CUOTA;
        VD_FECHAVENCIMIENTO := REG_T_SCOB_EXPED_CRONOGRAMA_DET.FEC_VENCIMIENTO;
        VN_CAPITAL := REG_T_SCOB_EXPED_CRONOGRAMA_DET.MONTO_DEUDA_AMORTIZA_CRONO;
        VN_INTERESES := REG_T_SCOB_EXPED_CRONOGRAMA_DET.MONTO_INTERES;
        VN_IMPORTE := REG_T_SCOB_EXPED_CRONOGRAMA_DET.MONTO_TOTAL_DEUDA;
        VN_GASTOS := REG_T_SCOB_EXPED_CRONOGRAMA_DET.MONTO_COSTAS;
        VN_MORA := REG_T_SCOB_EXPED_CRONOGRAMA_DET.MONTO_INTERES_MORATORIO;
        VN_TOTAL := REG_T_SCOB_EXPED_CRONOGRAMA_DET.MONTO_TOTAL_DEUDA;
        VN_AMORTIZADOMONTO := REG_T_SCOB_EXPED_CRONOGRAMA_DET.TOTAL_AMORTIZADO_DEUDA;
        VN_AMORTIZADOCAPITAL := REG_T_SCOB_EXPED_CRONOGRAMA_DET.TOTAL_AMORTIZADO;
        VN_SALDOCUOTA := REG_T_SCOB_EXPED_CRONOGRAMA_DET.SALDO_TOTAL_DEUDA;
        VN_SALDOCAPITAL := REG_T_SCOB_EXPED_CRONOGRAMA_DET.SALDO;
        VD_FECHAAPROBACIONCUOTA := TRUNC(REG_T_SCOB_EXPEDIENTE.FEC_ESTADO_EXPEDIENTE);
        VV_PERIODOCUOTA := TO_CHAR(REG_T_SCOB_EXPEDIENTE.FEC_ESTADO_EXPEDIENTE,'YYYYMM');
        VV_VOUCHER := NULL;
        --REVISAR QUERY12 EN QUE MOMENTO APLICARLO
        VV_COMPROBANTEINGRESO := NULL;
        VN_SALDOINTERES := REG_T_SCOB_EXPED_CRONOGRAMA_DET.SALDO_IC;
        VN_SALDOMORA := REG_T_SCOB_EXPED_CRONOGRAMA_DET.SALDO_IM;
        VN_SALDOCOSTAS := REG_T_SCOB_EXPED_CRONOGRAMA_DET.SALDO_COSTAS;
        VN_AMORTIZADOINTERES := REG_T_SCOB_EXPED_CRONOGRAMA_DET.TOTAL_AMORTIZADO_IC;
        VN_AMORTIZADOMORA := REG_T_SCOB_EXPED_CRONOGRAMA_DET.TOTAL_AMORTIZADO_IM;
        VN_AMORTIZADOCOSTA := REG_T_SCOB_EXPED_CRONOGRAMA_DET.TOTAL_AMORTIZADO_COSTAS;

        INSERT INTO SGCORESYS.CO_MULTACUOTA
          (
            IDENTIFICADOR,
            CUOTA,
            FECHAVENCIMIENTO,
            CAPITAL,
            INTERESES,
            IMPORTE,
            GASTOS,
            MORA,
            TOTAL,
            AMORTIZADOMONTO,
            AMORTIZADOCAPITAL,
            SALDOCUOTA,
            SALDOCAPITAL,
            FECHAAPROBACIONCUOTA,
            PERIODOCUOTA,
            VOUCHER,
            COMPROBANTEINGRESO,
            SALDOINTERES,
            SALDOMORA,
            SALDOCOSTAS,
            AMORTIZADOINTERES,
            AMORTIZADOMORA,
            AMORTIZADOCOSTA
          )
        VALUES
          (
            VV_IDENTIFICADOR,
            VN_CUOTA,
            VD_FECHAVENCIMIENTO,
            VN_CAPITAL,
            VN_INTERESES,
            VN_IMPORTE,
            VN_GASTOS,
            VN_MORA,
            VN_TOTAL,
            VN_AMORTIZADOMONTO,
            VN_AMORTIZADOCAPITAL,
            VN_SALDOCUOTA,
            VN_SALDOCAPITAL,
            VD_FECHAAPROBACIONCUOTA,
            VV_PERIODOCUOTA,
            VV_VOUCHER,
            VV_COMPROBANTEINGRESO,
            VN_SALDOINTERES,
            VN_SALDOMORA,
            VN_SALDOCOSTAS,
            VN_AMORTIZADOINTERES,
            VN_AMORTIZADOMORA,
            VN_AMORTIZADOCOSTA
          );
                     
      END LOOP;
        
    CLOSE CURSOR_CUOTAS_CRONOGRAMA;        
    
    COMMIT;
    
    PON_COD_RESULT := 0;
    POV_MSG_RESULT := 'CONFORME';
  
  EXCEPTION
    WHEN EX_CONTROLADO THEN
      PON_COD_RESULT := -1;
    WHEN OTHERS THEN
      PON_COD_RESULT := -1;
      POV_MSG_RESULT := 'ERROR NO CONTROLADO : SP_CREAR_CRONOGRAMA_SICOB_A_SIA - ERROR : ' || SQLERRM;
                        
  END SP_CREAR_CRONOGRAMA_SICOB_A_SIA;
  
END;
/
