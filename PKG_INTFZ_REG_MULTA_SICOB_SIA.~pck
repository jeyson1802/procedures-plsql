CREATE OR REPLACE PACKAGE PKG_INTFZ_REG_MULTA_SICOB_SIA IS

  -- ******************************************************************************
  -- Descripción: Procedure que registra la multa en SIA
  --
  -- Input Parameters: PIN_NU_ID_MULTA
  --
  -- Output Parameters: POV_COD_RESULT , POUT_VC_MSG_RESULT
  --
  --
  -- Author:      Victor Bendezú
  -- Proyecto:    Migración de SICOB a SIA
  --
  -- Revisiones
  -- Fecha            Autor         Motivo del cambio    
  -- ----------------------------------------------------------------
  -- 10/12/2022     Victor Bendezú  Migración de SICOB a SIA    
  -- ***************************************************************      
  PROCEDURE SP_I_MULTA_SICOB_A_SIA(PIN_NU_ID_MULTA    IN NUMBER,
                                   POUT_NU_COD_RESULT OUT NUMBER,
                                   POUT_VC_MSG_RESULT OUT VARCHAR2);

  -- ******************************************************************************
  -- Descripción: Procedure que actualiza la multa en SIA
  --
  -- Input Parameters: PIN_NU_ID_MULTA
  --
  -- Output Parameters: POV_COD_RESULT , POUT_VC_MSG_RESULT
  --
  --
  -- Author:      Victor Bendezú
  -- Proyecto:    Migración de SICOB a SIA
  --
  -- Revisiones
  -- Fecha            Autor         Motivo del cambio    
  -- ----------------------------------------------------------------
  -- 10/12/2022     Victor Bendezú  Migración de SICOB a SIA    
  -- ***************************************************************      
  PROCEDURE SP_U_MULTA_SICOB_A_SIA(PIN_NU_ID_MULTA    IN NUMBER,
                                   POUT_NU_COD_RESULT OUT NUMBER,
                                   POUT_VC_MSG_RESULT OUT VARCHAR2);

  -- ******************************************************************************
  -- Descripción: Procedure que registra los denunciados y denunciantes en SIA
  --
  -- Input Parameters: PIN_NU_ID_MULTA
  --
  -- Output Parameters: POV_COD_RESULT , POUT_VC_MSG_RESULT
  --
  --
  -- Author:      Victor Bendezú
  -- Proyecto:    Migración de SICOB a SIA
  --
  -- Revisiones
  -- Fecha            Autor         Motivo del cambio    
  -- ----------------------------------------------------------------
  -- 10/12/2022     Victor Bendezú  Migración de SICOB a SIA    
  -- ***************************************************************      
  PROCEDURE SP_I_PERSONA_SICOB_A_SIA(PIN_NU_ID_MULTA    IN NUMBER,
                                     PIV_IDENTIFICADOR  IN VARCHAR2,
                                     POUT_NU_COD_RESULT OUT NUMBER,
                                     POUT_VC_MSG_RESULT OUT VARCHAR2);

  -- ******************************************************************************
  -- Descripción: Procedure que recepciona la multa en SIA
  --
  -- Input Parameters: PIN_NU_ID_MULTA
  --
  -- Output Parameters: POV_COD_RESULT , POUT_VC_MSG_RESULT
  --
  --
  -- Author:      Victor Bendezú
  -- Proyecto:    Migración de SICOB a SIA
  --
  -- Revisiones
  -- Fecha            Autor         Motivo del cambio    
  -- ----------------------------------------------------------------
  -- 10/12/2022     Victor Bendezú  Migración de SICOB a SIA    
  -- ***************************************************************      
  PROCEDURE SP_I_RECEP_MULTA_SICOB_A_SIA(PIN_NU_ID_MULTA    IN NUMBER,
                                         POUT_NU_COD_RESULT OUT NUMBER,
                                         POUT_VC_MSG_RESULT OUT VARCHAR2);

  -- ******************************************************************************
  -- Descripción: Procedure que asigna la multa en SIA
  --
  -- Input Parameters: PIN_NU_ID_MULTA
  --
  -- Output Parameters: POV_COD_RESULT , POUT_VC_MSG_RESULT
  --
  --
  -- Author:      Victor Bendezú
  -- Proyecto:    Migración de SICOB a SIA
  --
  -- Revisiones
  -- Fecha            Autor         Motivo del cambio    
  -- ----------------------------------------------------------------
  -- 10/12/2022     Victor Bendezú  Migración de SICOB a SIA    
  -- ***************************************************************      
  PROCEDURE SP_I_ASIGNAR_MULTA_SICOB_A_SIA(PIN_NU_ID_MULTA    IN NUMBER,
                                           POUT_NU_COD_RESULT OUT NUMBER,
                                           POUT_VC_MSG_RESULT OUT VARCHAR2);

  -- ******************************************************************************
  -- Descripción: Procedure que genera expediente de la multa en SIA
  --
  -- Input Parameters: PIN_NU_ID_MULTA
  --
  -- Output Parameters: POV_COD_RESULT , POUT_VC_MSG_RESULT
  --
  --
  -- Author:      Victor Bendezú
  -- Proyecto:    Migración de SICOB a SIA
  --
  -- Revisiones
  -- Fecha            Autor         Motivo del cambio    
  -- ----------------------------------------------------------------
  -- 10/12/2022     Victor Bendezú  Migración de SICOB a SIA    
  -- ***************************************************************      
  PROCEDURE SP_I_EXPEDIENTE_SICOB_A_SIA(PIN_NU_ID_MULTA    IN NUMBER,
                                        POUT_NU_COD_RESULT OUT NUMBER,
                                        POUT_VC_MSG_RESULT OUT VARCHAR2);

  -- ******************************************************************************
  -- Descripción: Procedure que marca la multa en SIA por el File
  --
  -- Input Parameters: PIN_NU_ID_MULTA
  --
  -- Output Parameters: POV_COD_RESULT , POUT_VC_MSG_RESULT
  --
  --
  -- Author:      Victor Bendezú
  -- Proyecto:    Migración de SICOB a SIA
  --
  -- Revisiones
  -- Fecha            Autor         Motivo del cambio    
  -- ----------------------------------------------------------------
  -- 10/12/2022     Victor Bendezú  Migración de SICOB a SIA    
  -- ***************************************************************      
  PROCEDURE SP_U_MARCAR_MULTA_SICOB_A_SIA(PIN_NU_ID_MULTA    IN NUMBER,
                                          POUT_NU_COD_RESULT OUT NUMBER,
                                          POUT_VC_MSG_RESULT OUT VARCHAR2);

  -- ******************************************************************************
  -- Descripción: Procedure que envia el archivo Central migrado al SIA
  --
  -- Input Parameters: PIN_NU_ID_MULTA
  --
  -- Output Parameters: POV_COD_RESULT , POUT_VC_MSG_RESULT
  --
  --
  -- Author:      Victor Bendezú
  -- Proyecto:    Migración de SICOB a SIA
  --
  -- Revisiones
  -- Fecha            Autor         Motivo del cambio    
  -- ----------------------------------------------------------------
  -- 10/12/2022     Victor Bendezú  Migración de SICOB a SIA    
  -- ***************************************************************      
  PROCEDURE SP_I_ARCH_CENTRAL_SICOB_A_SIA(PIN_NU_ID_MULTA    IN NUMBER,
                                          POUT_NU_COD_RESULT OUT NUMBER,
                                          POUT_VC_MSG_RESULT OUT VARCHAR2);

  -- ******************************************************************************
  -- Descripción: Procedure que genear Cronograma de Pago al SIA
  --
  -- Input Parameters: PIN_NU_ID_MULTA
  --
  -- Output Parameters: POV_COD_RESULT , POUT_VC_MSG_RESULT
  --
  --
  -- Author:      Victor Bendezú
  -- Proyecto:    Migración de SICOB a SIA
  --
  -- Revisiones
  -- Fecha            Autor         Motivo del cambio    
  -- ----------------------------------------------------------------
  -- 10/12/2022     Victor Bendezú  Migración de SICOB a SIA    
  -- ***************************************************************      
  PROCEDURE SP_I_CRONOGRAMA_SICOB_A_SIA(PIN_NU_ID_MULTA    IN NUMBER,
                                        POUT_NU_COD_RESULT OUT NUMBER,
                                        POUT_VC_MSG_RESULT OUT VARCHAR2);

  -- ******************************************************************************
  -- Descripción: Procedure que proceso coactivo al SIA
  --
  -- Input Parameters: PIN_NU_ID_MULTA
  --
  -- Output Parameters: POV_COD_RESULT , POUT_VC_MSG_RESULT
  --
  --
  -- Author:      Victor Bendezú
  -- Proyecto:    Migración de SICOB a SIA
  --
  -- Revisiones
  -- Fecha            Autor         Motivo del cambio    
  -- ----------------------------------------------------------------
  -- 10/12/2022     Victor Bendezú  Migración de SICOB a SIA    
  -- ***************************************************************      
  PROCEDURE SP_I_COACTIVO_SICOB_A_SIA(PIN_NU_ID_MULTA    IN NUMBER,
                                      POUT_NU_COD_RESULT OUT NUMBER,
                                      POUT_VC_MSG_RESULT OUT VARCHAR2);
END;
/
CREATE OR REPLACE PACKAGE BODY PKG_INTFZ_REG_MULTA_SICOB_SIA IS

  EX_CONTROLADO EXCEPTION;

  PROCEDURE SP_I_MULTA_SICOB_A_SIA(PIN_NU_ID_MULTA   IN NUMBER,
                                   POUT_NU_COD_RESULT OUT NUMBER,
                                   POUT_VC_MSG_RESULT OUT VARCHAR2) IS
  
    V_REG_T_SCOB_MULTA                 USR_SICOB.T_SCOB_MULTA%ROWTYPE;
    V_REG_T_SCOB_MULTA_DETAL           USR_SICOB.T_SCOB_MULTA_DETAL%ROWTYPE;
    V_REG_T_SCOB_MATERIA               USR_SICOB.T_SCOB_MATERIA%ROWTYPE;
    V_REG_T_SCOB_TIPO_PROCEDIMIENTO    USR_SICOB.T_SCOB_TIPO_PROCEDIMIENTO%ROWTYPE;
    V_REG_T_SCOB_ORGANO_RESOLUTIVO     USR_SICOB.T_SCOB_ORGANO_RESOLUTIVO%ROWTYPE;
    V_REG_T_SCOB_SEDE                  USR_SICOB.T_SCOB_SEDE%ROWTYPE;
    V_REG_T_SCOB_SUBMATERIA            USR_SICOB.T_SCOB_SUBMATERIA%ROWTYPE;    
    V_REG_T_SCOB_ORG_RESOL_MATERIA     USR_SICOB.T_SCOB_ORG_RESOL_MATERIA%ROWTYPE;    
    
    V_VC_IDENTIFICADOR                 SGCORESYS.CO_MULTA.IDENTIFICADOR%TYPE;
    V_VC_ANIO                          SGCORESYS.CO_MULTA.ANIO%TYPE;
    V_VC_ORIGEN                        SGCORESYS.CO_MULTA.ORIGEN%TYPE;
    V_VD_FECHAREGISTRO                 SGCORESYS.CO_MULTA.FECHAREGISTRO%TYPE;
    V_VC_CODTIPOPROCEDIMIENTO          SGCORESYS.CO_MULTA.CODTIPOPROCEDIMIENTO%TYPE;
    V_VC_CODAREA                       SGCORESYS.CO_MULTA.CODAREA%TYPE;
    V_VC_CODSEDE                       SGCORESYS.CO_MULTA.CODSEDE%TYPE;
    V_VC_CODMATERIA                    SGCORESYS.CO_MULTA.CODMATERIA%TYPE;
    V_VC_CODSUBMATERIA                 SGCORESYS.CO_MULTA.CODSUBMATERIA%TYPE;
    V_VC_EXPEDIENTE                    SGCORESYS.CO_MULTA.EXPEDIENTE%TYPE;
    V_VC_EXPEDIENTEANTERIOR            SGCORESYS.CO_MULTA.EXPEDIENTEANTERIOR%TYPE;
    V_VC_ORPSRESOLNUMERO               SGCORESYS.CO_MULTA.ORPSRESOLNUMERO%TYPE;
    V_VD_ORPSRESOLFECHAREGISTRO        SGCORESYS.CO_MULTA.ORPSRESOLFECHAREGISTRO%TYPE;
    V_VD_ORPSRESOLFECHAEMISION         SGCORESYS.CO_MULTA.ORPSRESOLFECHAEMISION%TYPE;
    V_VD_ORPSRESOLFECHANOTIFICACION    SGCORESYS.CO_MULTA.ORPSRESOLFECHANOTIFICACION%TYPE;
    V_VD_ORPSFECHAAPELACION            SGCORESYS.CO_MULTA.ORPSFECHAAPELACION%TYPE;
    V_VC_ORPSUSUARIO                   SGCORESYS.CO_MULTA.ORPSUSUARIO%TYPE;
    V_NU_ORPSCANTIDADDIAS              SGCORESYS.CO_MULTA.ORPSCANTIDADDIAS%TYPE;
    V_VC_COMRESOLNUMERO                SGCORESYS.CO_MULTA.COMRESOLNUMERO%TYPE;
    V_VD_COMRESOLFECHAREGISTRO         SGCORESYS.CO_MULTA.COMRESOLFECHAREGISTRO%TYPE;
    V_VD_COMRESOLFECHAEMISION          SGCORESYS.CO_MULTA.COMRESOLFECHAEMISION%TYPE;
    V_VD_COMRESOLFECHANOTIFICACION     SGCORESYS.CO_MULTA.COMRESOLFECHANOTIFICACION%TYPE;
    V_VD_COMFECHAREVISION              SGCORESYS.CO_MULTA.COMFECHAREVISION%TYPE;
    V_VC_COMUSUARIO                    SGCORESYS.CO_MULTA.COMUSUARIO%TYPE;
    V_NU_COMCANTIDADDIAS               SGCORESYS.CO_MULTA.COMCANTIDADDIAS%TYPE;
    V_VC_SALARESOLNUMERO               SGCORESYS.CO_MULTA.SALARESOLNUMERO%TYPE;
    V_VD_SALARESOLFECHAREGISTRO        SGCORESYS.CO_MULTA.SALARESOLFECHAREGISTRO%TYPE;
    V_VD_SALARESOLFECHAEMISION         SGCORESYS.CO_MULTA.SALARESOLFECHAEMISION%TYPE;
    V_VD_SALARESOLFECHANOTIFICACION    SGCORESYS.CO_MULTA.SALARESOLFECHANOTIFICACION%TYPE;
    V_VC_SALAUSUARIO                   SGCORESYS.CO_MULTA.SALAUSUARIO%TYPE;
    V_NU_SALACANTIDADDIAS              SGCORESYS.CO_MULTA.SALACANTIDADDIAS%TYPE;
    V_VC_TIPOMULTA                     SGCORESYS.CO_MULTA.TIPOMULTA%TYPE;
    V_NU_DENUNCIANTE                   SGCORESYS.CO_MULTA.DENUNCIANTE%TYPE;
    V_NU_DENUNCIADO                    SGCORESYS.CO_MULTA.DENUNCIADO%TYPE;
    V_VC_DENUNCIANTENOMBRE             SGCORESYS.CO_MULTA.DENUNCIANTENOMBRE%TYPE;
    V_NU_SANCIONADO                    SGCORESYS.CO_MULTA.SANCIONADO%TYPE;
    V_VC_CODCLASIFICACION              SGCORESYS.CO_MULTA.CODCLASIFICACION%TYPE;
    V_VC_CODACTIVIDAD                  SGCORESYS.CO_MULTA.CODACTIVIDAD%TYPE;
    V_VC_ASOCUPORCFLAG                 SGCORESYS.CO_MULTA.ASOCUPORCFLAG%TYPE;
    V_NU_ASOCUPORC                     SGCORESYS.CO_MULTA.ASOCUPORC%TYPE;
    V_NU_UITNRO                        SGCORESYS.CO_MULTA.UITNRO%TYPE;
    V_NU_UITMONTOCAPITAL               SGCORESYS.CO_MULTA.UITMONTOCAPITAL%TYPE;
    V_NU_INTERESES                     SGCORESYS.CO_MULTA.INTERESES%TYPE;
    V_NU_MORA                          SGCORESYS.CO_MULTA.MORA%TYPE;
    V_NU_GASTOS                        SGCORESYS.CO_MULTA.GASTOS%TYPE;
    V_NU_AMORTIZADO                    SGCORESYS.CO_MULTA.AMORTIZADO%TYPE;
    V_NU_AMORTIZADOINTERESES           SGCORESYS.CO_MULTA.AMORTIZADOINTERESES%TYPE;
    V_NU_AMORTIZADOMORA                SGCORESYS.CO_MULTA.AMORTIZADOMORA%TYPE;
    V_NU_AMORTIZADOGASTOS              SGCORESYS.CO_MULTA.AMORTIZADOGASTOS%TYPE;
    V_NU_SALDO                         SGCORESYS.CO_MULTA.SALDO%TYPE;
    V_NU_SALDOINTERESES                SGCORESYS.CO_MULTA.SALDOINTERESES%TYPE;
    V_NU_SALDOMORA                     SGCORESYS.CO_MULTA.SALDOMORA%TYPE;
    V_NU_SALDOGASTOS                   SGCORESYS.CO_MULTA.SALDOGASTOS%TYPE;
    V_VC_ESTADOMULTA                   SGCORESYS.CO_MULTA.ESTADOMULTA%TYPE;
    V_NU_DESCUENTOMULTA                SGCORESYS.CO_MULTA.DESCUENTOMULTA%TYPE;
    V_VD_SECFECHAREGISTRO              SGCORESYS.CO_MULTA.SECFECHAREGISTRO%TYPE;
    V_VC_FILEANIO                      SGCORESYS.CO_MULTA.FILEANIO%TYPE;
    V_VD_FILEFECHARECEPCION            SGCORESYS.CO_MULTA.FILEFECHARECEPCION%TYPE;
    V_VC_FILENUMERO                    SGCORESYS.CO_MULTA.FILENUMERO%TYPE;
    V_VC_NUMEROINGRESO                 SGCORESYS.CO_MULTA.NUMEROINGRESO%TYPE;
    V_VC_ESTADOMULTACOBRANZA           SGCORESYS.CO_MULTA.ESTADOMULTACOBRANZA%TYPE;
    V_VC_CODMOTIVOMULTA                SGCORESYS.CO_MULTA.CODMOTIVOMULTA%TYPE;
    V_VD_FECHAOBSERVACION              SGCORESYS.CO_MULTA.FECHAOBSERVACION%TYPE;
    V_VD_FECHAULTIMOINGRESO            SGCORESYS.CO_MULTA.FECHAULTIMOINGRESO%TYPE;
    V_VC_COBEXPEDIENTENRO              SGCORESYS.CO_MULTA.COBEXPEDIENTENRO%TYPE;
    V_VD_COBEXPEDIENTEFECHA            SGCORESYS.CO_MULTA.COBEXPEDIENTEFECHA%TYPE;
    V_VC_COBGESTOR                     SGCORESYS.CO_MULTA.COBGESTOR%TYPE;
    V_VD_FECHAASIGNACION               SGCORESYS.CO_MULTA.FECHAASIGNACION%TYPE;
    V_VD_FECHACARTA                    SGCORESYS.CO_MULTA.FECHACARTA%TYPE;
    V_VD_RECFECHAEMISION               SGCORESYS.CO_MULTA.RECFECHAEMISION%TYPE;
    V_VD_RECFECHANOTIFICACION          SGCORESYS.CO_MULTA.RECFECHANOTIFICACION%TYPE;
    V_VC_EMBARGOFLAG                   SGCORESYS.CO_MULTA.EMBARGOFLAG%TYPE;
    V_VC_COBEXPEDIENTEESTADO           SGCORESYS.CO_MULTA.COBEXPEDIENTEESTADO%TYPE;
    V_VC_COBEXPEDIENTEMOTIVO           SGCORESYS.CO_MULTA.COBEXPEDIENTEMOTIVO%TYPE;
    V_VD_COBFECHAULTIMO                SGCORESYS.CO_MULTA.COBFECHAULTIMO%TYPE;
    V_VD_FECHARIESGO                   SGCORESYS.CO_MULTA.FECHARIESGO%TYPE;
    V_VC_COBROEXPECTATIVA              SGCORESYS.CO_MULTA.COBROEXPECTATIVA%TYPE;
    V_VC_REGION                        SGCORESYS.CO_MULTA.REGION%TYPE;
    V_VC_ENVIONUMERO                   SGCORESYS.CO_MULTA.ENVIONUMERO%TYPE;
    V_VD_ENVIOFECHA                    SGCORESYS.CO_MULTA.ENVIOFECHA%TYPE;
    V_VC_UBICACIONFISICA               SGCORESYS.CO_MULTA.UBICACIONFISICA%TYPE;
    V_NU_CUOTA                         SGCORESYS.CO_MULTA.CUOTA%TYPE;
    V_VD_FECHAVENCIMIENTO              SGCORESYS.CO_MULTA.FECHAVENCIMIENTO%TYPE;
    V_VC_ESTADOPAGO                    SGCORESYS.CO_MULTA.ESTADOPAGO%TYPE;
    V_VC_CODIGOMULTA                   SGCORESYS.CO_MULTA.CODIGOMULTA%TYPE;
    V_VC_AECNOTIFICACIONESTADO         SGCORESYS.CO_MULTA.AECNOTIFICACIONESTADO%TYPE;
    V_VD_AECNOTIFICACIONFECHA          SGCORESYS.CO_MULTA.AECNOTIFICACIONFECHA%TYPE;
    V_VC_TIPOFRACCIONAMIENTO           SGCORESYS.CO_MULTA.TIPOFRACCIONAMIENTO%TYPE;
    V_VC_COMRESOLANIO                  SGCORESYS.CO_MULTA.COMRESOLANIO%TYPE;
    V_VC_COMRESOLCODIGO                SGCORESYS.CO_MULTA.COMRESOLCODIGO%TYPE;
    V_VC_CUOTANOTIFICACIONESTADO       SGCORESYS.CO_MULTA.CUOTANOTIFICACIONESTADO%TYPE;
    V_VD_CUOTANOTIFICACIONFECHA        SGCORESYS.CO_MULTA.CUOTANOTIFICACIONFECHA%TYPE;
    V_VC_EXPEDCOBRANZAANIO             SGCORESYS.CO_MULTA.EXPEDCOBRANZAANIO%TYPE;
    V_VC_CUMANIO                       SGCORESYS.CO_MULTA.CUMANIO%TYPE;
    V_VC_COBRANZADUDOSAESTADO          SGCORESYS.CO_MULTA.COBRANZADUDOSAESTADO%TYPE;
    V_VC_COBRANZADUDOSAVOUCHER         SGCORESYS.CO_MULTA.COBRANZADUDOSAVOUCHER%TYPE;
    V_VD_COBRANZADUDOSAFECHA           SGCORESYS.CO_MULTA.COBRANZADUDOSAFECHA%TYPE;
    V_VC_COBRANZADUDOSAVOUCHERCLEARING SGCORESYS.CO_MULTA.COBRANZADUDOSAVOUCHERCLEARING%TYPE;
    V_VD_COBRANZADUDOSAFECHACLEARING   SGCORESYS.CO_MULTA.COBRANZADUDOSAFECHACLEARING%TYPE;
    V_VC_AECCONCILIACIONESTADO         SGCORESYS.CO_MULTA.AECCONCILIACIONESTADO%TYPE;
    V_VD_AECCONCILIACIONFECHA          SGCORESYS.CO_MULTA.AECCONCILIACIONFECHA%TYPE;
    V_VC_CODAREADESCRIPCION            SGCORESYS.CO_MULTA.CODAREADESCRIPCION%TYPE;
    V_VC_REFERENCIATIPO                SGCORESYS.CO_MULTA.REFERENCIATIPO%TYPE;
    V_VC_REFERENCIANUMERO              SGCORESYS.CO_MULTA.REFERENCIANUMERO%TYPE;
    V_VC_CASTIGORESOLNUMERO            SGCORESYS.CO_MULTA.CASTIGORESOLNUMERO%TYPE;
    V_VD_CASTIGORESOLFECHA             SGCORESYS.CO_MULTA.CASTIGORESOLFECHA%TYPE;
    V_VD_CUOTAFINRESOLFECHA            SGCORESYS.CO_MULTA.CUOTAFINRESOLFECHA%TYPE;
    V_VD_CUOTAFINRESOLNUMERO           SGCORESYS.CO_MULTA.CUOTAFINRESOLNUMERO%TYPE;
    V_VC_CUOTAFINFECHA                 SGCORESYS.CO_MULTA.CUOTAFINFECHA%TYPE;
    V_VC_CASTIGOOBSERVACION            SGCORESYS.CO_MULTA.CASTIGOOBSERVACION%TYPE;
    V_VC_CUOTAFINMOTIVO                SGCORESYS.CO_MULTA.CUOTAFINMOTIVO%TYPE;
    V_NU_COMPROBANTEINGRESO            SGCORESYS.CO_MULTA.COMPROBANTEINGRESO%TYPE;
    V_VC_CODMOTIVOMULTACOB             SGCORESYS.CO_MULTA.CODMOTIVOMULTACOB%TYPE;
    V_VC_CODCENTROCOSTO                SGCORESYS.CO_MULTA.CODCENTROCOSTO%TYPE;
    V_VC_DECLNUMERO01                  SGCORESYS.CO_MULTA.DECLNUMERO01%TYPE;
    V_VD_DECLFECHAEMISION01            SGCORESYS.CO_MULTA.DECLFECHAEMISION01%TYPE;
    V_VD_DECLFECHANOTIF01              SGCORESYS.CO_MULTA.DECLFECHANOTIF01%TYPE;
    V_VC_DECLNUMERO02                  SGCORESYS.CO_MULTA.DECLNUMERO02%TYPE;
    V_VD_DECLFECHAEMISION02            SGCORESYS.CO_MULTA.DECLFECHAEMISION02%TYPE;
    V_VD_DECLFECHANOTIF02              SGCORESYS.CO_MULTA.DECLFECHANOTIF02%TYPE;
    V_VC_DECLNUMERO03                  SGCORESYS.CO_MULTA.DECLNUMERO03%TYPE;
    V_VD_DECLFECHAEMISION03            SGCORESYS.CO_MULTA.DECLFECHAEMISION03%TYPE;
    V_VD_DECLFECHANOTIF03              SGCORESYS.CO_MULTA.DECLFECHANOTIF03%TYPE;
    V_NU_SALDOCAPITAL                  SGCORESYS.CO_MULTA.SALDOCAPITAL%TYPE;
    V_NU_SALDOINTERES                  SGCORESYS.CO_MULTA.SALDOINTERES%TYPE;
    V_NU_MONTOPROVISIONDUDOSA          SGCORESYS.CO_MULTA.MONTOPROVISIONDUDOSA%TYPE;
    V_NU_MONTOPROVISIONDUDOSAGASTOS    SGCORESYS.CO_MULTA.MONTOPROVISIONDUDOSAGASTOS%TYPE;
    V_NU_MONTOVOUCHERCOBRANZA          SGCORESYS.CO_MULTA.MONTOVOUCHERCOBRANZA%TYPE;
    V_NU_MONTOVOUCHERCOBRANZAGASTOS    SGCORESYS.CO_MULTA.MONTOVOUCHERCOBRANZAGASTOS%TYPE;
    
    V_VC_ME_IDENTIFICADOR                 SGCORESYS.CO_MULTAESTADO.IDENTIFICADOR%TYPE;
    V_NU_ME_SECUENCIA                     SGCORESYS.CO_MULTAESTADO.SECUENCIA%TYPE;
    V_VC_ME_ESTADOMULTA                   SGCORESYS.CO_MULTAESTADO.ESTADOMULTA%TYPE;
    V_VC_ME_ESTADOPAGO                    SGCORESYS.CO_MULTAESTADO.ESTADOPAGO%TYPE;
    V_VC_ME_ESTADOCOBRANZA                SGCORESYS.CO_MULTAESTADO.ESTADOCOBRANZA%TYPE;
    V_VC_ME_ESTADOEXPEDIENTE              SGCORESYS.CO_MULTAESTADO.ESTADOEXPEDIENTE%TYPE;
    V_NU_ME_CAPITAL                       SGCORESYS.CO_MULTAESTADO.CAPITAL%TYPE;
    V_NU_ME_INTERESES                     SGCORESYS.CO_MULTAESTADO.INTERESES%TYPE;
    V_NU_ME_MORA                          SGCORESYS.CO_MULTAESTADO.MORA%TYPE;
    V_NU_ME_GASTOS                        SGCORESYS.CO_MULTAESTADO.GASTOS%TYPE;
    V_NU_ME_CAPITAL_ANT                   SGCORESYS.CO_MULTAESTADO.CAPITAL_ANT%TYPE;
    V_NU_ME_INTERESES_ANT                 SGCORESYS.CO_MULTAESTADO.INTERESES_ANT%TYPE;
    V_NU_ME_MORA_ANT                      SGCORESYS.CO_MULTAESTADO.MORA_ANT%TYPE;
    V_NU_ME_GASTOS_ANT                    SGCORESYS.CO_MULTAESTADO.GASTOS_ANT%TYPE;
    V_VC_ME_CODIGOMOTIVOEXPEDIENTE        SGCORESYS.CO_MULTAESTADO.CODIGOMOTIVOEXPEDIENTE%TYPE;
    V_VD_ME_FECHA                         SGCORESYS.CO_MULTAESTADO.FECHA%TYPE;
    V_VC_ME_CONTABILIZACIONPENDIENTEFLAG  SGCORESYS.CO_MULTAESTADO.CONTABILIZACIONPENDIENTEFLAG%TYPE;
    V_VC_ME_PERIODO                       SGCORESYS.CO_MULTAESTADO.PERIODO%TYPE;
    V_VC_ME_VOUCHER                       SGCORESYS.CO_MULTAESTADO.VOUCHER%TYPE;
    V_VC_ME_ULTIMOUSUARIO                 SGCORESYS.CO_MULTAESTADO.ULTIMOUSUARIO%TYPE;
    V_VD_ME_ULTIMAFECHAMODIF              SGCORESYS.CO_MULTAESTADO.ULTIMAFECHAMODIF%TYPE;
    V_VC_ME_CODIGOMULTA                   SGCORESYS.CO_MULTAESTADO.CODIGOMULTA%TYPE;
    V_VC_ME_ORCONCILIACIONESTADO          SGCORESYS.CO_MULTAESTADO.ORCONCILIACIONESTADO%TYPE;
    V_VD_ME_ORCONCILIACIONFECHA           SGCORESYS.CO_MULTAESTADO.ORCONCILIACIONFECHA%TYPE;
    V_VC_ME_CODAREA                       SGCORESYS.CO_MULTAESTADO.CODAREA%TYPE;
    V_NU_ME_UITNRO                        SGCORESYS.CO_MULTAESTADO.UITNRO%TYPE;
    V_NU_ME_SALDOCAPITAL                  SGCORESYS.CO_MULTAESTADO.SALDOCAPITAL%TYPE;
    V_NU_ME_SALDOINTERES                  SGCORESYS.CO_MULTAESTADO.SALDOINTERES%TYPE;
    V_NU_ME_SALDOMORA                     SGCORESYS.CO_MULTAESTADO.SALDOMORA%TYPE;
    V_NU_ME_SALDOGASTOS                   SGCORESYS.CO_MULTAESTADO.SALDOGASTOS%TYPE;
    V_VC_ME_CUENTAPROVISION               SGCORESYS.CO_MULTAESTADO.CUENTAPROVISION%TYPE;
    
    V_VC_DESCRIPCION_TIPO_MULTA           USR_SICOB.T_SCOB_TABLA_DET.TXT_DESCRIPCION%TYPE;    
          
  BEGIN
        
    BEGIN
    
      SELECT MULTA.*
        INTO V_REG_T_SCOB_MULTA
        FROM USR_SICOB.T_SCOB_MULTA MULTA
       WHERE MULTA.ID_MULTA = PIN_NU_ID_MULTA
             AND MULTA.ESTADO = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE MULTA CON : ID_MULTA => ' ||
                          PIN_NU_ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MULTA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT MULTA_DETALLE.*
        INTO V_REG_T_SCOB_MULTA_DETAL
        FROM USR_SICOB.T_SCOB_MULTA_DETAL MULTA_DETALLE
       WHERE MULTA_DETALLE.ID_MULTA = PIN_NU_ID_MULTA
             AND MULTA_DETALLE.ESTADO = '1'
             AND MULTA_DETALLE.FLG_ACTUAL = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE DETALLE DE MULTA CON : ID_MULTA => ' ||
                          PIN_NU_ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MULTA_DETAL - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT MATE.*
        INTO V_REG_T_SCOB_MATERIA
        FROM USR_SICOB.T_SCOB_MATERIA MATE
       WHERE MATE.ID_MATERIA = V_REG_T_SCOB_MULTA.ID_MATERIA;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE MATERIA CON : ID_MATERIA => ' ||
                          V_REG_T_SCOB_MULTA.ID_MATERIA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MATERIA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT PROC.*
        INTO V_REG_T_SCOB_TIPO_PROCEDIMIENTO
        FROM USR_SICOB.T_SCOB_TIPO_PROCEDIMIENTO PROC
       WHERE PROC.ID_TIPO_PROCEDIMIENTO = V_REG_T_SCOB_MATERIA.ID_TIPO_PROCEDIMIENTO;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE TIPO DE PROCEDIMIENTO CON : ID_TIPO_PROCEDIMIENTO => ' ||
                          V_REG_T_SCOB_MATERIA.ID_TIPO_PROCEDIMIENTO;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_TIPO_PROCEDIMIENTO - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT ORGA.*
        INTO V_REG_T_SCOB_ORGANO_RESOLUTIVO
        FROM USR_SICOB.T_SCOB_ORGANO_RESOLUTIVO ORGA
       WHERE ORGA.ID_ORGANO_RESOLUTIVO = V_REG_T_SCOB_MULTA_DETAL.ID_ORGANO_RESOLUTIVO;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE ORGANO RESOLUTIVO CON : ID_ORGANO_RESOLUTIVO => ' ||
                          V_REG_T_SCOB_MULTA_DETAL.ID_ORGANO_RESOLUTIVO;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_ORGANO_RESOLUTIVO - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT SEDE.*
        INTO V_REG_T_SCOB_SEDE
        FROM USR_SICOB.T_SCOB_SEDE SEDE
       WHERE SEDE.ID_SEDE = V_REG_T_SCOB_MULTA.ID_SEDE;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE SEDE CON : ID_SEDE => ' ||
                          V_REG_T_SCOB_MULTA.ID_SEDE;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_SEDE - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT SUBM.*
        INTO V_REG_T_SCOB_SUBMATERIA
        FROM USR_SICOB.T_SCOB_SUBMATERIA SUBM
       WHERE SUBM.ID_SUBMATERIA = V_REG_T_SCOB_MULTA.ID_SUB_MATERIA;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE SUBMATERIA CON : ID_SUBMATERIA => ' ||
                          V_REG_T_SCOB_MULTA.ID_SUB_MATERIA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_SUBMATERIA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
     SELECT T.TXT_DESCRIPCION INTO V_VC_DESCRIPCION_TIPO_MULTA
       FROM USR_SICOB.T_SCOB_TABLA_DET T
      WHERE T.ID_TABLA = 45
        AND T.COD_INTERNO = V_REG_T_SCOB_MULTA.FLG_TIPO_MULTA;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE TIPO DE MULTA CON : FLG_TIPO_MULTA => ' ||
                          V_REG_T_SCOB_MULTA.FLG_TIPO_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_TABLA_DET - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;          
    
    BEGIN
    
      SELECT OXM.*
        INTO V_REG_T_SCOB_ORG_RESOL_MATERIA
        FROM USR_SICOB.T_SCOB_ORG_RESOL_MATERIA OXM
        WHERE OXM.ID_ORGANO_RESOLUTIVO = V_REG_T_SCOB_MULTA_DETAL.ID_ORGANO_RESOLUTIVO 
              AND OXM.ID_MATERIA = V_REG_T_SCOB_MULTA.ID_MATERIA 
              AND OXM.ESTADO = '1';
        
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE ORGANO RESOLUTIVO DE LA MATERIA CON : ID_ORGANO_RESOLUTIVO => ' ||
                          V_REG_T_SCOB_MULTA_DETAL.ID_ORGANO_RESOLUTIVO;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_ORG_RESOL_MATERIA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    
    V_VC_IDENTIFICADOR := V_REG_T_SCOB_MULTA.ANIO || V_REG_T_SCOB_MULTA.CUM;
    V_VC_ANIO := V_REG_T_SCOB_MULTA.ANIO;
    V_VC_ORIGEN := '1'; -- ORIGEN SICOB
    V_VD_FECHAREGISTRO := V_REG_T_SCOB_MULTA.FEC_INGRESO;
    V_VC_CODTIPOPROCEDIMIENTO := V_REG_T_SCOB_TIPO_PROCEDIMIENTO.CODIGO;
    V_VC_CODAREA := V_REG_T_SCOB_ORGANO_RESOLUTIVO.CODIGO;
    V_VC_CODSEDE := V_REG_T_SCOB_SEDE.CODIGO;
    V_VC_CODMATERIA := V_REG_T_SCOB_MATERIA.CODIGO;
    V_VC_CODSUBMATERIA := V_REG_T_SCOB_SUBMATERIA.CODIGO;
    V_VC_EXPEDIENTE := V_REG_T_SCOB_MULTA.NRO_EXP_ADMINISTRATIVO;
    V_VC_EXPEDIENTEANTERIOR := V_REG_T_SCOB_MULTA_DETAL.NRO_EXP_NIVEL;
    
    --TIPO_INSTANCIA DEL ÓRGANO RESOLUTIVO = 1
    IF V_REG_T_SCOB_ORGANO_RESOLUTIVO.TIPO_INSTANCIA = 1 THEN
      V_VC_ORPSRESOLNUMERO := V_REG_T_SCOB_MULTA_DETAL.NRO_RESOLUCION;
      V_VD_ORPSRESOLFECHAREGISTRO := TRUNC(V_REG_T_SCOB_MULTA_DETAL.AUDFECCREACION);
      V_VD_ORPSRESOLFECHAEMISION := V_REG_T_SCOB_MULTA_DETAL.FEC_RESOLUCION;
      V_VD_ORPSRESOLFECHANOTIFICACION := V_REG_T_SCOB_MULTA_DETAL.FEC_NOTIFICACION_RESOLUCION;
      V_VD_ORPSFECHAAPELACION := V_REG_T_SCOB_MULTA_DETAL.FEC_ESTADO_SGTE_INSTANCIA;
      V_NU_ORPSCANTIDADDIAS := V_REG_T_SCOB_MULTA_DETAL.NU_CANTIDAD_DIAS;
    END IF;
    
    V_VC_ORPSUSUARIO := TO_CHAR(SYSDATE, 'DD/MM/YY');
    
    --TIPO_INSTANCIA DEL ÓRGANO RESOLUTIVO = 2
    IF V_REG_T_SCOB_ORGANO_RESOLUTIVO.TIPO_INSTANCIA = 2 THEN
      V_VC_COMRESOLNUMERO := V_REG_T_SCOB_MULTA_DETAL.NRO_RESOLUCION;
      V_VD_COMRESOLFECHAREGISTRO := TRUNC(V_REG_T_SCOB_MULTA_DETAL.AUDFECCREACION);
      V_VD_COMRESOLFECHAEMISION := V_REG_T_SCOB_MULTA_DETAL.FEC_RESOLUCION;
      V_VD_COMRESOLFECHANOTIFICACION := V_REG_T_SCOB_MULTA_DETAL.FEC_NOTIFICACION_RESOLUCION;
      V_VD_COMFECHAREVISION := V_REG_T_SCOB_MULTA_DETAL.FEC_ESTADO_SGTE_INSTANCIA;
      V_VC_COMUSUARIO := V_REG_T_SCOB_MULTA_DETAL.AUDUSUCREACION;
      V_NU_COMCANTIDADDIAS := V_REG_T_SCOB_MULTA_DETAL.NU_CANTIDAD_DIAS;
    END IF;
    
    --TIPO_INSTANCIA DEL ÓRGANO RESOLUTIVO = 3
    IF V_REG_T_SCOB_ORGANO_RESOLUTIVO.TIPO_INSTANCIA = 3 THEN
      V_VC_SALARESOLNUMERO := V_REG_T_SCOB_MULTA_DETAL.NRO_RESOLUCION;
      V_VD_SALARESOLFECHAREGISTRO := TRUNC(V_REG_T_SCOB_MULTA_DETAL.AUDFECCREACION);
      V_VD_SALARESOLFECHAEMISION := V_REG_T_SCOB_MULTA_DETAL.FEC_RESOLUCION;
      V_VD_SALARESOLFECHANOTIFICACION := V_REG_T_SCOB_MULTA_DETAL.FEC_NOTIFICACION_RESOLUCION;
      V_VC_SALAUSUARIO := V_REG_T_SCOB_MULTA_DETAL.AUDUSUCREACION;
      V_NU_SALACANTIDADDIAS := V_REG_T_SCOB_MULTA_DETAL.NU_CANTIDAD_DIAS;
    END IF;
    
    V_VC_TIPOMULTA := SUBSTR(V_VC_DESCRIPCION_TIPO_MULTA, 1, 1);
    IF NVL(V_REG_T_SCOB_MULTA_DETAL.POR_ASOCU, '0') = '0' THEN
      V_VC_ASOCUPORCFLAG := 'N';
    ELSE 
      V_VC_ASOCUPORCFLAG := 'S';
    END IF;
        
    V_NU_ASOCUPORC := NVL(V_REG_T_SCOB_MULTA_DETAL.POR_ASOCU, 0);
    V_NU_UITNRO := NVL(V_REG_T_SCOB_MULTA_DETAL.VALOR_UIT, 0);
    V_NU_UITMONTOCAPITAL := V_REG_T_SCOB_MULTA.MONTO_UIT;
    V_NU_INTERESES := V_REG_T_SCOB_MULTA.MONTO_INTERES;
    V_NU_MORA := V_REG_T_SCOB_MULTA.MONTO_INTERES_MORATORIO;
    V_NU_GASTOS := V_REG_T_SCOB_MULTA.MONTO_COSTAS;
    V_NU_AMORTIZADO := V_REG_T_SCOB_MULTA.TOTAL_AMORTIZADO;
    V_NU_AMORTIZADOINTERESES := V_REG_T_SCOB_MULTA.TOTAL_AMORTIZADO_IM;
    V_NU_AMORTIZADOMORA := V_REG_T_SCOB_MULTA.TOTAL_AMORTIZADO_IC;
    V_NU_AMORTIZADOGASTOS := V_REG_T_SCOB_MULTA.TOTAL_AMORTIZADO_COSTAS;
    V_NU_SALDO := V_REG_T_SCOB_MULTA.SALDO;
    V_NU_SALDOINTERESES := V_REG_T_SCOB_MULTA.SALDO_IC;
    V_NU_SALDOMORA := V_REG_T_SCOB_MULTA.SALDO_IM;
    V_NU_SALDOGASTOS := V_REG_T_SCOB_MULTA.SALDO_COSTAS;
    V_VC_ESTADOMULTA := V_REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
    
    IF V_REG_T_SCOB_MULTA.COD_ESTADO_PAGO = '4' THEN
      V_NU_DESCUENTOMULTA := V_REG_T_SCOB_MULTA.PORCENTAJE_DESCUENTO;
    ELSE 
      V_NU_DESCUENTOMULTA := NULL;
    END IF;
    
    V_VD_SECFECHAREGISTRO := V_REG_T_SCOB_MULTA.FEC_GENERACION_SEC;
    V_VC_FILEANIO := V_REG_T_SCOB_MULTA.ANIO_FILE_AEC;
    V_VD_FILEFECHARECEPCION := V_REG_T_SCOB_MULTA.FEC_INGRESO_AEC;   
    V_VC_ESTADOMULTACOBRANZA := V_REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
    V_VD_FECHAOBSERVACION := V_REG_T_SCOB_MULTA.FEC_ULT_IMPROCEDENCIA;
    V_VD_FECHAULTIMOINGRESO := V_REG_T_SCOB_MULTA.FEC_INGRESO_FILE;
    V_VD_FECHAASIGNACION := V_REG_T_SCOB_MULTA.FECHA_ASIG_COBRANZA;
    V_VD_FECHACARTA := V_REG_T_SCOB_MULTA.FEC_ULT_GEN_PRECOACTIVA;
    V_VD_RECFECHAEMISION := V_REG_T_SCOB_MULTA.FEC_EMISION_REC;
    V_VD_RECFECHANOTIFICACION := V_REG_T_SCOB_MULTA.FEC_NOTIF_REC;
    V_VD_FECHARIESGO := SYSDATE;
    V_VC_ESTADOPAGO := V_REG_T_SCOB_MULTA.FLG_TIPO_MULTA;
    V_VC_CODAREADESCRIPCION := V_REG_T_SCOB_ORGANO_RESOLUTIVO.DESCRIPCION;
    IF V_REG_T_SCOB_MULTA.COD_MOTIVO = 0 THEN
      V_VC_EMBARGOFLAG := NULL;
    ELSE 
      V_VC_EMBARGOFLAG := V_REG_T_SCOB_MULTA.COD_MOTIVO;
    END IF;
    V_VC_CODCENTROCOSTO := V_REG_T_SCOB_ORG_RESOL_MATERIA.VC_SIA_CC_COD;

    INSERT INTO SGCORESYS.CO_MULTA (
      IDENTIFICADOR,
      ANIO,
      ORIGEN,
      FECHAREGISTRO,
      CODTIPOPROCEDIMIENTO,
      CODAREA,
      CODSEDE,
      CODMATERIA,
      CODSUBMATERIA,
      EXPEDIENTE,
      EXPEDIENTEANTERIOR,
      ORPSRESOLNUMERO,
      ORPSRESOLFECHAREGISTRO,
      ORPSRESOLFECHAEMISION,
      ORPSRESOLFECHANOTIFICACION,
      ORPSFECHAAPELACION,
      ORPSUSUARIO,
      ORPSCANTIDADDIAS,
      COMRESOLNUMERO,
      COMRESOLFECHAREGISTRO,
      COMRESOLFECHAEMISION,
      COMRESOLFECHANOTIFICACION,
      COMFECHAREVISION,
      COMUSUARIO,
      COMCANTIDADDIAS,
      SALARESOLNUMERO,
      SALARESOLFECHAREGISTRO,
      SALARESOLFECHAEMISION,
      SALARESOLFECHANOTIFICACION,
      SALAUSUARIO,
      SALACANTIDADDIAS,
      TIPOMULTA,
      DENUNCIANTE,
      DENUNCIADO,
      DENUNCIANTENOMBRE,
      SANCIONADO,
      CODCLASIFICACION,
      CODACTIVIDAD,
      ASOCUPORCFLAG,
      ASOCUPORC,
      UITNRO,
      UITMONTOCAPITAL,
      INTERESES,
      MORA,
      GASTOS,
      AMORTIZADO,
      AMORTIZADOINTERESES,
      AMORTIZADOMORA,
      AMORTIZADOGASTOS,
      SALDO,
      SALDOINTERESES,
      SALDOMORA,
      SALDOGASTOS,
      ESTADOMULTA,
      DESCUENTOMULTA,
      SECFECHAREGISTRO,
      FILEANIO,
      FILEFECHARECEPCION,
      FILENUMERO,
      NUMEROINGRESO,
      ESTADOMULTACOBRANZA,
      CODMOTIVOMULTA,
      FECHAOBSERVACION,
      FECHAULTIMOINGRESO,
      COBEXPEDIENTENRO,
      COBEXPEDIENTEFECHA,
      COBGESTOR,
      FECHAASIGNACION,
      FECHACARTA,
      RECFECHAEMISION,
      RECFECHANOTIFICACION,
      EMBARGOFLAG,
      COBEXPEDIENTEESTADO,
      COBEXPEDIENTEMOTIVO,
      COBFECHAULTIMO,
      FECHARIESGO,
      COBROEXPECTATIVA,
      REGION,
      ENVIONUMERO,
      ENVIOFECHA,
      UBICACIONFISICA,
      CUOTA,
      FECHAVENCIMIENTO,
      ESTADOPAGO,
      CODIGOMULTA,
      AECNOTIFICACIONESTADO,
      AECNOTIFICACIONFECHA,
      TIPOFRACCIONAMIENTO,
      COMRESOLANIO,
      COMRESOLCODIGO,
      CUOTANOTIFICACIONESTADO,
      CUOTANOTIFICACIONFECHA,
      EXPEDCOBRANZAANIO,
      CUMANIO,
      COBRANZADUDOSAESTADO,
      COBRANZADUDOSAVOUCHER,
      COBRANZADUDOSAFECHA,
      COBRANZADUDOSAVOUCHERCLEARING,
      COBRANZADUDOSAFECHACLEARING,
      AECCONCILIACIONESTADO,
      AECCONCILIACIONFECHA,
      CODAREADESCRIPCION,
      REFERENCIATIPO,
      REFERENCIANUMERO,
      CASTIGORESOLNUMERO,
      CASTIGORESOLFECHA,
      CUOTAFINRESOLFECHA,
      CUOTAFINRESOLNUMERO,
      CUOTAFINFECHA,
      CASTIGOOBSERVACION,
      CUOTAFINMOTIVO,
      COMPROBANTEINGRESO,
      CODMOTIVOMULTACOB,
      CODCENTROCOSTO,
      DECLNUMERO01,
      DECLFECHAEMISION01,
      DECLFECHANOTIF01,
      DECLNUMERO02,
      DECLFECHAEMISION02,
      DECLFECHANOTIF02,
      DECLNUMERO03,
      DECLFECHAEMISION03,
      DECLFECHANOTIF03,
      SALDOCAPITAL,
      SALDOINTERES,
      MONTOPROVISIONDUDOSA,
      MONTOPROVISIONDUDOSAGASTOS,
      MONTOVOUCHERCOBRANZA,
      MONTOVOUCHERCOBRANZAGASTOS)
    VALUES
    (
      V_VC_IDENTIFICADOR,
      V_VC_ANIO,
      V_VC_ORIGEN,
      V_VD_FECHAREGISTRO,
      V_VC_CODTIPOPROCEDIMIENTO,
      V_VC_CODAREA,
      V_VC_CODSEDE,
      V_VC_CODMATERIA,
      V_VC_CODSUBMATERIA,
      V_VC_EXPEDIENTE,
      V_VC_EXPEDIENTEANTERIOR,
      V_VC_ORPSRESOLNUMERO,
      V_VD_ORPSRESOLFECHAREGISTRO,
      V_VD_ORPSRESOLFECHAEMISION,
      V_VD_ORPSRESOLFECHANOTIFICACION,
      V_VD_ORPSFECHAAPELACION,
      V_VC_ORPSUSUARIO,
      V_NU_ORPSCANTIDADDIAS,
      V_VC_COMRESOLNUMERO,
      V_VD_COMRESOLFECHAREGISTRO,
      V_VD_COMRESOLFECHAEMISION,
      V_VD_COMRESOLFECHANOTIFICACION,
      V_VD_COMFECHAREVISION,
      V_VC_COMUSUARIO,
      V_NU_COMCANTIDADDIAS,
      V_VC_SALARESOLNUMERO,
      V_VD_SALARESOLFECHAREGISTRO,
      V_VD_SALARESOLFECHAEMISION,
      V_VD_SALARESOLFECHANOTIFICACION,
      V_VC_SALAUSUARIO,
      V_NU_SALACANTIDADDIAS,
      V_VC_TIPOMULTA,
      V_NU_DENUNCIANTE,
      V_NU_DENUNCIADO,
      V_VC_DENUNCIANTENOMBRE,
      V_NU_SANCIONADO,
      V_VC_CODCLASIFICACION,
      V_VC_CODACTIVIDAD,
      V_VC_ASOCUPORCFLAG,
      V_NU_ASOCUPORC,
      V_NU_UITNRO,
      V_NU_UITMONTOCAPITAL,
      V_NU_INTERESES,
      V_NU_MORA,
      V_NU_GASTOS,
      V_NU_AMORTIZADO,
      V_NU_AMORTIZADOINTERESES,
      V_NU_AMORTIZADOMORA,
      V_NU_AMORTIZADOGASTOS,
      V_NU_SALDO,
      V_NU_SALDOINTERESES,
      V_NU_SALDOMORA,
      V_NU_SALDOGASTOS,
      V_VC_ESTADOMULTA,
      V_NU_DESCUENTOMULTA,
      V_VD_SECFECHAREGISTRO,
      V_VC_FILEANIO,
      V_VD_FILEFECHARECEPCION,
      V_VC_FILENUMERO,
      V_VC_NUMEROINGRESO,
      V_VC_ESTADOMULTACOBRANZA,
      V_VC_CODMOTIVOMULTA,
      V_VD_FECHAOBSERVACION,
      V_VD_FECHAULTIMOINGRESO,
      V_VC_COBEXPEDIENTENRO,
      V_VD_COBEXPEDIENTEFECHA,
      V_VC_COBGESTOR,
      V_VD_FECHAASIGNACION,
      V_VD_FECHACARTA,
      V_VD_RECFECHAEMISION,
      V_VD_RECFECHANOTIFICACION,
      V_VC_EMBARGOFLAG,
      V_VC_COBEXPEDIENTEESTADO,
      V_VC_COBEXPEDIENTEMOTIVO,
      V_VD_COBFECHAULTIMO,
      V_VD_FECHARIESGO,
      V_VC_COBROEXPECTATIVA,
      V_VC_REGION,
      V_VC_ENVIONUMERO,
      V_VD_ENVIOFECHA,
      V_VC_UBICACIONFISICA,
      V_NU_CUOTA,
      V_VD_FECHAVENCIMIENTO,
      V_VC_ESTADOPAGO,
      V_VC_CODIGOMULTA,
      V_VC_AECNOTIFICACIONESTADO,
      V_VD_AECNOTIFICACIONFECHA,
      V_VC_TIPOFRACCIONAMIENTO,
      V_VC_COMRESOLANIO,
      V_VC_COMRESOLCODIGO,
      V_VC_CUOTANOTIFICACIONESTADO,
      V_VD_CUOTANOTIFICACIONFECHA,
      V_VC_EXPEDCOBRANZAANIO,
      V_VC_CUMANIO,
      V_VC_COBRANZADUDOSAESTADO,
      V_VC_COBRANZADUDOSAVOUCHER,
      V_VD_COBRANZADUDOSAFECHA,
      V_VC_COBRANZADUDOSAVOUCHERCLEARING,
      V_VD_COBRANZADUDOSAFECHACLEARING,
      V_VC_AECCONCILIACIONESTADO,
      V_VD_AECCONCILIACIONFECHA,
      V_VC_CODAREADESCRIPCION,
      V_VC_REFERENCIATIPO,
      V_VC_REFERENCIANUMERO,
      V_VC_CASTIGORESOLNUMERO,
      V_VD_CASTIGORESOLFECHA,
      V_VD_CUOTAFINRESOLFECHA,
      V_VD_CUOTAFINRESOLNUMERO,
      V_VC_CUOTAFINFECHA,
      V_VC_CASTIGOOBSERVACION,
      V_VC_CUOTAFINMOTIVO,
      V_NU_COMPROBANTEINGRESO,
      V_VC_CODMOTIVOMULTACOB,
      V_VC_CODCENTROCOSTO,
      V_VC_DECLNUMERO01,
      V_VD_DECLFECHAEMISION01,
      V_VD_DECLFECHANOTIF01,
      V_VC_DECLNUMERO02,
      V_VD_DECLFECHAEMISION02,
      V_VD_DECLFECHANOTIF02,
      V_VC_DECLNUMERO03,
      V_VD_DECLFECHAEMISION03,
      V_VD_DECLFECHANOTIF03,
      V_NU_SALDOCAPITAL,
      V_NU_SALDOINTERES,
      V_NU_MONTOPROVISIONDUDOSA,
      V_NU_MONTOPROVISIONDUDOSAGASTOS,
      V_NU_MONTOVOUCHERCOBRANZA,
      V_NU_MONTOVOUCHERCOBRANZAGASTOS
    );
    
    V_VC_ME_IDENTIFICADOR := V_REG_T_SCOB_MULTA.ANIO || V_REG_T_SCOB_MULTA.CUM;
    V_NU_ME_SECUENCIA := 1;
    V_VC_ME_ESTADOMULTA := V_REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
    V_VC_ME_ESTADOPAGO := V_REG_T_SCOB_MULTA.FLG_TIPO_MULTA;
    V_VC_ME_ESTADOCOBRANZA := V_REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
    V_NU_ME_CAPITAL := V_REG_T_SCOB_MULTA.MONTO_UIT;
    V_NU_ME_INTERESES := V_REG_T_SCOB_MULTA.MONTO_INTERES;
    V_NU_ME_MORA := V_REG_T_SCOB_MULTA.MONTO_INTERES_MORATORIO;
    V_NU_ME_GASTOS := V_REG_T_SCOB_MULTA.MONTO_COSTAS;
    V_NU_ME_CAPITAL_ANT := V_REG_T_SCOB_MULTA.MONTO_UIT;
    V_NU_ME_INTERESES_ANT := V_REG_T_SCOB_MULTA.MONTO_INTERES;
    V_NU_ME_MORA_ANT := V_REG_T_SCOB_MULTA.MONTO_INTERES_MORATORIO;
    V_NU_ME_GASTOS_ANT := V_REG_T_SCOB_MULTA.MONTO_COSTAS;
    V_VD_ME_FECHA := SYSDATE;
    V_VC_ME_CONTABILIZACIONPENDIENTEFLAG := 'S';
    V_VC_ME_PERIODO := TO_CHAR(SYSDATE, 'YYYYMM');
    V_VC_ME_VOUCHER := NULL;
    V_VC_ME_ULTIMOUSUARIO := 'SIA';
    V_VD_ME_ULTIMAFECHAMODIF := SYSDATE;
    V_VC_ME_CODIGOMULTA := NULL;
    V_VC_ME_ORCONCILIACIONESTADO := NULL;
    V_VD_ME_ORCONCILIACIONFECHA := NULL;
    V_VC_ME_CODAREA := V_REG_T_SCOB_ORGANO_RESOLUTIVO.CODIGO;
    V_NU_ME_UITNRO := NVL(V_REG_T_SCOB_MULTA_DETAL.VALOR_UIT, 0);
    V_NU_ME_SALDOCAPITAL := V_REG_T_SCOB_MULTA.SALDO;
    V_NU_ME_SALDOINTERES := V_REG_T_SCOB_MULTA.SALDO_IC;
    V_NU_ME_SALDOMORA := V_REG_T_SCOB_MULTA.SALDO_IM;
    V_NU_ME_SALDOGASTOS := V_REG_T_SCOB_MULTA.SALDO_COSTAS;
    V_VC_ME_CUENTAPROVISION := NULL;
    
    INSERT INTO SGCORESYS.CO_MULTAESTADO(
      IDENTIFICADOR,
      SECUENCIA,
      ESTADOMULTA,
      ESTADOPAGO,
      ESTADOCOBRANZA,
      ESTADOEXPEDIENTE,
      CAPITAL,
      INTERESES,
      MORA,
      GASTOS,
      CAPITAL_ANT,
      INTERESES_ANT,
      MORA_ANT,
      GASTOS_ANT,
      CODIGOMOTIVOEXPEDIENTE,
      FECHA,
      CONTABILIZACIONPENDIENTEFLAG,
      PERIODO,
      VOUCHER,
      ULTIMOUSUARIO,
      ULTIMAFECHAMODIF,
      CODIGOMULTA,
      ORCONCILIACIONESTADO,
      ORCONCILIACIONFECHA,
      CODAREA,
      UITNRO,
      SALDOCAPITAL,
      SALDOINTERES,
      SALDOMORA,
      SALDOGASTOS,
      CUENTAPROVISION)
      VALUES(
      V_VC_ME_IDENTIFICADOR,
      V_NU_ME_SECUENCIA,
      V_VC_ME_ESTADOMULTA,
      V_VC_ME_ESTADOPAGO,
      V_VC_ME_ESTADOCOBRANZA,
      V_VC_ME_ESTADOEXPEDIENTE,
      V_NU_ME_CAPITAL,
      V_NU_ME_INTERESES,
      V_NU_ME_MORA,
      V_NU_ME_GASTOS,
      V_NU_ME_CAPITAL_ANT,
      V_NU_ME_INTERESES_ANT,
      V_NU_ME_MORA_ANT,
      V_NU_ME_GASTOS_ANT,
      V_VC_ME_CODIGOMOTIVOEXPEDIENTE,
      V_VD_ME_FECHA,
      V_VC_ME_CONTABILIZACIONPENDIENTEFLAG,
      V_VC_ME_PERIODO,
      V_VC_ME_VOUCHER,
      V_VC_ME_ULTIMOUSUARIO,
      V_VD_ME_ULTIMAFECHAMODIF,
      V_VC_ME_CODIGOMULTA,
      V_VC_ME_ORCONCILIACIONESTADO,
      V_VD_ME_ORCONCILIACIONFECHA,
      V_VC_ME_CODAREA,
      V_NU_ME_UITNRO,
      V_NU_ME_SALDOCAPITAL,
      V_NU_ME_SALDOINTERES,
      V_NU_ME_SALDOMORA,
      V_NU_ME_SALDOGASTOS,
      V_VC_ME_CUENTAPROVISION);       
    
    --REGISTRAR PERSONAS EN CASO SE AÑADAN
    SP_I_PERSONA_SICOB_A_SIA(PIN_NU_ID_MULTA,
                                    V_VC_IDENTIFICADOR,
                                    POUT_NU_COD_RESULT,
                                    POUT_VC_MSG_RESULT);
                                    
                                    
    IF POUT_NU_COD_RESULT <> 0 THEN
       RAISE EX_CONTROLADO;
    END IF;
    
    COMMIT;
    
    POUT_NU_COD_RESULT := 0;
    POUT_VC_MSG_RESULT := 'CONFORME';
  
  EXCEPTION
    WHEN EX_CONTROLADO THEN
      POUT_NU_COD_RESULT := -1;
    WHEN OTHERS THEN
      POUT_NU_COD_RESULT := -1;
      POUT_VC_MSG_RESULT := 'ERROR NO CONTROLADO : SP_I_MULTA_SICOB_A_SIA - ERROR : ' ||
                        SQLERRM;
  END SP_I_MULTA_SICOB_A_SIA;
  
  PROCEDURE SP_U_MULTA_SICOB_A_SIA(PIN_NU_ID_MULTA   IN NUMBER,
                                   POUT_NU_COD_RESULT OUT NUMBER,
                                   POUT_VC_MSG_RESULT OUT VARCHAR2) IS
  
    V_REG_T_SCOB_MULTA                 USR_SICOB.T_SCOB_MULTA%ROWTYPE;
    V_REG_T_SCOB_MULTA_DETAL           USR_SICOB.T_SCOB_MULTA_DETAL%ROWTYPE;
    V_REG_T_SCOB_MATERIA               USR_SICOB.T_SCOB_MATERIA%ROWTYPE;
    V_REG_T_SCOB_TIPO_PROCEDIMIENTO    USR_SICOB.T_SCOB_TIPO_PROCEDIMIENTO%ROWTYPE;
    V_REG_T_SCOB_ORGANO_RESOLUTIVO     USR_SICOB.T_SCOB_ORGANO_RESOLUTIVO%ROWTYPE;
    V_REG_T_SCOB_SEDE                  USR_SICOB.T_SCOB_SEDE%ROWTYPE;
    V_REG_T_SCOB_SUBMATERIA            USR_SICOB.T_SCOB_SUBMATERIA%ROWTYPE;    
    V_REG_T_SCOB_ORG_RESOL_MATERIA     USR_SICOB.T_SCOB_ORG_RESOL_MATERIA%ROWTYPE;    
    
    V_VC_IDENTIFICADOR                 SGCORESYS.CO_MULTA.IDENTIFICADOR%TYPE;
    V_VC_ANIO                          SGCORESYS.CO_MULTA.ANIO%TYPE;
    V_VC_ORIGEN                        SGCORESYS.CO_MULTA.ORIGEN%TYPE;
    V_VD_FECHAREGISTRO                 SGCORESYS.CO_MULTA.FECHAREGISTRO%TYPE;
    V_VC_CODTIPOPROCEDIMIENTO          SGCORESYS.CO_MULTA.CODTIPOPROCEDIMIENTO%TYPE;
    V_VC_CODAREA                       SGCORESYS.CO_MULTA.CODAREA%TYPE;
    V_VC_CODSEDE                       SGCORESYS.CO_MULTA.CODSEDE%TYPE;
    V_VC_CODMATERIA                    SGCORESYS.CO_MULTA.CODMATERIA%TYPE;
    V_VC_CODSUBMATERIA                 SGCORESYS.CO_MULTA.CODSUBMATERIA%TYPE;
    V_VC_EXPEDIENTE                    SGCORESYS.CO_MULTA.EXPEDIENTE%TYPE;
    V_VC_EXPEDIENTEANTERIOR            SGCORESYS.CO_MULTA.EXPEDIENTEANTERIOR%TYPE;
    V_VC_ORPSRESOLNUMERO               SGCORESYS.CO_MULTA.ORPSRESOLNUMERO%TYPE;
    V_VD_ORPSRESOLFECHAREGISTRO        SGCORESYS.CO_MULTA.ORPSRESOLFECHAREGISTRO%TYPE;
    V_VD_ORPSRESOLFECHAEMISION         SGCORESYS.CO_MULTA.ORPSRESOLFECHAEMISION%TYPE;
    V_VD_ORPSRESOLFECHANOTIFICACION    SGCORESYS.CO_MULTA.ORPSRESOLFECHANOTIFICACION%TYPE;
    V_VD_ORPSFECHAAPELACION            SGCORESYS.CO_MULTA.ORPSFECHAAPELACION%TYPE;
    V_VC_ORPSUSUARIO                   SGCORESYS.CO_MULTA.ORPSUSUARIO%TYPE;
    V_NU_ORPSCANTIDADDIAS              SGCORESYS.CO_MULTA.ORPSCANTIDADDIAS%TYPE;
    V_VC_COMRESOLNUMERO                SGCORESYS.CO_MULTA.COMRESOLNUMERO%TYPE;
    V_VD_COMRESOLFECHAREGISTRO         SGCORESYS.CO_MULTA.COMRESOLFECHAREGISTRO%TYPE;
    V_VD_COMRESOLFECHAEMISION          SGCORESYS.CO_MULTA.COMRESOLFECHAEMISION%TYPE;
    V_VD_COMRESOLFECHANOTIFICACION     SGCORESYS.CO_MULTA.COMRESOLFECHANOTIFICACION%TYPE;
    V_VD_COMFECHAREVISION              SGCORESYS.CO_MULTA.COMFECHAREVISION%TYPE;
    V_VC_COMUSUARIO                    SGCORESYS.CO_MULTA.COMUSUARIO%TYPE;
    V_NU_COMCANTIDADDIAS               SGCORESYS.CO_MULTA.COMCANTIDADDIAS%TYPE;
    V_VC_SALARESOLNUMERO               SGCORESYS.CO_MULTA.SALARESOLNUMERO%TYPE;
    V_VD_SALARESOLFECHAREGISTRO        SGCORESYS.CO_MULTA.SALARESOLFECHAREGISTRO%TYPE;
    V_VD_SALARESOLFECHAEMISION         SGCORESYS.CO_MULTA.SALARESOLFECHAEMISION%TYPE;
    V_VD_SALARESOLFECHANOTIFICACION    SGCORESYS.CO_MULTA.SALARESOLFECHANOTIFICACION%TYPE;
    V_VC_SALAUSUARIO                   SGCORESYS.CO_MULTA.SALAUSUARIO%TYPE;
    V_NU_SALACANTIDADDIAS              SGCORESYS.CO_MULTA.SALACANTIDADDIAS%TYPE;
    V_VC_TIPOMULTA                     SGCORESYS.CO_MULTA.TIPOMULTA%TYPE;    
    V_VC_ASOCUPORCFLAG                 SGCORESYS.CO_MULTA.ASOCUPORCFLAG%TYPE;
    V_NU_ASOCUPORC                     SGCORESYS.CO_MULTA.ASOCUPORC%TYPE;
    V_NU_UITNRO                        SGCORESYS.CO_MULTA.UITNRO%TYPE;
    V_NU_UITMONTOCAPITAL               SGCORESYS.CO_MULTA.UITMONTOCAPITAL%TYPE;
    V_NU_INTERESES                     SGCORESYS.CO_MULTA.INTERESES%TYPE;
    V_NU_MORA                          SGCORESYS.CO_MULTA.MORA%TYPE;
    V_NU_GASTOS                        SGCORESYS.CO_MULTA.GASTOS%TYPE;
    V_NU_AMORTIZADO                    SGCORESYS.CO_MULTA.AMORTIZADO%TYPE;
    V_NU_AMORTIZADOINTERESES           SGCORESYS.CO_MULTA.AMORTIZADOINTERESES%TYPE;
    V_NU_AMORTIZADOMORA                SGCORESYS.CO_MULTA.AMORTIZADOMORA%TYPE;
    V_NU_AMORTIZADOGASTOS              SGCORESYS.CO_MULTA.AMORTIZADOGASTOS%TYPE;
    V_NU_SALDO                         SGCORESYS.CO_MULTA.SALDO%TYPE;
    V_NU_SALDOINTERESES                SGCORESYS.CO_MULTA.SALDOINTERESES%TYPE;
    V_NU_SALDOMORA                     SGCORESYS.CO_MULTA.SALDOMORA%TYPE;
    V_NU_SALDOGASTOS                   SGCORESYS.CO_MULTA.SALDOGASTOS%TYPE;
    V_VC_ESTADOMULTA                   SGCORESYS.CO_MULTA.ESTADOMULTA%TYPE;
    V_NU_DESCUENTOMULTA                SGCORESYS.CO_MULTA.DESCUENTOMULTA%TYPE;
    V_VD_SECFECHAREGISTRO              SGCORESYS.CO_MULTA.SECFECHAREGISTRO%TYPE;
    V_VC_FILEANIO                      SGCORESYS.CO_MULTA.FILEANIO%TYPE;
    V_VD_FILEFECHARECEPCION            SGCORESYS.CO_MULTA.FILEFECHARECEPCION%TYPE;    
    V_VC_ESTADOMULTACOBRANZA           SGCORESYS.CO_MULTA.ESTADOMULTACOBRANZA%TYPE;    
    V_VD_FECHAOBSERVACION              SGCORESYS.CO_MULTA.FECHAOBSERVACION%TYPE;
    V_VD_FECHAULTIMOINGRESO            SGCORESYS.CO_MULTA.FECHAULTIMOINGRESO%TYPE;    
    V_VD_FECHAASIGNACION               SGCORESYS.CO_MULTA.FECHAASIGNACION%TYPE;
    V_VD_FECHACARTA                    SGCORESYS.CO_MULTA.FECHACARTA%TYPE;
    V_VD_RECFECHAEMISION               SGCORESYS.CO_MULTA.RECFECHAEMISION%TYPE;
    V_VD_RECFECHANOTIFICACION          SGCORESYS.CO_MULTA.RECFECHANOTIFICACION%TYPE;
    V_VC_EMBARGOFLAG                   SGCORESYS.CO_MULTA.EMBARGOFLAG%TYPE;    
    V_VD_FECHARIESGO                   SGCORESYS.CO_MULTA.FECHARIESGO%TYPE;
    V_VC_ESTADOPAGO                    SGCORESYS.CO_MULTA.ESTADOPAGO%TYPE;        
    V_VC_CODAREADESCRIPCION            SGCORESYS.CO_MULTA.CODAREADESCRIPCION%TYPE;    
    V_VC_CODCENTROCOSTO                SGCORESYS.CO_MULTA.CODCENTROCOSTO%TYPE;   
    
    V_VC_ME_IDENTIFICADOR                 SGCORESYS.CO_MULTAESTADO.IDENTIFICADOR%TYPE;
    V_NU_ME_SECUENCIA                     SGCORESYS.CO_MULTAESTADO.SECUENCIA%TYPE;
    V_VC_ME_ESTADOMULTA                   SGCORESYS.CO_MULTAESTADO.ESTADOMULTA%TYPE;
    V_VC_ME_ESTADOPAGO                    SGCORESYS.CO_MULTAESTADO.ESTADOPAGO%TYPE;
    V_VC_ME_ESTADOCOBRANZA                SGCORESYS.CO_MULTAESTADO.ESTADOCOBRANZA%TYPE;
    V_VC_ME_ESTADOEXPEDIENTE              SGCORESYS.CO_MULTAESTADO.ESTADOEXPEDIENTE%TYPE;
    V_NU_ME_CAPITAL                       SGCORESYS.CO_MULTAESTADO.CAPITAL%TYPE;
    V_NU_ME_INTERESES                     SGCORESYS.CO_MULTAESTADO.INTERESES%TYPE;
    V_NU_ME_MORA                          SGCORESYS.CO_MULTAESTADO.MORA%TYPE;
    V_NU_ME_GASTOS                        SGCORESYS.CO_MULTAESTADO.GASTOS%TYPE;
    V_NU_ME_CAPITAL_ANT                   SGCORESYS.CO_MULTAESTADO.CAPITAL_ANT%TYPE;
    V_NU_ME_INTERESES_ANT                 SGCORESYS.CO_MULTAESTADO.INTERESES_ANT%TYPE;
    V_NU_ME_MORA_ANT                      SGCORESYS.CO_MULTAESTADO.MORA_ANT%TYPE;
    V_NU_ME_GASTOS_ANT                    SGCORESYS.CO_MULTAESTADO.GASTOS_ANT%TYPE;
    V_VC_ME_CODIGOMOTIVOEXPEDIENTE        SGCORESYS.CO_MULTAESTADO.CODIGOMOTIVOEXPEDIENTE%TYPE;
    V_VD_ME_FECHA                         SGCORESYS.CO_MULTAESTADO.FECHA%TYPE;
    V_VC_ME_CONTABILIZACIONPENDIENTEFLAG  SGCORESYS.CO_MULTAESTADO.CONTABILIZACIONPENDIENTEFLAG%TYPE;
    V_VC_ME_PERIODO                       SGCORESYS.CO_MULTAESTADO.PERIODO%TYPE;
    V_VC_ME_VOUCHER                       SGCORESYS.CO_MULTAESTADO.VOUCHER%TYPE;
    V_VC_ME_ULTIMOUSUARIO                 SGCORESYS.CO_MULTAESTADO.ULTIMOUSUARIO%TYPE;
    V_VD_ME_ULTIMAFECHAMODIF              SGCORESYS.CO_MULTAESTADO.ULTIMAFECHAMODIF%TYPE;
    V_VC_ME_CODIGOMULTA                   SGCORESYS.CO_MULTAESTADO.CODIGOMULTA%TYPE;
    V_VC_ME_ORCONCILIACIONESTADO          SGCORESYS.CO_MULTAESTADO.ORCONCILIACIONESTADO%TYPE;
    V_VD_ME_ORCONCILIACIONFECHA           SGCORESYS.CO_MULTAESTADO.ORCONCILIACIONFECHA%TYPE;
    V_VC_ME_CODAREA                       SGCORESYS.CO_MULTAESTADO.CODAREA%TYPE;
    V_NU_ME_UITNRO                        SGCORESYS.CO_MULTAESTADO.UITNRO%TYPE;
    V_NU_ME_SALDOCAPITAL                  SGCORESYS.CO_MULTAESTADO.SALDOCAPITAL%TYPE;
    V_NU_ME_SALDOINTERES                  SGCORESYS.CO_MULTAESTADO.SALDOINTERES%TYPE;
    V_NU_ME_SALDOMORA                     SGCORESYS.CO_MULTAESTADO.SALDOMORA%TYPE;
    V_NU_ME_SALDOGASTOS                   SGCORESYS.CO_MULTAESTADO.SALDOGASTOS%TYPE;
    V_VC_ME_CUENTAPROVISION               SGCORESYS.CO_MULTAESTADO.CUENTAPROVISION%TYPE;
    
    V_VC_DESCRIPCION_TIPO_MULTA           USR_SICOB.T_SCOB_TABLA_DET.TXT_DESCRIPCION%TYPE;    
    V_VC_ESTADOMULTA_SIA                  SGCORESYS.CO_MULTA.ESTADOMULTA%TYPE;
    V_NU_SECUENCIA_ACTUAL                 SGCORESYS.CO_MULTAESTADO.SECUENCIA%TYPE;
    
  BEGIN
        
    BEGIN
    
      SELECT MULTA.*
        INTO V_REG_T_SCOB_MULTA
        FROM USR_SICOB.T_SCOB_MULTA MULTA
       WHERE MULTA.ID_MULTA = PIN_NU_ID_MULTA
             AND MULTA.ESTADO = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE MULTA CON : ID_MULTA => ' ||
                          PIN_NU_ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MULTA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT MULTA_DETALLE.*
        INTO V_REG_T_SCOB_MULTA_DETAL
        FROM USR_SICOB.T_SCOB_MULTA_DETAL MULTA_DETALLE
       WHERE MULTA_DETALLE.ID_MULTA = PIN_NU_ID_MULTA
             AND MULTA_DETALLE.ESTADO = '1'
             AND MULTA_DETALLE.FLG_ACTUAL = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE DETALLE DE MULTA CON : ID_MULTA => ' ||
                          PIN_NU_ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MULTA_DETAL - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT MATE.*
        INTO V_REG_T_SCOB_MATERIA
        FROM USR_SICOB.T_SCOB_MATERIA MATE
       WHERE MATE.ID_MATERIA = V_REG_T_SCOB_MULTA.ID_MATERIA;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE MATERIA CON : ID_MATERIA => ' ||
                          V_REG_T_SCOB_MULTA.ID_MATERIA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MATERIA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT PROC.*
        INTO V_REG_T_SCOB_TIPO_PROCEDIMIENTO
        FROM USR_SICOB.T_SCOB_TIPO_PROCEDIMIENTO PROC
       WHERE PROC.ID_TIPO_PROCEDIMIENTO = V_REG_T_SCOB_MATERIA.ID_TIPO_PROCEDIMIENTO;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE TIPO DE PROCEDIMIENTO CON : ID_TIPO_PROCEDIMIENTO => ' ||
                          V_REG_T_SCOB_MATERIA.ID_TIPO_PROCEDIMIENTO;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_TIPO_PROCEDIMIENTO - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT ORGA.*
        INTO V_REG_T_SCOB_ORGANO_RESOLUTIVO
        FROM USR_SICOB.T_SCOB_ORGANO_RESOLUTIVO ORGA
       WHERE ORGA.ID_ORGANO_RESOLUTIVO = V_REG_T_SCOB_MULTA_DETAL.ID_ORGANO_RESOLUTIVO;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE ORGANO RESOLUTIVO CON : ID_ORGANO_RESOLUTIVO => ' ||
                          V_REG_T_SCOB_MULTA_DETAL.ID_ORGANO_RESOLUTIVO;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_ORGANO_RESOLUTIVO - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT SEDE.*
        INTO V_REG_T_SCOB_SEDE
        FROM USR_SICOB.T_SCOB_SEDE SEDE
       WHERE SEDE.ID_SEDE = V_REG_T_SCOB_MULTA.ID_SEDE;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE SEDE CON : ID_SEDE => ' ||
                          V_REG_T_SCOB_MULTA.ID_SEDE;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_SEDE - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT SUBM.*
        INTO V_REG_T_SCOB_SUBMATERIA
        FROM USR_SICOB.T_SCOB_SUBMATERIA SUBM
       WHERE SUBM.ID_SUBMATERIA = V_REG_T_SCOB_MULTA.ID_SUB_MATERIA;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE SUBMATERIA CON : ID_SUBMATERIA => ' ||
                          V_REG_T_SCOB_MULTA.ID_SUB_MATERIA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_SUBMATERIA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
     SELECT T.TXT_DESCRIPCION INTO V_VC_DESCRIPCION_TIPO_MULTA
       FROM USR_SICOB.T_SCOB_TABLA_DET T
      WHERE T.ID_TABLA = 45
        AND T.COD_INTERNO = V_REG_T_SCOB_MULTA.FLG_TIPO_MULTA;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE TIPO DE MULTA CON : FLG_TIPO_MULTA => ' ||
                          V_REG_T_SCOB_MULTA.FLG_TIPO_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_TABLA_DET - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;          
    
    BEGIN
    
      SELECT OXM.*
        INTO V_REG_T_SCOB_ORG_RESOL_MATERIA
        FROM USR_SICOB.T_SCOB_ORG_RESOL_MATERIA OXM
        WHERE OXM.ID_ORGANO_RESOLUTIVO = V_REG_T_SCOB_MULTA_DETAL.ID_ORGANO_RESOLUTIVO 
              AND OXM.ID_MATERIA = V_REG_T_SCOB_MULTA.ID_MATERIA 
              AND OXM.ESTADO = '1';
        
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE ORGANO RESOLUTIVO DE LA MATERIA CON : ID_ORGANO_RESOLUTIVO => ' ||
                          V_REG_T_SCOB_MULTA_DETAL.ID_ORGANO_RESOLUTIVO;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_ORG_RESOL_MATERIA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;        
      
    V_VC_IDENTIFICADOR := V_REG_T_SCOB_MULTA.ANIO || V_REG_T_SCOB_MULTA.CUM;
    V_VC_ANIO := V_REG_T_SCOB_MULTA.ANIO;
    V_VC_ORIGEN := '1'; -- ORIGEN SICOB
    V_VD_FECHAREGISTRO := V_REG_T_SCOB_MULTA.FEC_INGRESO;
    V_VC_CODTIPOPROCEDIMIENTO := V_REG_T_SCOB_TIPO_PROCEDIMIENTO.CODIGO;
    V_VC_CODAREA := V_REG_T_SCOB_ORGANO_RESOLUTIVO.CODIGO;
    V_VC_CODSEDE := V_REG_T_SCOB_SEDE.CODIGO;
    V_VC_CODMATERIA := V_REG_T_SCOB_MATERIA.CODIGO;
    V_VC_CODSUBMATERIA := V_REG_T_SCOB_SUBMATERIA.CODIGO;
    V_VC_EXPEDIENTE := V_REG_T_SCOB_MULTA.NRO_EXP_ADMINISTRATIVO;
    V_VC_EXPEDIENTEANTERIOR := V_REG_T_SCOB_MULTA_DETAL.NRO_EXP_NIVEL;
    
    --TIPO_INSTANCIA DEL ÓRGANO RESOLUTIVO = 1
    IF V_REG_T_SCOB_ORGANO_RESOLUTIVO.TIPO_INSTANCIA = 1 THEN
      V_VC_ORPSRESOLNUMERO := V_REG_T_SCOB_MULTA_DETAL.NRO_RESOLUCION;
      V_VD_ORPSRESOLFECHAREGISTRO := TRUNC(V_REG_T_SCOB_MULTA_DETAL.AUDFECCREACION);
      V_VD_ORPSRESOLFECHAEMISION := V_REG_T_SCOB_MULTA_DETAL.FEC_RESOLUCION;
      V_VD_ORPSRESOLFECHANOTIFICACION := V_REG_T_SCOB_MULTA_DETAL.FEC_NOTIFICACION_RESOLUCION;
      V_VD_ORPSFECHAAPELACION := V_REG_T_SCOB_MULTA_DETAL.FEC_ESTADO_SGTE_INSTANCIA;
      V_NU_ORPSCANTIDADDIAS := V_REG_T_SCOB_MULTA_DETAL.NU_CANTIDAD_DIAS;
    END IF;
    
    V_VC_ORPSUSUARIO := TO_CHAR(SYSDATE, 'DD/MM/YY');
    
    --TIPO_INSTANCIA DEL ÓRGANO RESOLUTIVO = 2
    IF V_REG_T_SCOB_ORGANO_RESOLUTIVO.TIPO_INSTANCIA = 2 THEN
      V_VC_COMRESOLNUMERO := V_REG_T_SCOB_MULTA_DETAL.NRO_RESOLUCION;
      V_VD_COMRESOLFECHAREGISTRO := TRUNC(V_REG_T_SCOB_MULTA_DETAL.AUDFECCREACION);
      V_VD_COMRESOLFECHAEMISION := V_REG_T_SCOB_MULTA_DETAL.FEC_RESOLUCION;
      V_VD_COMRESOLFECHANOTIFICACION := V_REG_T_SCOB_MULTA_DETAL.FEC_NOTIFICACION_RESOLUCION;
      V_VD_COMFECHAREVISION := V_REG_T_SCOB_MULTA_DETAL.FEC_ESTADO_SGTE_INSTANCIA;
      V_VC_COMUSUARIO := V_REG_T_SCOB_MULTA_DETAL.AUDUSUCREACION;
      V_NU_COMCANTIDADDIAS := V_REG_T_SCOB_MULTA_DETAL.NU_CANTIDAD_DIAS;
    END IF;
    
    --TIPO_INSTANCIA DEL ÓRGANO RESOLUTIVO = 3
    IF V_REG_T_SCOB_ORGANO_RESOLUTIVO.TIPO_INSTANCIA = 3 THEN
      V_VC_SALARESOLNUMERO := V_REG_T_SCOB_MULTA_DETAL.NRO_RESOLUCION;
      V_VD_SALARESOLFECHAREGISTRO := TRUNC(V_REG_T_SCOB_MULTA_DETAL.AUDFECCREACION);
      V_VD_SALARESOLFECHAEMISION := V_REG_T_SCOB_MULTA_DETAL.FEC_RESOLUCION;
      V_VD_SALARESOLFECHANOTIFICACION := V_REG_T_SCOB_MULTA_DETAL.FEC_NOTIFICACION_RESOLUCION;
      V_VC_SALAUSUARIO := V_REG_T_SCOB_MULTA_DETAL.AUDUSUCREACION;
      V_NU_SALACANTIDADDIAS := V_REG_T_SCOB_MULTA_DETAL.NU_CANTIDAD_DIAS;
    END IF;
    
    V_VC_TIPOMULTA := SUBSTR(V_VC_DESCRIPCION_TIPO_MULTA, 1, 1);
    IF NVL(V_REG_T_SCOB_MULTA_DETAL.POR_ASOCU, '0') = '0' THEN
      V_VC_ASOCUPORCFLAG := 'N';
    ELSE 
      V_VC_ASOCUPORCFLAG := 'S';
    END IF;
        
    V_NU_ASOCUPORC := NVL(V_REG_T_SCOB_MULTA_DETAL.POR_ASOCU, 0);
    V_NU_UITNRO := NVL(V_REG_T_SCOB_MULTA_DETAL.VALOR_UIT, 0);
    V_NU_UITMONTOCAPITAL := V_REG_T_SCOB_MULTA.MONTO_UIT;
    V_NU_INTERESES := V_REG_T_SCOB_MULTA.MONTO_INTERES;
    V_NU_MORA := V_REG_T_SCOB_MULTA.MONTO_INTERES_MORATORIO;
    V_NU_GASTOS := V_REG_T_SCOB_MULTA.MONTO_COSTAS;
    V_NU_AMORTIZADO := V_REG_T_SCOB_MULTA.TOTAL_AMORTIZADO;
    V_NU_AMORTIZADOINTERESES := V_REG_T_SCOB_MULTA.TOTAL_AMORTIZADO_IM;
    V_NU_AMORTIZADOMORA := V_REG_T_SCOB_MULTA.TOTAL_AMORTIZADO_IC;
    V_NU_AMORTIZADOGASTOS := V_REG_T_SCOB_MULTA.TOTAL_AMORTIZADO_COSTAS;
    V_NU_SALDO := V_REG_T_SCOB_MULTA.SALDO;
    V_NU_SALDOINTERESES := V_REG_T_SCOB_MULTA.SALDO_IC;
    V_NU_SALDOMORA := V_REG_T_SCOB_MULTA.SALDO_IM;
    V_NU_SALDOGASTOS := V_REG_T_SCOB_MULTA.SALDO_COSTAS;
    V_VC_ESTADOMULTA := V_REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
    
    IF V_REG_T_SCOB_MULTA.COD_ESTADO_PAGO = '4' THEN
      V_NU_DESCUENTOMULTA := V_REG_T_SCOB_MULTA.PORCENTAJE_DESCUENTO;
    ELSE 
      V_NU_DESCUENTOMULTA := NULL;
    END IF;
    
    V_VD_SECFECHAREGISTRO := V_REG_T_SCOB_MULTA.FEC_GENERACION_SEC;
    V_VC_FILEANIO := V_REG_T_SCOB_MULTA.ANIO_FILE_AEC;
    V_VD_FILEFECHARECEPCION := V_REG_T_SCOB_MULTA.FEC_INGRESO_AEC;   
    V_VC_ESTADOMULTACOBRANZA := V_REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
    V_VD_FECHAOBSERVACION := V_REG_T_SCOB_MULTA.FEC_ULT_IMPROCEDENCIA;
    V_VD_FECHAULTIMOINGRESO := V_REG_T_SCOB_MULTA.FEC_INGRESO_FILE;
    V_VD_FECHAASIGNACION := V_REG_T_SCOB_MULTA.FECHA_ASIG_COBRANZA;
    V_VD_FECHACARTA := V_REG_T_SCOB_MULTA.FEC_ULT_GEN_PRECOACTIVA;
    V_VD_RECFECHAEMISION := V_REG_T_SCOB_MULTA.FEC_EMISION_REC;
    V_VD_RECFECHANOTIFICACION := V_REG_T_SCOB_MULTA.FEC_NOTIF_REC;
    V_VD_FECHARIESGO := SYSDATE;
    V_VC_ESTADOPAGO := V_REG_T_SCOB_MULTA.FLG_TIPO_MULTA;
    V_VC_CODAREADESCRIPCION := V_REG_T_SCOB_ORGANO_RESOLUTIVO.DESCRIPCION;
    IF V_REG_T_SCOB_MULTA.COD_MOTIVO = 0 THEN
      V_VC_EMBARGOFLAG := NULL;
    ELSE 
      V_VC_EMBARGOFLAG := V_REG_T_SCOB_MULTA.COD_MOTIVO;
    END IF;
    V_VC_CODCENTROCOSTO := V_REG_T_SCOB_ORG_RESOL_MATERIA.VC_SIA_CC_COD;
    
    -- SE SACA EL ESTADO DE LA MULTA DEL SIA 
    SELECT ESTADOMULTA INTO V_VC_ESTADOMULTA_SIA
      FROM SGCORESYS.CO_MULTA
      WHERE IDENTIFICADOR = V_VC_IDENTIFICADOR;
    
    -- SE ACTUALIZA LA MULTA
    UPDATE SGCORESYS.CO_MULTA SET 
      ANIO = V_VC_ANIO,
      ORIGEN = V_VC_ORIGEN,
      FECHAREGISTRO = V_VD_FECHAREGISTRO,
      CODTIPOPROCEDIMIENTO = V_VC_CODTIPOPROCEDIMIENTO,
      CODAREA = V_VC_CODAREA,
      CODSEDE = V_VC_CODSEDE,
      CODMATERIA = V_VC_CODMATERIA,
      CODSUBMATERIA = V_VC_CODSUBMATERIA,
      EXPEDIENTE = V_VC_EXPEDIENTE,
      EXPEDIENTEANTERIOR = V_VC_EXPEDIENTEANTERIOR,
      ORPSRESOLNUMERO = V_VC_ORPSRESOLNUMERO,
      ORPSRESOLFECHAREGISTRO = V_VD_ORPSRESOLFECHAREGISTRO,
      ORPSRESOLFECHAEMISION = V_VD_ORPSRESOLFECHAEMISION,
      ORPSRESOLFECHANOTIFICACION = V_VD_ORPSRESOLFECHANOTIFICACION,
      ORPSFECHAAPELACION = V_VD_ORPSFECHAAPELACION,
      ORPSUSUARIO = V_VC_ORPSUSUARIO,
      ORPSCANTIDADDIAS = V_NU_ORPSCANTIDADDIAS,
      COMRESOLNUMERO = V_VC_COMRESOLNUMERO,
      COMRESOLFECHAREGISTRO = V_VD_COMRESOLFECHAREGISTRO,
      COMRESOLFECHAEMISION = V_VD_COMRESOLFECHAEMISION,
      COMRESOLFECHANOTIFICACION = V_VD_COMRESOLFECHANOTIFICACION,
      COMFECHAREVISION = V_VD_COMFECHAREVISION,
      COMUSUARIO = V_VC_COMUSUARIO,
      COMCANTIDADDIAS = V_NU_COMCANTIDADDIAS,
      SALARESOLNUMERO = V_VC_SALARESOLNUMERO,
      SALARESOLFECHAREGISTRO = V_VD_SALARESOLFECHAREGISTRO,
      SALARESOLFECHAEMISION = V_VD_SALARESOLFECHAEMISION,
      SALARESOLFECHANOTIFICACION = V_VD_SALARESOLFECHANOTIFICACION,
      SALAUSUARIO = V_VC_SALAUSUARIO,
      SALACANTIDADDIAS = V_NU_SALACANTIDADDIAS,
      TIPOMULTA = V_VC_TIPOMULTA,
      ASOCUPORCFLAG = V_VC_ASOCUPORCFLAG,
      ASOCUPORC = V_NU_ASOCUPORC,
      UITNRO = V_NU_UITNRO,
      UITMONTOCAPITAL = V_NU_UITMONTOCAPITAL,
      INTERESES = V_NU_INTERESES,
      MORA = V_NU_MORA,
      GASTOS = V_NU_GASTOS,
      AMORTIZADO = V_NU_AMORTIZADO,
      AMORTIZADOINTERESES = V_NU_AMORTIZADOINTERESES,
      AMORTIZADOMORA = V_NU_AMORTIZADOMORA,
      AMORTIZADOGASTOS = V_NU_AMORTIZADOGASTOS,
      SALDO = V_NU_SALDO,
      SALDOINTERESES = V_NU_SALDOINTERESES,
      SALDOMORA = V_NU_SALDOMORA,
      SALDOGASTOS = V_NU_SALDOGASTOS,
      ESTADOMULTA = V_VC_ESTADOMULTA,
      DESCUENTOMULTA = V_NU_DESCUENTOMULTA,
      SECFECHAREGISTRO = V_VD_SECFECHAREGISTRO,
      FILEANIO = V_VC_FILEANIO,
      FILEFECHARECEPCION = V_VD_FILEFECHARECEPCION,
      ESTADOMULTACOBRANZA = V_VC_ESTADOMULTACOBRANZA,
      FECHAOBSERVACION = V_VD_FECHAOBSERVACION,
      FECHAULTIMOINGRESO = V_VD_FECHAULTIMOINGRESO,
      FECHAASIGNACION = V_VD_FECHAASIGNACION,
      FECHACARTA = V_VD_FECHACARTA,
      RECFECHAEMISION = V_VD_RECFECHAEMISION,
      RECFECHANOTIFICACION = V_VD_RECFECHANOTIFICACION,
      EMBARGOFLAG = V_VC_EMBARGOFLAG,
      FECHARIESGO = V_VD_FECHARIESGO,
      ESTADOPAGO = V_VC_ESTADOPAGO,
      CODAREADESCRIPCION = V_VC_CODAREADESCRIPCION,
      CODCENTROCOSTO = V_VC_CODCENTROCOSTO
    WHERE   
    IDENTIFICADOR = V_VC_IDENTIFICADOR;               
      
    SELECT MAX(SECUENCIA) INTO V_NU_SECUENCIA_ACTUAL
          FROM SGCORESYS.CO_MULTAESTADO
          WHERE IDENTIFICADOR = V_VC_IDENTIFICADOR;    
    
    --EN CASO EL ESTADO CAMBIA SE HACE UN NUEVO REGISTRO EN ESTADO_MULTA
    IF V_VC_ESTADOMULTA_SIA <> V_VC_ESTADOMULTA THEN             
      
        V_VC_ME_IDENTIFICADOR := V_REG_T_SCOB_MULTA.ANIO || V_REG_T_SCOB_MULTA.CUM;
        V_NU_ME_SECUENCIA := V_NU_SECUENCIA_ACTUAL + 1;
        V_VC_ME_ESTADOMULTA := V_REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
        V_VC_ME_ESTADOPAGO := V_REG_T_SCOB_MULTA.FLG_TIPO_MULTA;
        V_VC_ME_ESTADOCOBRANZA := V_REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
        V_NU_ME_CAPITAL := V_REG_T_SCOB_MULTA.MONTO_UIT;
        V_NU_ME_INTERESES := V_REG_T_SCOB_MULTA.MONTO_INTERES;
        V_NU_ME_MORA := V_REG_T_SCOB_MULTA.MONTO_INTERES_MORATORIO;
        V_NU_ME_GASTOS := V_REG_T_SCOB_MULTA.MONTO_COSTAS;
        V_NU_ME_CAPITAL_ANT := V_REG_T_SCOB_MULTA.MONTO_UIT;
        V_NU_ME_INTERESES_ANT := V_REG_T_SCOB_MULTA.MONTO_INTERES;
        V_NU_ME_MORA_ANT := V_REG_T_SCOB_MULTA.MONTO_INTERES_MORATORIO;
        V_NU_ME_GASTOS_ANT := V_REG_T_SCOB_MULTA.MONTO_COSTAS;
        V_VD_ME_FECHA := SYSDATE;
        V_VC_ME_CONTABILIZACIONPENDIENTEFLAG := 'S';
        V_VC_ME_PERIODO := TO_CHAR(SYSDATE, 'YYYYMM');
        V_VC_ME_VOUCHER := NULL;
        V_VC_ME_ULTIMOUSUARIO := 'SIA';
        V_VD_ME_ULTIMAFECHAMODIF := SYSDATE;
        V_VC_ME_CODIGOMULTA := NULL;
        V_VC_ME_ORCONCILIACIONESTADO := NULL;
        V_VD_ME_ORCONCILIACIONFECHA := NULL;
        V_VC_ME_CODAREA := V_REG_T_SCOB_ORGANO_RESOLUTIVO.CODIGO;
        V_NU_ME_UITNRO := NVL(V_REG_T_SCOB_MULTA_DETAL.VALOR_UIT, 0);
        V_NU_ME_SALDOCAPITAL := V_REG_T_SCOB_MULTA.SALDO;
        V_NU_ME_SALDOINTERES := V_REG_T_SCOB_MULTA.SALDO_IC;
        V_NU_ME_SALDOMORA := V_REG_T_SCOB_MULTA.SALDO_IM;
        V_NU_ME_SALDOGASTOS := V_REG_T_SCOB_MULTA.SALDO_COSTAS;
        V_VC_ME_CUENTAPROVISION := NULL;
        
        INSERT INTO SGCORESYS.CO_MULTAESTADO(
        IDENTIFICADOR,
        SECUENCIA,
        ESTADOMULTA,
        ESTADOPAGO,
        ESTADOCOBRANZA,
        ESTADOEXPEDIENTE,
        CAPITAL,
        INTERESES,
        MORA,
        GASTOS,
        CAPITAL_ANT,
        INTERESES_ANT,
        MORA_ANT,
        GASTOS_ANT,
        CODIGOMOTIVOEXPEDIENTE,
        FECHA,
        CONTABILIZACIONPENDIENTEFLAG,
        PERIODO,
        VOUCHER,
        ULTIMOUSUARIO,
        ULTIMAFECHAMODIF,
        CODIGOMULTA,
        ORCONCILIACIONESTADO,
        ORCONCILIACIONFECHA,
        CODAREA,
        UITNRO,
        SALDOCAPITAL,
        SALDOINTERES,
        SALDOMORA,
        SALDOGASTOS,
        CUENTAPROVISION)
        VALUES(
        V_VC_ME_IDENTIFICADOR,
        V_NU_ME_SECUENCIA,
        V_VC_ME_ESTADOMULTA,
        V_VC_ME_ESTADOPAGO,
        V_VC_ME_ESTADOCOBRANZA,
        V_VC_ME_ESTADOEXPEDIENTE,
        V_NU_ME_CAPITAL,
        V_NU_ME_INTERESES,
        V_NU_ME_MORA,
        V_NU_ME_GASTOS,
        V_NU_ME_CAPITAL_ANT,
        V_NU_ME_INTERESES_ANT,
        V_NU_ME_MORA_ANT,
        V_NU_ME_GASTOS_ANT,
        V_VC_ME_CODIGOMOTIVOEXPEDIENTE,
        V_VD_ME_FECHA,
        V_VC_ME_CONTABILIZACIONPENDIENTEFLAG,
        V_VC_ME_PERIODO,
        V_VC_ME_VOUCHER,
        V_VC_ME_ULTIMOUSUARIO,
        V_VD_ME_ULTIMAFECHAMODIF,
        V_VC_ME_CODIGOMULTA,
        V_VC_ME_ORCONCILIACIONESTADO,
        V_VD_ME_ORCONCILIACIONFECHA,
        V_VC_ME_CODAREA,
        V_NU_ME_UITNRO,
        V_NU_ME_SALDOCAPITAL,
        V_NU_ME_SALDOINTERES,
        V_NU_ME_SALDOMORA,
        V_NU_ME_SALDOGASTOS,
        V_VC_ME_CUENTAPROVISION);     
    
    ELSE
      
      --EN CASO EL ESTADO NO CAMBIA SE HACE UN UPDATE A MULTA_ESTADO
      V_VC_ME_IDENTIFICADOR := V_REG_T_SCOB_MULTA.ANIO || V_REG_T_SCOB_MULTA.CUM;
      V_NU_ME_SECUENCIA := V_NU_SECUENCIA_ACTUAL;
      V_VC_ME_ESTADOMULTA := V_REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
      V_VC_ME_ESTADOPAGO := V_REG_T_SCOB_MULTA.FLG_TIPO_MULTA;
      V_VC_ME_ESTADOCOBRANZA := V_REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
      V_NU_ME_CAPITAL := V_REG_T_SCOB_MULTA.MONTO_UIT;
      V_NU_ME_INTERESES := V_REG_T_SCOB_MULTA.MONTO_INTERES;
      V_NU_ME_MORA := V_REG_T_SCOB_MULTA.MONTO_INTERES_MORATORIO;
      V_NU_ME_GASTOS := V_REG_T_SCOB_MULTA.MONTO_COSTAS;
      V_NU_ME_CAPITAL_ANT := V_REG_T_SCOB_MULTA.MONTO_UIT;
      V_NU_ME_INTERESES_ANT := V_REG_T_SCOB_MULTA.MONTO_INTERES;
      V_NU_ME_MORA_ANT := V_REG_T_SCOB_MULTA.MONTO_INTERES_MORATORIO;
      V_NU_ME_GASTOS_ANT := V_REG_T_SCOB_MULTA.MONTO_COSTAS;
      V_VC_ME_ULTIMOUSUARIO := 'SIA';
      V_VD_ME_ULTIMAFECHAMODIF := SYSDATE;
      V_VC_ME_CODAREA := V_REG_T_SCOB_ORGANO_RESOLUTIVO.CODIGO;
      V_NU_ME_UITNRO := NVL(V_REG_T_SCOB_MULTA_DETAL.VALOR_UIT, 0);
      V_NU_ME_SALDOCAPITAL := V_REG_T_SCOB_MULTA.SALDO;
      V_NU_ME_SALDOINTERES := V_REG_T_SCOB_MULTA.SALDO_IC;
      V_NU_ME_SALDOMORA := V_REG_T_SCOB_MULTA.SALDO_IM;
      V_NU_ME_SALDOGASTOS := V_REG_T_SCOB_MULTA.SALDO_COSTAS;
      
      UPDATE SGCORESYS.CO_MULTAESTADO SET 
        ESTADOMULTA = V_VC_ME_ESTADOMULTA,
        ESTADOPAGO = V_VC_ME_ESTADOPAGO,
        ESTADOCOBRANZA = V_VC_ME_ESTADOCOBRANZA,
        ESTADOEXPEDIENTE = V_VC_ME_ESTADOEXPEDIENTE,
        CAPITAL = V_NU_ME_CAPITAL,
        INTERESES = V_NU_ME_INTERESES,
        MORA = V_NU_ME_MORA,
        GASTOS = V_NU_ME_GASTOS,
        CAPITAL_ANT = V_NU_ME_CAPITAL_ANT,
        INTERESES_ANT = V_NU_ME_INTERESES_ANT,
        MORA_ANT = V_NU_ME_MORA_ANT,
        GASTOS_ANT = V_NU_ME_GASTOS_ANT,
        CODIGOMOTIVOEXPEDIENTE = V_VC_ME_CODIGOMOTIVOEXPEDIENTE,
        ULTIMOUSUARIO = V_VC_ME_ULTIMOUSUARIO,
        ULTIMAFECHAMODIF = V_VD_ME_ULTIMAFECHAMODIF,
        CODAREA = V_VC_ME_CODAREA,
        UITNRO = V_NU_ME_UITNRO,
        SALDOCAPITAL = V_NU_ME_SALDOCAPITAL,
        SALDOINTERES = V_NU_ME_SALDOINTERES,
        SALDOMORA = V_NU_ME_SALDOMORA,
        SALDOGASTOS = V_NU_ME_SALDOGASTOS
      WHERE 
      IDENTIFICADOR = V_VC_ME_IDENTIFICADOR
      AND SECUENCIA = V_NU_ME_SECUENCIA;       
    
    END IF;
    
    --REGISTRAR PERSONAS EN CASO SE AÑADAN
    SP_I_PERSONA_SICOB_A_SIA(PIN_NU_ID_MULTA,
                                    V_VC_IDENTIFICADOR,
                                    POUT_NU_COD_RESULT,
                                    POUT_VC_MSG_RESULT);
                                    
                                    
    IF POUT_NU_COD_RESULT <> 0 THEN
       RAISE EX_CONTROLADO;
    END IF;
    
    COMMIT;
    
    POUT_NU_COD_RESULT := 0;
    POUT_VC_MSG_RESULT := 'CONFORME';
  
  EXCEPTION
    WHEN EX_CONTROLADO THEN
      POUT_NU_COD_RESULT := -1;
    WHEN OTHERS THEN
      POUT_NU_COD_RESULT := -1;
      POUT_VC_MSG_RESULT := 'ERROR NO CONTROLADO : SP_I_MULTA_SICOB_A_SIA - ERROR : ' ||
                        SQLERRM;
  END SP_U_MULTA_SICOB_A_SIA;
  
  PROCEDURE SP_I_PERSONA_SICOB_A_SIA(PIN_NU_ID_MULTA    IN NUMBER,                            
                                     PIV_IDENTIFICADOR  IN VARCHAR2,
                                     POUT_NU_COD_RESULT OUT NUMBER,
                                     POUT_VC_MSG_RESULT OUT VARCHAR2) IS
  
    V_REG_T_SCOB_PERSONA            USR_SICOB.T_SCOB_PERSONA%ROWTYPE;
    V_NU_NUM_PERSONA_SANCIONADO     NUMBER;
    V_NU_NUM_PERSONA_DENUNCIANTE    NUMBER;
    V_VC_TDOC_PERSONA               VARCHAR(10);
    V_VC_DOC_DENUNCIANTE            VARCHAR2(50);
    V_VC_DOC_SANCIONADO             VARCHAR2(50);
    V_VC_DESCRIPCION_TIPO_DOCUMENTO VARCHAR2(100);
    V_VC_SANCIONADONOMBRE           SGCORESYS.CO_MULTA.DENUNCIANTENOMBRE%TYPE;
    V_VC_DENUNCIANTENOMBRE          SGCORESYS.CO_MULTA.DENUNCIANTENOMBRE%TYPE;
  
    CURSOR CURSOR_DENUNCIANTES(P_ID_MULTA NUMBER) IS
      SELECT DISTINCT PERS.*
        FROM USR_SICOB.T_SCOB_MULTA_DETAL MDET
       INNER JOIN USR_SICOB.T_SCOB_MULTA_DENUNCIANTE MDEN
          ON (MDEN.ID_MULTA_DETAL = MDET.ID_MULTA_DETAL AND
             MDEN.ESTADO = '1')
       INNER JOIN USR_SICOB.T_SCOB_PERSONA PERS
          ON (PERS.ID_PERSONA = MDEN.ID_PERSONA)
       INNER JOIN USR_SICOB.T_SCOB_MULTA MULT
          ON (MULT.ID_MULTA = MDET.ID_MULTA)
       WHERE MDET.FLG_ACTUAL = '1'
         AND MDET.ID_MULTA = P_ID_MULTA;
  
    CURSOR CURSOR_SANCIONADOS(P_ID_MULTA NUMBER) IS
      SELECT DISTINCT PERS.*
        FROM USR_SICOB.T_SCOB_MULTA_DETAL MDET
       INNER JOIN USR_SICOB.T_SCOB_MULTA_SANCIONADO MSAN
          ON MSAN.ID_MULTA_DETAL = MDET.ID_MULTA_DETAL
         AND MSAN.ESTADO = '1'
         AND NVL(MSAN.COD_TIPO_PERSONA, '1') = '1'
       INNER JOIN USR_SICOB.T_SCOB_PERSONA PERS
          ON PERS.ID_PERSONA = MSAN.ID_PERSONA
       INNER JOIN USR_SICOB.T_SCOB_MULTA MULT
          ON (MULT.ID_MULTA = MDET.ID_MULTA)
       WHERE MDET.FLG_ACTUAL = '1'
         AND MDET.ID_MULTA = P_ID_MULTA;
  
  BEGIN
  
  OPEN CURSOR_DENUNCIANTES(PIN_NU_ID_MULTA);
      
      LOOP 
          
        FETCH CURSOR_DENUNCIANTES INTO V_REG_T_SCOB_PERSONA;
           
        EXIT WHEN CURSOR_DENUNCIANTES%NOTFOUND;      
                
        IF V_REG_T_SCOB_PERSONA.TIPO_PERSONA = 2 THEN
           V_VC_DENUNCIANTENOMBRE := V_REG_T_SCOB_PERSONA.RAZON_SOCIAL;
        ELSE
           V_VC_DENUNCIANTENOMBRE := V_REG_T_SCOB_PERSONA.APE_PATERNO || ' ' || V_REG_T_SCOB_PERSONA.APE_MATERNO || ' ' || V_REG_T_SCOB_PERSONA.PRI_NOMBRE || ' ' ||
                                       V_REG_T_SCOB_PERSONA.SEG_NOMBRE || ' ' || V_REG_T_SCOB_PERSONA.APE_CASADA;
        END IF;
          
        IF V_REG_T_SCOB_PERSONA.NRO_DOC IS NOT NULL THEN
            
            SELECT TRIM(DECODE(INSTR(V_REG_T_SCOB_PERSONA.NRO_DOC, '/'), 0, V_REG_T_SCOB_PERSONA.NRO_DOC, SUBSTR(V_REG_T_SCOB_PERSONA.NRO_DOC, 1, INSTR(V_REG_T_SCOB_PERSONA.NRO_DOC, '/') - 1)))
            INTO V_VC_DOC_DENUNCIANTE
            FROM DUAL;
            
            -- VERIFICACION EN EMPLEADO
            SELECT MAX(PERS.PERSONA) INTO V_NU_NUM_PERSONA_DENUNCIANTE 
              FROM SGCORESYS.PERSONAMAST PERS
              LEFT JOIN SGCORESYS.EMPLEADOMAST EMPL 
                ON (PERS.PERSONA = EMPL.EMPLEADO)
              WHERE (PERS.DOCUMENTO = V_VC_DOC_DENUNCIANTE 
                OR PERS.DOCUMENTOFISCAL = V_VC_DOC_DENUNCIANTE
                OR PERS.DOCUMENTOIDENTIDAD = V_VC_DOC_DENUNCIANTE);

            IF NVL(V_NU_NUM_PERSONA_DENUNCIANTE, 0) = 0 THEN
                -- VERIFICACION CON OTROS
                SELECT MAX(PERS.PERSONA) INTO V_NU_NUM_PERSONA_DENUNCIANTE 
                   FROM SGCORESYS.PERSONAMAST PERS
                   WHERE PERS.ESTADO = 'A' 
                     AND (PERS.DOCUMENTO = V_VC_DOC_DENUNCIANTE 
                     OR PERS.DOCUMENTOFISCAL = V_VC_DOC_DENUNCIANTE
                     OR PERS.DOCUMENTOIDENTIDAD = V_VC_DOC_DENUNCIANTE);
            END IF;
            
            IF LENGTH(TRIM(V_VC_DOC_DENUNCIANTE)) = 11 THEN
              V_VC_TDOC_PERSONA :='R';
            ELSIF LENGTH(TRIM(V_VC_DOC_DENUNCIANTE)) = 8 THEN
              V_VC_TDOC_PERSONA := 'D';
            ELSE
              V_VC_TDOC_PERSONA :='O';
            END IF;
            
            dbms_output.put_line('V_NU_NUM_PERSONA_DENUNCIANTE ==> ' || V_NU_NUM_PERSONA_DENUNCIANTE);
            
            IF NVL(V_NU_NUM_PERSONA_DENUNCIANTE, 0) = 0 THEN             
              
              dbms_output.put_line('V_VC_DENUNCIANTENOMBRE ==> ' || V_VC_DENUNCIANTENOMBRE);
              dbms_output.put_line('V_VC_TDOC_PERSONA ==> ' || V_VC_TDOC_PERSONA);
              dbms_output.put_line('V_VC_DOC_DENUNCIANTE ==> ' || V_VC_DOC_DENUNCIANTE);
              USR_SIA_INTFZ.PKG_INTFZ_MULTAS_SIA.SIA_S_GENERA_PERSONA(PIN_CH_CLIENTENOMBRE    => V_VC_DENUNCIANTENOMBRE,
                                                        PIN_CH_TIPODOCUMENTO    => V_VC_TDOC_PERSONA,
                                                        PIN_CH_CLIENTEDOCUMENTO => V_VC_DOC_DENUNCIANTE,
                                                        PIN_CH_ULTIMOUSUARIO    => 'INTERFAZ',
                                                        POUT_NU_PERSONA         => V_NU_NUM_PERSONA_DENUNCIANTE);
                                                        
                                                        
              dbms_output.put_line('V_NU_NUM_PERSONA_DENUNCIANTE ==> ' || V_NU_NUM_PERSONA_DENUNCIANTE);
             END IF;
         
        
         UPDATE SGCORESYS.CO_MULTA SET
           DENUNCIANTE = V_NU_NUM_PERSONA_DENUNCIANTE,
           DENUNCIANTENOMBRE = V_VC_DENUNCIANTENOMBRE
         WHERE IDENTIFICADOR = PIV_IDENTIFICADOR;                                                               
           
         END IF ;
                                       
         EXIT WHEN TRUE;                                 
           
      END LOOP;
        
    CLOSE CURSOR_DENUNCIANTES;
    
    OPEN CURSOR_SANCIONADOS(PIN_NU_ID_MULTA);
      
      LOOP 
          
        FETCH CURSOR_SANCIONADOS INTO V_REG_T_SCOB_PERSONA;
           
        EXIT WHEN CURSOR_SANCIONADOS%NOTFOUND;                              
        
        SELECT TRIM(DECODE(INSTR(V_REG_T_SCOB_PERSONA.NRO_DOC, '/'), 0, V_REG_T_SCOB_PERSONA.NRO_DOC, SUBSTR(V_REG_T_SCOB_PERSONA.NRO_DOC, 1, INSTR(V_REG_T_SCOB_PERSONA.NRO_DOC, '/') - 1)))
        INTO V_VC_DOC_SANCIONADO
        FROM DUAL;
        
        SELECT TDE.TXT_DESCRIPCION INTO V_VC_DESCRIPCION_TIPO_DOCUMENTO
               FROM USR_SICOB.T_SCOB_TABLA_DET TDE 
               WHERE TDE.ID_TABLA = 10 AND TDE.COD_INTERNO = V_REG_T_SCOB_PERSONA.TIPO_DOC;
        
        SELECT SUBSTR(TRIM(DECODE(INSTR(V_VC_DESCRIPCION_TIPO_DOCUMENTO, '/'), 0, V_VC_DESCRIPCION_TIPO_DOCUMENTO, SUBSTR(V_VC_DESCRIPCION_TIPO_DOCUMENTO, 1, INSTR(V_VC_DESCRIPCION_TIPO_DOCUMENTO, '/') - 1))),1,1)
        INTO V_VC_TDOC_PERSONA
        FROM DUAL;
        
        IF V_VC_TDOC_PERSONA<>'D' AND V_VC_TDOC_PERSONA<>'R' THEN
           V_VC_TDOC_PERSONA :='O';
        END IF;
        
        IF V_VC_DOC_SANCIONADO IS NOT NULL THEN
           
            -- VERIFICACION EN EMPLEADO
            SELECT MAX(PERS.PERSONA) INTO V_NU_NUM_PERSONA_SANCIONADO 
              FROM SGCORESYS.PERSONAMAST PERS
              LEFT JOIN SGCORESYS.EMPLEADOMAST EMPL 
                ON (PERS.PERSONA = EMPL.EMPLEADO)
              WHERE (PERS.DOCUMENTO = V_VC_DOC_SANCIONADO 
                OR PERS.DOCUMENTOFISCAL = V_VC_DOC_SANCIONADO 
                OR PERS.DOCUMENTOIDENTIDAD = V_VC_DOC_SANCIONADO);

            IF NVL(V_NU_NUM_PERSONA_SANCIONADO, 0) = 0 THEN
                -- VERIFICACION CON OTROS
                SELECT MAX(PERS.PERSONA) INTO V_NU_NUM_PERSONA_SANCIONADO 
                   FROM SGCORESYS.PERSONAMAST PERS
                   WHERE PERS.ESTADO = 'A' 
                     AND (PERS.DOCUMENTO = V_VC_DOC_SANCIONADO 
                     OR PERS.DOCUMENTOFISCAL = V_VC_DOC_SANCIONADO 
                     OR PERS.DOCUMENTOIDENTIDAD = V_VC_DOC_SANCIONADO);
            END IF;

            IF NVL(V_NU_NUM_PERSONA_SANCIONADO, 0) = 0 THEN
               
                IF V_REG_T_SCOB_PERSONA.TIPO_PERSONA = 2 THEN
                   V_VC_SANCIONADONOMBRE := V_REG_T_SCOB_PERSONA.RAZON_SOCIAL;
                ELSE
                   V_VC_SANCIONADONOMBRE := V_REG_T_SCOB_PERSONA.APE_PATERNO || ' ' || V_REG_T_SCOB_PERSONA.APE_MATERNO || ' ' || V_REG_T_SCOB_PERSONA.PRI_NOMBRE || ' ' ||
                                               V_REG_T_SCOB_PERSONA.SEG_NOMBRE || ' ' || V_REG_T_SCOB_PERSONA.APE_CASADA;
                END IF;
        
                USR_SIA_INTFZ.PKG_INTFZ_MULTAS_SIA.SIA_S_GENERA_PERSONA(PIN_CH_CLIENTENOMBRE    => V_VC_SANCIONADONOMBRE,
                                                          PIN_CH_TIPODOCUMENTO    => V_VC_TDOC_PERSONA,
                                                          PIN_CH_CLIENTEDOCUMENTO => V_VC_DOC_SANCIONADO,
                                                          PIN_CH_ULTIMOUSUARIO    => 'INTERFAZ',
                                                          POUT_NU_PERSONA         => V_NU_NUM_PERSONA_SANCIONADO);
                
             END IF;
             
             UPDATE SGCORESYS.CO_MULTA SET
               SANCIONADO = V_NU_NUM_PERSONA_SANCIONADO
             WHERE IDENTIFICADOR = PIV_IDENTIFICADOR;      
             
         END IF ;
         
         EXIT WHEN TRUE;
         
      END LOOP;
        
    CLOSE CURSOR_SANCIONADOS;
    
    POUT_NU_COD_RESULT := 0;
    POUT_VC_MSG_RESULT := 'CONFORME';
  
  EXCEPTION
    WHEN EX_CONTROLADO THEN
      POUT_NU_COD_RESULT := -1;
    WHEN OTHERS THEN
      POUT_NU_COD_RESULT := -1;
      POUT_VC_MSG_RESULT := 'ERROR NO CONTROLADO : SP_I_PERSONA_SICOB_A_SIA - ERROR : ' || SQLERRM;
                        
  END SP_I_PERSONA_SICOB_A_SIA;

  PROCEDURE SP_I_RECEP_MULTA_SICOB_A_SIA(PIN_NU_ID_MULTA   IN NUMBER,
                                         POUT_NU_COD_RESULT OUT NUMBER,
                                         POUT_VC_MSG_RESULT OUT VARCHAR2) IS
  
    V_REG_T_SCOB_MULTA                 USR_SICOB.T_SCOB_MULTA%ROWTYPE;
    V_REG_T_SCOB_MULTA_DETAL           USR_SICOB.T_SCOB_MULTA_DETAL%ROWTYPE;    
    V_REG_T_SCOB_ORGANO_RESOLUTIVO     USR_SICOB.T_SCOB_ORGANO_RESOLUTIVO%ROWTYPE;   
    V_REG_T_SCOB_AREA_COBRANZA         USR_SICOB.T_SCOB_AREA_COBRANZA%ROWTYPE;
    V_REG_T_SCOB_MULTA_COBRANZA        USR_SICOB.T_SCOB_MULTA_COBRANZA%ROWTYPE;
    
    V_VC_IDENTIFICADOR                 SGCORESYS.CO_MULTA.IDENTIFICADOR%TYPE;
    V_VC_ESTADOMULTA                   SGCORESYS.CO_MULTA.ESTADOMULTA%TYPE;   
    V_VC_FILEANIO                      SGCORESYS.CO_MULTA.FILEANIO%TYPE;
    V_VD_FILEFECHARECEPCION            SGCORESYS.CO_MULTA.FILEFECHARECEPCION%TYPE;    
    V_VC_ESTADOMULTACOBRANZA           SGCORESYS.CO_MULTA.ESTADOMULTACOBRANZA%TYPE;       
    V_VD_FECHAULTIMOINGRESO            SGCORESYS.CO_MULTA.FECHAULTIMOINGRESO%TYPE;        
    V_VC_EMBARGOFLAG                   SGCORESYS.CO_MULTA.EMBARGOFLAG%TYPE;       
    V_VC_FILENUMERO                    SGCORESYS.CO_MULTA.FILENUMERO%TYPE;
    V_VC_NUMEROINGRESO                 SGCORESYS.CO_MULTA.NUMEROINGRESO%TYPE;
    V_VC_UBICACIONFISICA               SGCORESYS.CO_MULTA.UBICACIONFISICA%TYPE;
    
    V_VC_ME_IDENTIFICADOR                 SGCORESYS.CO_MULTAESTADO.IDENTIFICADOR%TYPE;
    V_NU_ME_SECUENCIA                     SGCORESYS.CO_MULTAESTADO.SECUENCIA%TYPE;
    V_VC_ME_ESTADOMULTA                   SGCORESYS.CO_MULTAESTADO.ESTADOMULTA%TYPE;
    V_VC_ME_ESTADOPAGO                    SGCORESYS.CO_MULTAESTADO.ESTADOPAGO%TYPE;
    V_VC_ME_ESTADOCOBRANZA                SGCORESYS.CO_MULTAESTADO.ESTADOCOBRANZA%TYPE;
    V_VC_ME_ESTADOEXPEDIENTE              SGCORESYS.CO_MULTAESTADO.ESTADOEXPEDIENTE%TYPE;
    V_NU_ME_CAPITAL                       SGCORESYS.CO_MULTAESTADO.CAPITAL%TYPE;
    V_NU_ME_INTERESES                     SGCORESYS.CO_MULTAESTADO.INTERESES%TYPE;
    V_NU_ME_MORA                          SGCORESYS.CO_MULTAESTADO.MORA%TYPE;
    V_NU_ME_GASTOS                        SGCORESYS.CO_MULTAESTADO.GASTOS%TYPE;
    V_NU_ME_CAPITAL_ANT                   SGCORESYS.CO_MULTAESTADO.CAPITAL_ANT%TYPE;
    V_NU_ME_INTERESES_ANT                 SGCORESYS.CO_MULTAESTADO.INTERESES_ANT%TYPE;
    V_NU_ME_MORA_ANT                      SGCORESYS.CO_MULTAESTADO.MORA_ANT%TYPE;
    V_NU_ME_GASTOS_ANT                    SGCORESYS.CO_MULTAESTADO.GASTOS_ANT%TYPE;
    V_VC_ME_CODIGOMOTIVOEXPEDIENTE        SGCORESYS.CO_MULTAESTADO.CODIGOMOTIVOEXPEDIENTE%TYPE;
    V_VD_ME_FECHA                         SGCORESYS.CO_MULTAESTADO.FECHA%TYPE;
    V_VC_ME_CONTABILIZACIONPENDIENTEFLAG  SGCORESYS.CO_MULTAESTADO.CONTABILIZACIONPENDIENTEFLAG%TYPE;
    V_VC_ME_PERIODO                       SGCORESYS.CO_MULTAESTADO.PERIODO%TYPE;
    V_VC_ME_VOUCHER                       SGCORESYS.CO_MULTAESTADO.VOUCHER%TYPE;
    V_VC_ME_ULTIMOUSUARIO                 SGCORESYS.CO_MULTAESTADO.ULTIMOUSUARIO%TYPE;
    V_VD_ME_ULTIMAFECHAMODIF              SGCORESYS.CO_MULTAESTADO.ULTIMAFECHAMODIF%TYPE;
    V_VC_ME_CODIGOMULTA                   SGCORESYS.CO_MULTAESTADO.CODIGOMULTA%TYPE;
    V_VC_ME_ORCONCILIACIONESTADO          SGCORESYS.CO_MULTAESTADO.ORCONCILIACIONESTADO%TYPE;
    V_VD_ME_ORCONCILIACIONFECHA           SGCORESYS.CO_MULTAESTADO.ORCONCILIACIONFECHA%TYPE;
    V_VC_ME_CODAREA                       SGCORESYS.CO_MULTAESTADO.CODAREA%TYPE;
    V_NU_ME_UITNRO                        SGCORESYS.CO_MULTAESTADO.UITNRO%TYPE;
    V_NU_ME_SALDOCAPITAL                  SGCORESYS.CO_MULTAESTADO.SALDOCAPITAL%TYPE;
    V_NU_ME_SALDOINTERES                  SGCORESYS.CO_MULTAESTADO.SALDOINTERES%TYPE;
    V_NU_ME_SALDOMORA                     SGCORESYS.CO_MULTAESTADO.SALDOMORA%TYPE;
    V_NU_ME_SALDOGASTOS                   SGCORESYS.CO_MULTAESTADO.SALDOGASTOS%TYPE;
    V_VC_ME_CUENTAPROVISION               SGCORESYS.CO_MULTAESTADO.CUENTAPROVISION%TYPE;
    
    V_VC_ESTADOMULTA_SIA                  SGCORESYS.CO_MULTA.ESTADOMULTA%TYPE;
    V_NU_SECUENCIA_ACTUAL                 SGCORESYS.CO_MULTAESTADO.SECUENCIA%TYPE;
    
  BEGIN
        
    BEGIN
    
      SELECT MULTA.*
        INTO V_REG_T_SCOB_MULTA
        FROM USR_SICOB.T_SCOB_MULTA MULTA
       WHERE MULTA.ID_MULTA = PIN_NU_ID_MULTA
             AND MULTA.ESTADO = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE MULTA CON : ID_MULTA => ' ||
                          PIN_NU_ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MULTA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT MULTA_DETALLE.*
        INTO V_REG_T_SCOB_MULTA_DETAL
        FROM USR_SICOB.T_SCOB_MULTA_DETAL MULTA_DETALLE
       WHERE MULTA_DETALLE.ID_MULTA = PIN_NU_ID_MULTA
             AND MULTA_DETALLE.ESTADO = '1'
             AND MULTA_DETALLE.FLG_ACTUAL = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE DETALLE DE MULTA CON : ID_MULTA => ' ||
                          PIN_NU_ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MULTA_DETAL - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT ACOB.*
        INTO V_REG_T_SCOB_AREA_COBRANZA
        FROM USR_SICOB.T_SCOB_AREA_COBRANZA ACOB
       WHERE ACOB.ID_AREA_COBRANZA = V_REG_T_SCOB_MULTA.ID_AREA_COBRANZA;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE AREA DE COBRANZA CON : ID_AREA_COBRANZA => ' ||
                          V_REG_T_SCOB_MULTA.ID_AREA_COBRANZA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_AREA_COBRANZA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT MCOB.*
        INTO V_REG_T_SCOB_MULTA_COBRANZA
        FROM USR_SICOB.T_SCOB_MULTA_COBRANZA MCOB
       WHERE MCOB.ID_MULTA = V_REG_T_SCOB_MULTA.ID_MULTA
             AND MCOB.FLG_ACTUAL = '1'
             AND MCOB.ESTADO = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE MULTA DE COBRANZA CON : ID_MULTA => ' ||
                          V_REG_T_SCOB_MULTA.ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MULTA_COBRANZA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;    
    
    BEGIN
    
      SELECT ORGA.*
        INTO V_REG_T_SCOB_ORGANO_RESOLUTIVO
        FROM USR_SICOB.T_SCOB_ORGANO_RESOLUTIVO ORGA
       WHERE ORGA.ID_ORGANO_RESOLUTIVO = V_REG_T_SCOB_MULTA_DETAL.ID_ORGANO_RESOLUTIVO;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE ORGANO RESOLUTIVO CON : ID_ORGANO_RESOLUTIVO => ' ||
                          V_REG_T_SCOB_MULTA_DETAL.ID_ORGANO_RESOLUTIVO;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_ORGANO_RESOLUTIVO - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
      
    V_VC_IDENTIFICADOR := V_REG_T_SCOB_MULTA.ANIO || V_REG_T_SCOB_MULTA.CUM;              
    V_VC_ESTADOMULTA := V_REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
    V_VC_FILEANIO := V_REG_T_SCOB_MULTA.ANIO_FILE_AEC;
    V_VD_FILEFECHARECEPCION := V_REG_T_SCOB_MULTA.FEC_INGRESO_AEC;
    V_VC_FILENUMERO := V_REG_T_SCOB_AREA_COBRANZA.CODIGO || V_REG_T_SCOB_MULTA.NRO_FILE_AEC;
    V_VC_NUMEROINGRESO := V_REG_T_SCOB_MULTA_COBRANZA.NRO_INGRESO;
    V_VC_ESTADOMULTACOBRANZA := V_REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;        
    
    IF V_REG_T_SCOB_MULTA.ESTADO_ENVIO_ARCHIVO = 2 THEN
      V_VC_UBICACIONFISICA := 'ARCHIVO CENTRAL'; 
    ELSIF V_REG_T_SCOB_MULTA.ESTADO_MULTA = 9 OR V_REG_T_SCOB_MULTA.ESTADO_MULTA = 10 OR V_REG_T_SCOB_MULTA.ESTADO_MULTA = 11 
        OR V_REG_T_SCOB_MULTA.ESTADO_MULTA = 12 OR V_REG_T_SCOB_MULTA.ESTADO_MULTA = 13 THEN
      V_VC_UBICACIONFISICA := 'AEC'; 
    ELSE
        V_VC_UBICACIONFISICA := ''; 
    END IF;
           
    IF V_REG_T_SCOB_MULTA.COD_MOTIVO = 0 THEN
      V_VC_EMBARGOFLAG := NULL;
    ELSE 
      V_VC_EMBARGOFLAG := V_REG_T_SCOB_MULTA.COD_MOTIVO;
    END IF;
    
    -- SE SACA EL ESTADO DE LA MULTA DEL SIA 
    SELECT ESTADOMULTA INTO V_VC_ESTADOMULTA_SIA
      FROM SGCORESYS.CO_MULTA
      WHERE IDENTIFICADOR = V_VC_IDENTIFICADOR;
    
    -- SE ACTUALIZA LA MULTA
    UPDATE SGCORESYS.CO_MULTA SET 
      IDENTIFICADOR = V_VC_IDENTIFICADOR,
      ESTADOMULTA = V_VC_ESTADOMULTA,
      FILEANIO = V_VC_FILEANIO,
      FILEFECHARECEPCION = V_VD_FILEFECHARECEPCION,
      ESTADOMULTACOBRANZA = V_VC_ESTADOMULTACOBRANZA,
      FECHAULTIMOINGRESO = V_VD_FECHAULTIMOINGRESO,
      EMBARGOFLAG = V_VC_EMBARGOFLAG,
      FILENUMERO = V_VC_FILENUMERO,
      NUMEROINGRESO = V_VC_NUMEROINGRESO,
      UBICACIONFISICA = V_VC_UBICACIONFISICA
    WHERE   
      IDENTIFICADOR = V_VC_IDENTIFICADOR;               
      
    SELECT MAX(SECUENCIA) INTO V_NU_SECUENCIA_ACTUAL
          FROM SGCORESYS.CO_MULTAESTADO
          WHERE IDENTIFICADOR = V_VC_IDENTIFICADOR;    
    
    --EN CASO EL ESTADO CAMBIA SE HACE UN NUEVO REGISTRO EN ESTADO_MULTA
    IF V_VC_ESTADOMULTA_SIA <> V_VC_ESTADOMULTA THEN             
      
        V_VC_ME_IDENTIFICADOR := V_REG_T_SCOB_MULTA.ANIO || V_REG_T_SCOB_MULTA.CUM;
        V_NU_ME_SECUENCIA := V_NU_SECUENCIA_ACTUAL + 1;
        V_VC_ME_ESTADOMULTA := V_REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
        V_VC_ME_ESTADOPAGO := V_REG_T_SCOB_MULTA.FLG_TIPO_MULTA;
        V_VC_ME_ESTADOCOBRANZA := V_REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
        V_NU_ME_CAPITAL := V_REG_T_SCOB_MULTA.MONTO_UIT;
        V_NU_ME_INTERESES := V_REG_T_SCOB_MULTA.MONTO_INTERES;
        V_NU_ME_MORA := V_REG_T_SCOB_MULTA.MONTO_INTERES_MORATORIO;
        V_NU_ME_GASTOS := V_REG_T_SCOB_MULTA.MONTO_COSTAS;
        V_NU_ME_CAPITAL_ANT := V_REG_T_SCOB_MULTA.MONTO_UIT;
        V_NU_ME_INTERESES_ANT := V_REG_T_SCOB_MULTA.MONTO_INTERES;
        V_NU_ME_MORA_ANT := V_REG_T_SCOB_MULTA.MONTO_INTERES_MORATORIO;
        V_NU_ME_GASTOS_ANT := V_REG_T_SCOB_MULTA.MONTO_COSTAS;
        V_VD_ME_FECHA := SYSDATE;
        V_VC_ME_CONTABILIZACIONPENDIENTEFLAG := 'S';
        V_VC_ME_PERIODO := TO_CHAR(SYSDATE, 'YYYYMM');
        V_VC_ME_VOUCHER := NULL;
        V_VC_ME_ULTIMOUSUARIO := 'SIA';
        V_VD_ME_ULTIMAFECHAMODIF := SYSDATE;
        V_VC_ME_CODIGOMULTA := NULL;
        V_VC_ME_ORCONCILIACIONESTADO := NULL;
        V_VD_ME_ORCONCILIACIONFECHA := NULL;
        V_VC_ME_CODAREA := V_REG_T_SCOB_ORGANO_RESOLUTIVO.CODIGO;
        V_NU_ME_UITNRO := NVL(V_REG_T_SCOB_MULTA_DETAL.VALOR_UIT, 0);
        V_NU_ME_SALDOCAPITAL := V_REG_T_SCOB_MULTA.SALDO;
        V_NU_ME_SALDOINTERES := V_REG_T_SCOB_MULTA.SALDO_IC;
        V_NU_ME_SALDOMORA := V_REG_T_SCOB_MULTA.SALDO_IM;
        V_NU_ME_SALDOGASTOS := V_REG_T_SCOB_MULTA.SALDO_COSTAS;
        V_VC_ME_CUENTAPROVISION := NULL;
        
        INSERT INTO SGCORESYS.CO_MULTAESTADO(
          IDENTIFICADOR,
          SECUENCIA,
          ESTADOMULTA,
          ESTADOPAGO,
          ESTADOCOBRANZA,
          ESTADOEXPEDIENTE,
          CAPITAL,
          INTERESES,
          MORA,
          GASTOS,
          CAPITAL_ANT,
          INTERESES_ANT,
          MORA_ANT,
          GASTOS_ANT,
          CODIGOMOTIVOEXPEDIENTE,
          FECHA,
          CONTABILIZACIONPENDIENTEFLAG,
          PERIODO,
          VOUCHER,
          ULTIMOUSUARIO,
          ULTIMAFECHAMODIF,
          CODIGOMULTA,
          ORCONCILIACIONESTADO,
          ORCONCILIACIONFECHA,
          CODAREA,
          UITNRO,
          SALDOCAPITAL,
          SALDOINTERES,
          SALDOMORA,
          SALDOGASTOS,
          CUENTAPROVISION)
        VALUES(
          V_VC_ME_IDENTIFICADOR,
          V_NU_ME_SECUENCIA,
          V_VC_ME_ESTADOMULTA,
          V_VC_ME_ESTADOPAGO,
          V_VC_ME_ESTADOCOBRANZA,
          V_VC_ME_ESTADOEXPEDIENTE,
          V_NU_ME_CAPITAL,
          V_NU_ME_INTERESES,
          V_NU_ME_MORA,
          V_NU_ME_GASTOS,
          V_NU_ME_CAPITAL_ANT,
          V_NU_ME_INTERESES_ANT,
          V_NU_ME_MORA_ANT,
          V_NU_ME_GASTOS_ANT,
          V_VC_ME_CODIGOMOTIVOEXPEDIENTE,
          V_VD_ME_FECHA,
          V_VC_ME_CONTABILIZACIONPENDIENTEFLAG,
          V_VC_ME_PERIODO,
          V_VC_ME_VOUCHER,
          V_VC_ME_ULTIMOUSUARIO,
          V_VD_ME_ULTIMAFECHAMODIF,
          V_VC_ME_CODIGOMULTA,
          V_VC_ME_ORCONCILIACIONESTADO,
          V_VD_ME_ORCONCILIACIONFECHA,
          V_VC_ME_CODAREA,
          V_NU_ME_UITNRO,
          V_NU_ME_SALDOCAPITAL,
          V_NU_ME_SALDOINTERES,
          V_NU_ME_SALDOMORA,
          V_NU_ME_SALDOGASTOS,
          V_VC_ME_CUENTAPROVISION);     
    
    ELSE
      
      --EN CASO EL ESTADO NO CAMBIA SE HACE UN UPDATE A MULTA_ESTADO
      V_VC_ME_IDENTIFICADOR := V_REG_T_SCOB_MULTA.ANIO || V_REG_T_SCOB_MULTA.CUM;
      V_NU_ME_SECUENCIA := V_NU_SECUENCIA_ACTUAL;
      V_VC_ME_ESTADOMULTA := V_REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
      V_VC_ME_ESTADOPAGO := V_REG_T_SCOB_MULTA.FLG_TIPO_MULTA;
      V_VC_ME_ESTADOCOBRANZA := V_REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
      V_NU_ME_CAPITAL := V_REG_T_SCOB_MULTA.MONTO_UIT;
      V_NU_ME_INTERESES := V_REG_T_SCOB_MULTA.MONTO_INTERES;
      V_NU_ME_MORA := V_REG_T_SCOB_MULTA.MONTO_INTERES_MORATORIO;
      V_NU_ME_GASTOS := V_REG_T_SCOB_MULTA.MONTO_COSTAS;
      V_NU_ME_CAPITAL_ANT := V_REG_T_SCOB_MULTA.MONTO_UIT;
      V_NU_ME_INTERESES_ANT := V_REG_T_SCOB_MULTA.MONTO_INTERES;
      V_NU_ME_MORA_ANT := V_REG_T_SCOB_MULTA.MONTO_INTERES_MORATORIO;
      V_NU_ME_GASTOS_ANT := V_REG_T_SCOB_MULTA.MONTO_COSTAS;
      V_VC_ME_ULTIMOUSUARIO := 'SIA';
      V_VD_ME_ULTIMAFECHAMODIF := SYSDATE;
      V_VC_ME_CODAREA := V_REG_T_SCOB_ORGANO_RESOLUTIVO.CODIGO;
      V_NU_ME_UITNRO := NVL(V_REG_T_SCOB_MULTA_DETAL.VALOR_UIT, 0);
      V_NU_ME_SALDOCAPITAL := V_REG_T_SCOB_MULTA.SALDO;
      V_NU_ME_SALDOINTERES := V_REG_T_SCOB_MULTA.SALDO_IC;
      V_NU_ME_SALDOMORA := V_REG_T_SCOB_MULTA.SALDO_IM;
      V_NU_ME_SALDOGASTOS := V_REG_T_SCOB_MULTA.SALDO_COSTAS;
      
      UPDATE SGCORESYS.CO_MULTAESTADO SET 
        ESTADOMULTA = V_VC_ME_ESTADOMULTA,
        ESTADOPAGO = V_VC_ME_ESTADOPAGO,
        ESTADOCOBRANZA = V_VC_ME_ESTADOCOBRANZA,
        ESTADOEXPEDIENTE = V_VC_ME_ESTADOEXPEDIENTE,
        CAPITAL = V_NU_ME_CAPITAL,
        INTERESES = V_NU_ME_INTERESES,
        MORA = V_NU_ME_MORA,
        GASTOS = V_NU_ME_GASTOS,
        CAPITAL_ANT = V_NU_ME_CAPITAL_ANT,
        INTERESES_ANT = V_NU_ME_INTERESES_ANT,
        MORA_ANT = V_NU_ME_MORA_ANT,
        GASTOS_ANT = V_NU_ME_GASTOS_ANT,
        CODIGOMOTIVOEXPEDIENTE = V_VC_ME_CODIGOMOTIVOEXPEDIENTE,
        ULTIMOUSUARIO = V_VC_ME_ULTIMOUSUARIO,
        ULTIMAFECHAMODIF = V_VD_ME_ULTIMAFECHAMODIF,
        CODAREA = V_VC_ME_CODAREA,
        UITNRO = V_NU_ME_UITNRO,
        SALDOCAPITAL = V_NU_ME_SALDOCAPITAL,
        SALDOINTERES = V_NU_ME_SALDOINTERES,
        SALDOMORA = V_NU_ME_SALDOMORA,
        SALDOGASTOS = V_NU_ME_SALDOGASTOS
      WHERE 
      IDENTIFICADOR = V_VC_ME_IDENTIFICADOR
      AND SECUENCIA = V_NU_ME_SECUENCIA;       
    
    END IF;      
    
    COMMIT;
    
    POUT_NU_COD_RESULT := 0;
    POUT_VC_MSG_RESULT := 'CONFORME';
  
  EXCEPTION
    WHEN EX_CONTROLADO THEN
      POUT_NU_COD_RESULT := -1;
    WHEN OTHERS THEN
      POUT_NU_COD_RESULT := -1;
      POUT_VC_MSG_RESULT := 'ERROR NO CONTROLADO : SP_I_RECEP_MULTA_SICOB_A_SIA - ERROR : ' ||
                        SQLERRM;
  END SP_I_RECEP_MULTA_SICOB_A_SIA;
  
  
  PROCEDURE SP_I_ASIGNAR_MULTA_SICOB_A_SIA(PIN_NU_ID_MULTA   IN NUMBER,
                                           POUT_NU_COD_RESULT OUT NUMBER,
                                           POUT_VC_MSG_RESULT OUT VARCHAR2) IS
  
    V_REG_T_SCOB_MULTA                 USR_SICOB.T_SCOB_MULTA%ROWTYPE;
    V_REG_T_SCOB_MULTA_DETAL           USR_SICOB.T_SCOB_MULTA_DETAL%ROWTYPE;    
    V_REG_T_SCOB_ORGANO_RESOLUTIVO     USR_SICOB.T_SCOB_ORGANO_RESOLUTIVO%ROWTYPE;   
    V_REG_T_SCOB_USUARIO               USR_SICOB.T_SCOB_USUARIO%ROWTYPE;
    
    V_VC_IDENTIFICADOR                 SGCORESYS.CO_MULTA.IDENTIFICADOR%TYPE;
    V_VC_ESTADOMULTA                   SGCORESYS.CO_MULTA.ESTADOMULTA%TYPE;   
    V_VC_EMBARGOFLAG                   SGCORESYS.CO_MULTA.EMBARGOFLAG%TYPE;    
    V_VC_UBICACIONFISICA               SGCORESYS.CO_MULTA.UBICACIONFISICA%TYPE;
    V_VC_COBGESTOR                     SGCORESYS.CO_MULTA.COBGESTOR%TYPE;
    V_VD_FECHAASIGNACION               SGCORESYS.CO_MULTA.FECHAASIGNACION%TYPE;
    
    V_VC_ME_IDENTIFICADOR                 SGCORESYS.CO_MULTAESTADO.IDENTIFICADOR%TYPE;
    V_NU_ME_SECUENCIA                     SGCORESYS.CO_MULTAESTADO.SECUENCIA%TYPE;
    V_VC_ME_ESTADOMULTA                   SGCORESYS.CO_MULTAESTADO.ESTADOMULTA%TYPE;
    V_VC_ME_ESTADOPAGO                    SGCORESYS.CO_MULTAESTADO.ESTADOPAGO%TYPE;
    V_VC_ME_ESTADOCOBRANZA                SGCORESYS.CO_MULTAESTADO.ESTADOCOBRANZA%TYPE;
    V_VC_ME_ESTADOEXPEDIENTE              SGCORESYS.CO_MULTAESTADO.ESTADOEXPEDIENTE%TYPE;
    V_NU_ME_CAPITAL                       SGCORESYS.CO_MULTAESTADO.CAPITAL%TYPE;
    V_NU_ME_INTERESES                     SGCORESYS.CO_MULTAESTADO.INTERESES%TYPE;
    V_NU_ME_MORA                          SGCORESYS.CO_MULTAESTADO.MORA%TYPE;
    V_NU_ME_GASTOS                        SGCORESYS.CO_MULTAESTADO.GASTOS%TYPE;
    V_NU_ME_CAPITAL_ANT                   SGCORESYS.CO_MULTAESTADO.CAPITAL_ANT%TYPE;
    V_NU_ME_INTERESES_ANT                 SGCORESYS.CO_MULTAESTADO.INTERESES_ANT%TYPE;
    V_NU_ME_MORA_ANT                      SGCORESYS.CO_MULTAESTADO.MORA_ANT%TYPE;
    V_NU_ME_GASTOS_ANT                    SGCORESYS.CO_MULTAESTADO.GASTOS_ANT%TYPE;
    V_VC_ME_CODIGOMOTIVOEXPEDIENTE        SGCORESYS.CO_MULTAESTADO.CODIGOMOTIVOEXPEDIENTE%TYPE;
    V_VD_ME_FECHA                         SGCORESYS.CO_MULTAESTADO.FECHA%TYPE;
    V_VC_ME_CONTABILIZACIONPENDIENTEFLAG  SGCORESYS.CO_MULTAESTADO.CONTABILIZACIONPENDIENTEFLAG%TYPE;
    V_VC_ME_PERIODO                       SGCORESYS.CO_MULTAESTADO.PERIODO%TYPE;
    V_VC_ME_VOUCHER                       SGCORESYS.CO_MULTAESTADO.VOUCHER%TYPE;
    V_VC_ME_ULTIMOUSUARIO                 SGCORESYS.CO_MULTAESTADO.ULTIMOUSUARIO%TYPE;
    V_VD_ME_ULTIMAFECHAMODIF              SGCORESYS.CO_MULTAESTADO.ULTIMAFECHAMODIF%TYPE;
    V_VC_ME_CODIGOMULTA                   SGCORESYS.CO_MULTAESTADO.CODIGOMULTA%TYPE;
    V_VC_ME_ORCONCILIACIONESTADO          SGCORESYS.CO_MULTAESTADO.ORCONCILIACIONESTADO%TYPE;
    V_VD_ME_ORCONCILIACIONFECHA           SGCORESYS.CO_MULTAESTADO.ORCONCILIACIONFECHA%TYPE;
    V_VC_ME_CODAREA                       SGCORESYS.CO_MULTAESTADO.CODAREA%TYPE;
    V_NU_ME_UITNRO                        SGCORESYS.CO_MULTAESTADO.UITNRO%TYPE;
    V_NU_ME_SALDOCAPITAL                  SGCORESYS.CO_MULTAESTADO.SALDOCAPITAL%TYPE;
    V_NU_ME_SALDOINTERES                  SGCORESYS.CO_MULTAESTADO.SALDOINTERES%TYPE;
    V_NU_ME_SALDOMORA                     SGCORESYS.CO_MULTAESTADO.SALDOMORA%TYPE;
    V_NU_ME_SALDOGASTOS                   SGCORESYS.CO_MULTAESTADO.SALDOGASTOS%TYPE;
    V_VC_ME_CUENTAPROVISION               SGCORESYS.CO_MULTAESTADO.CUENTAPROVISION%TYPE;
    
    V_VC_ESTADOMULTA_SIA                  SGCORESYS.CO_MULTA.ESTADOMULTA%TYPE;
    V_NU_SECUENCIA_ACTUAL                 SGCORESYS.CO_MULTAESTADO.SECUENCIA%TYPE;
    
  BEGIN
        
    BEGIN
    
      SELECT MULTA.*
        INTO V_REG_T_SCOB_MULTA
        FROM USR_SICOB.T_SCOB_MULTA MULTA
       WHERE MULTA.ID_MULTA = PIN_NU_ID_MULTA
             AND MULTA.ESTADO = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE MULTA CON : ID_MULTA => ' ||
                          PIN_NU_ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MULTA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT MULTA_DETALLE.*
        INTO V_REG_T_SCOB_MULTA_DETAL
        FROM USR_SICOB.T_SCOB_MULTA_DETAL MULTA_DETALLE
       WHERE MULTA_DETALLE.ID_MULTA = PIN_NU_ID_MULTA
             AND MULTA_DETALLE.ESTADO = '1'
             AND MULTA_DETALLE.FLG_ACTUAL = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE DETALLE DE MULTA CON : ID_MULTA => ' ||
                          PIN_NU_ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MULTA_DETAL - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT USUA.*
        INTO V_REG_T_SCOB_USUARIO
        FROM USR_SICOB.T_SCOB_USUARIO USUA
       WHERE USUA.ID_USUARIO = V_REG_T_SCOB_MULTA.ID_USUARIO_ASIG_COBRANZA;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE AREA DE USUARIO CON : ID_USUARIO_ASIG_COBRANZA => ' ||
                          V_REG_T_SCOB_MULTA.ID_USUARIO_ASIG_COBRANZA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_USUARIO - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT ORGA.*
        INTO V_REG_T_SCOB_ORGANO_RESOLUTIVO
        FROM USR_SICOB.T_SCOB_ORGANO_RESOLUTIVO ORGA
       WHERE ORGA.ID_ORGANO_RESOLUTIVO = V_REG_T_SCOB_MULTA_DETAL.ID_ORGANO_RESOLUTIVO;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE ORGANO RESOLUTIVO CON : ID_ORGANO_RESOLUTIVO => ' ||
                          V_REG_T_SCOB_MULTA_DETAL.ID_ORGANO_RESOLUTIVO;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_ORGANO_RESOLUTIVO - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
      
    V_VC_IDENTIFICADOR := V_REG_T_SCOB_MULTA.ANIO || V_REG_T_SCOB_MULTA.CUM;              
    V_VC_ESTADOMULTA := V_REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
    V_VC_COBGESTOR := V_REG_T_SCOB_USUARIO.USUARIO;
    V_VD_FECHAASIGNACION := V_REG_T_SCOB_MULTA.FECHA_ASIG_COBRANZA;
    
    IF V_REG_T_SCOB_MULTA.ESTADO_ENVIO_ARCHIVO = 2 THEN
      V_VC_UBICACIONFISICA := 'ARCHIVO CENTRAL'; 
    ELSIF V_REG_T_SCOB_MULTA.ESTADO_MULTA = 9 OR V_REG_T_SCOB_MULTA.ESTADO_MULTA = 10 OR V_REG_T_SCOB_MULTA.ESTADO_MULTA = 11 
        OR V_REG_T_SCOB_MULTA.ESTADO_MULTA = 12 OR V_REG_T_SCOB_MULTA.ESTADO_MULTA = 13 THEN
      V_VC_UBICACIONFISICA := 'AEC'; 
    ELSE
        V_VC_UBICACIONFISICA := ''; 
    END IF;
           
    IF V_REG_T_SCOB_MULTA.COD_MOTIVO = 0 THEN
      V_VC_EMBARGOFLAG := NULL;
    ELSE 
      V_VC_EMBARGOFLAG := V_REG_T_SCOB_MULTA.COD_MOTIVO;
    END IF;
    
    -- SE SACA EL ESTADO DE LA MULTA DEL SIA 
    SELECT ESTADOMULTA INTO V_VC_ESTADOMULTA_SIA
      FROM SGCORESYS.CO_MULTA
      WHERE IDENTIFICADOR = V_VC_IDENTIFICADOR;
    
    -- SE ACTUALIZA LA MULTA
    UPDATE SGCORESYS.CO_MULTA SET 
      ESTADOMULTA = V_VC_ESTADOMULTA,
      FILEANIO = V_VC_COBGESTOR,
      FECHAASIGNACION = V_VD_FECHAASIGNACION,      
      EMBARGOFLAG = V_VC_EMBARGOFLAG,
      UBICACIONFISICA = V_VC_UBICACIONFISICA
    WHERE   
      IDENTIFICADOR = V_VC_IDENTIFICADOR;               
      
    SELECT MAX(SECUENCIA) INTO V_NU_SECUENCIA_ACTUAL
          FROM SGCORESYS.CO_MULTAESTADO
          WHERE IDENTIFICADOR = V_VC_IDENTIFICADOR;    
    
    --EN CASO EL ESTADO CAMBIA SE HACE UN NUEVO REGISTRO EN ESTADO_MULTA
    IF V_VC_ESTADOMULTA_SIA <> V_VC_ESTADOMULTA THEN             
      
        V_VC_ME_IDENTIFICADOR := V_REG_T_SCOB_MULTA.ANIO || V_REG_T_SCOB_MULTA.CUM;
        V_NU_ME_SECUENCIA := V_NU_SECUENCIA_ACTUAL + 1;
        V_VC_ME_ESTADOMULTA := V_REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
        V_VC_ME_ESTADOPAGO := V_REG_T_SCOB_MULTA.FLG_TIPO_MULTA;
        V_VC_ME_ESTADOCOBRANZA := V_REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
        V_NU_ME_CAPITAL := V_REG_T_SCOB_MULTA.MONTO_UIT;
        V_NU_ME_INTERESES := V_REG_T_SCOB_MULTA.MONTO_INTERES;
        V_NU_ME_MORA := V_REG_T_SCOB_MULTA.MONTO_INTERES_MORATORIO;
        V_NU_ME_GASTOS := V_REG_T_SCOB_MULTA.MONTO_COSTAS;
        V_NU_ME_CAPITAL_ANT := V_REG_T_SCOB_MULTA.MONTO_UIT;
        V_NU_ME_INTERESES_ANT := V_REG_T_SCOB_MULTA.MONTO_INTERES;
        V_NU_ME_MORA_ANT := V_REG_T_SCOB_MULTA.MONTO_INTERES_MORATORIO;
        V_NU_ME_GASTOS_ANT := V_REG_T_SCOB_MULTA.MONTO_COSTAS;
        V_VD_ME_FECHA := SYSDATE;
        V_VC_ME_CONTABILIZACIONPENDIENTEFLAG := 'S';
        V_VC_ME_PERIODO := TO_CHAR(SYSDATE, 'YYYYMM');
        V_VC_ME_VOUCHER := NULL;
        V_VC_ME_ULTIMOUSUARIO := 'SIA';
        V_VD_ME_ULTIMAFECHAMODIF := SYSDATE;
        V_VC_ME_CODIGOMULTA := NULL;
        V_VC_ME_ORCONCILIACIONESTADO := NULL;
        V_VD_ME_ORCONCILIACIONFECHA := NULL;
        V_VC_ME_CODAREA := V_REG_T_SCOB_ORGANO_RESOLUTIVO.CODIGO;
        V_NU_ME_UITNRO := NVL(V_REG_T_SCOB_MULTA_DETAL.VALOR_UIT, 0);
        V_NU_ME_SALDOCAPITAL := V_REG_T_SCOB_MULTA.SALDO;
        V_NU_ME_SALDOINTERES := V_REG_T_SCOB_MULTA.SALDO_IC;
        V_NU_ME_SALDOMORA := V_REG_T_SCOB_MULTA.SALDO_IM;
        V_NU_ME_SALDOGASTOS := V_REG_T_SCOB_MULTA.SALDO_COSTAS;
        V_VC_ME_CUENTAPROVISION := NULL;
        
        INSERT INTO SGCORESYS.CO_MULTAESTADO(
          IDENTIFICADOR,
          SECUENCIA,
          ESTADOMULTA,
          ESTADOPAGO,
          ESTADOCOBRANZA,
          ESTADOEXPEDIENTE,
          CAPITAL,
          INTERESES,
          MORA,
          GASTOS,
          CAPITAL_ANT,
          INTERESES_ANT,
          MORA_ANT,
          GASTOS_ANT,
          CODIGOMOTIVOEXPEDIENTE,
          FECHA,
          CONTABILIZACIONPENDIENTEFLAG,
          PERIODO,
          VOUCHER,
          ULTIMOUSUARIO,
          ULTIMAFECHAMODIF,
          CODIGOMULTA,
          ORCONCILIACIONESTADO,
          ORCONCILIACIONFECHA,
          CODAREA,
          UITNRO,
          SALDOCAPITAL,
          SALDOINTERES,
          SALDOMORA,
          SALDOGASTOS,
          CUENTAPROVISION)
        VALUES(
          V_VC_ME_IDENTIFICADOR,
          V_NU_ME_SECUENCIA,
          V_VC_ME_ESTADOMULTA,
          V_VC_ME_ESTADOPAGO,
          V_VC_ME_ESTADOCOBRANZA,
          V_VC_ME_ESTADOEXPEDIENTE,
          V_NU_ME_CAPITAL,
          V_NU_ME_INTERESES,
          V_NU_ME_MORA,
          V_NU_ME_GASTOS,
          V_NU_ME_CAPITAL_ANT,
          V_NU_ME_INTERESES_ANT,
          V_NU_ME_MORA_ANT,
          V_NU_ME_GASTOS_ANT,
          V_VC_ME_CODIGOMOTIVOEXPEDIENTE,
          V_VD_ME_FECHA,
          V_VC_ME_CONTABILIZACIONPENDIENTEFLAG,
          V_VC_ME_PERIODO,
          V_VC_ME_VOUCHER,
          V_VC_ME_ULTIMOUSUARIO,
          V_VD_ME_ULTIMAFECHAMODIF,
          V_VC_ME_CODIGOMULTA,
          V_VC_ME_ORCONCILIACIONESTADO,
          V_VD_ME_ORCONCILIACIONFECHA,
          V_VC_ME_CODAREA,
          V_NU_ME_UITNRO,
          V_NU_ME_SALDOCAPITAL,
          V_NU_ME_SALDOINTERES,
          V_NU_ME_SALDOMORA,
          V_NU_ME_SALDOGASTOS,
          V_VC_ME_CUENTAPROVISION);     
    
    ELSE
      
      --EN CASO EL ESTADO NO CAMBIA SE HACE UN UPDATE A MULTA_ESTADO
      V_VC_ME_IDENTIFICADOR := V_REG_T_SCOB_MULTA.ANIO || V_REG_T_SCOB_MULTA.CUM;
      V_NU_ME_SECUENCIA := V_NU_SECUENCIA_ACTUAL;
      V_VC_ME_ESTADOMULTA := V_REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
      V_VC_ME_ESTADOPAGO := V_REG_T_SCOB_MULTA.FLG_TIPO_MULTA;
      V_VC_ME_ESTADOCOBRANZA := V_REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;
      V_NU_ME_CAPITAL := V_REG_T_SCOB_MULTA.MONTO_UIT;
      V_NU_ME_INTERESES := V_REG_T_SCOB_MULTA.MONTO_INTERES;
      V_NU_ME_MORA := V_REG_T_SCOB_MULTA.MONTO_INTERES_MORATORIO;
      V_NU_ME_GASTOS := V_REG_T_SCOB_MULTA.MONTO_COSTAS;
      V_NU_ME_CAPITAL_ANT := V_REG_T_SCOB_MULTA.MONTO_UIT;
      V_NU_ME_INTERESES_ANT := V_REG_T_SCOB_MULTA.MONTO_INTERES;
      V_NU_ME_MORA_ANT := V_REG_T_SCOB_MULTA.MONTO_INTERES_MORATORIO;
      V_NU_ME_GASTOS_ANT := V_REG_T_SCOB_MULTA.MONTO_COSTAS;
      V_VC_ME_ULTIMOUSUARIO := 'SIA';
      V_VD_ME_ULTIMAFECHAMODIF := SYSDATE;
      V_VC_ME_CODAREA := V_REG_T_SCOB_ORGANO_RESOLUTIVO.CODIGO;
      V_NU_ME_UITNRO := NVL(V_REG_T_SCOB_MULTA_DETAL.VALOR_UIT, 0);
      V_NU_ME_SALDOCAPITAL := V_REG_T_SCOB_MULTA.SALDO;
      V_NU_ME_SALDOINTERES := V_REG_T_SCOB_MULTA.SALDO_IC;
      V_NU_ME_SALDOMORA := V_REG_T_SCOB_MULTA.SALDO_IM;
      V_NU_ME_SALDOGASTOS := V_REG_T_SCOB_MULTA.SALDO_COSTAS;
      
      UPDATE SGCORESYS.CO_MULTAESTADO SET 
        ESTADOMULTA = V_VC_ME_ESTADOMULTA,
        ESTADOPAGO = V_VC_ME_ESTADOPAGO,
        ESTADOCOBRANZA = V_VC_ME_ESTADOCOBRANZA,
        ESTADOEXPEDIENTE = V_VC_ME_ESTADOEXPEDIENTE,
        CAPITAL = V_NU_ME_CAPITAL,
        INTERESES = V_NU_ME_INTERESES,
        MORA = V_NU_ME_MORA,
        GASTOS = V_NU_ME_GASTOS,
        CAPITAL_ANT = V_NU_ME_CAPITAL_ANT,
        INTERESES_ANT = V_NU_ME_INTERESES_ANT,
        MORA_ANT = V_NU_ME_MORA_ANT,
        GASTOS_ANT = V_NU_ME_GASTOS_ANT,
        CODIGOMOTIVOEXPEDIENTE = V_VC_ME_CODIGOMOTIVOEXPEDIENTE,
        ULTIMOUSUARIO = V_VC_ME_ULTIMOUSUARIO,
        ULTIMAFECHAMODIF = V_VD_ME_ULTIMAFECHAMODIF,
        CODAREA = V_VC_ME_CODAREA,
        UITNRO = V_NU_ME_UITNRO,
        SALDOCAPITAL = V_NU_ME_SALDOCAPITAL,
        SALDOINTERES = V_NU_ME_SALDOINTERES,
        SALDOMORA = V_NU_ME_SALDOMORA,
        SALDOGASTOS = V_NU_ME_SALDOGASTOS
      WHERE 
      IDENTIFICADOR = V_VC_ME_IDENTIFICADOR
      AND SECUENCIA = V_NU_ME_SECUENCIA;       
    
    END IF;
                                    
    
    COMMIT;
    
    POUT_NU_COD_RESULT := 0;
    POUT_VC_MSG_RESULT := 'CONFORME';
  
  EXCEPTION
    WHEN EX_CONTROLADO THEN
      POUT_NU_COD_RESULT := -1;
    WHEN OTHERS THEN
      POUT_NU_COD_RESULT := -1;
      POUT_VC_MSG_RESULT := 'ERROR NO CONTROLADO : SP_I_ASIGNAR_MULTA_SICOB_A_SIA - ERROR : ' ||
                        SQLERRM;
  END SP_I_ASIGNAR_MULTA_SICOB_A_SIA;
  
  PROCEDURE SP_I_EXPEDIENTE_SICOB_A_SIA(PIN_NU_ID_MULTA   IN NUMBER,
                                        POUT_NU_COD_RESULT OUT NUMBER,
                                        POUT_VC_MSG_RESULT OUT VARCHAR2) IS
  
    V_REG_T_SCOB_MULTA                 USR_SICOB.T_SCOB_MULTA%ROWTYPE;
    V_REG_T_SCOB_MULTA_DETAL           USR_SICOB.T_SCOB_MULTA_DETAL%ROWTYPE;    
    V_REG_T_SCOB_EXPEDIENTE            USR_SICOB.T_SCOB_EXPEDIENTE%ROWTYPE;
    V_REG_T_SCOB_EST_EXP_COB_MOTIVO    USR_SICOB.T_SCOB_EST_EXP_COB_MOTIVO%ROWTYPE;
    V_REG_T_SCOB_EST_EXP_COB           USR_SICOB.T_SCOB_EST_EXP_COB%ROWTYPE;
    
    V_VC_IDENTIFICADOR                 SGCORESYS.CO_MULTA.IDENTIFICADOR%TYPE;
    V_VC_ESTADOMULTA                   SGCORESYS.CO_MULTA.ESTADOMULTA%TYPE;   
    V_VC_EMBARGOFLAG                   SGCORESYS.CO_MULTA.EMBARGOFLAG%TYPE;    
    V_VC_COBEXPEDIENTENRO              SGCORESYS.CO_MULTA.COBEXPEDIENTENRO%TYPE;
    V_VD_COBEXPEDIENTEFECHA            SGCORESYS.CO_MULTA.COBEXPEDIENTEFECHA%TYPE;
    V_VC_COMRESOLANIO                  SGCORESYS.CO_MULTA.COMRESOLANIO%TYPE;
    V_VC_COMRESOLCODIGO                SGCORESYS.CO_MULTA.COMRESOLCODIGO%TYPE;
    V_VC_TIPOFRACCIONAMIENTO           SGCORESYS.CO_MULTA.TIPOFRACCIONAMIENTO%TYPE;
    V_VD_COBFECHAULTIMO                SGCORESYS.CO_MULTA.COBFECHAULTIMO%TYPE;
    V_VC_CODMOTIVOMULTA                SGCORESYS.CO_MULTA.CODMOTIVOMULTA%TYPE;
    V_VC_COBEXPEDIENTEMOTIVO           SGCORESYS.CO_MULTA.COBEXPEDIENTEMOTIVO%TYPE;
    V_VC_COBEXPEDIENTEESTADO           SGCORESYS.CO_MULTA.COBEXPEDIENTEESTADO%TYPE;
    
    V_VC_ME_IDENTIFICADOR                 SGCORESYS.CO_MULTAESTADO.IDENTIFICADOR%TYPE;
    V_NU_ME_SECUENCIA                     SGCORESYS.CO_MULTAESTADO.SECUENCIA%TYPE;
    V_VC_ME_ESTADOEXPEDIENTE              SGCORESYS.CO_MULTAESTADO.ESTADOEXPEDIENTE%TYPE;    
    V_VC_ME_CODIGOMOTIVOEXPEDIENTE        SGCORESYS.CO_MULTAESTADO.CODIGOMOTIVOEXPEDIENTE%TYPE;    
    
    V_VC_ESTADOMULTA_SIA                  SGCORESYS.CO_MULTA.ESTADOMULTA%TYPE;
    V_NU_SECUENCIA_ACTUAL                 SGCORESYS.CO_MULTAESTADO.SECUENCIA%TYPE;
    
  BEGIN
        
    BEGIN
    
      SELECT MULTA.*
        INTO V_REG_T_SCOB_MULTA
        FROM USR_SICOB.T_SCOB_MULTA MULTA
       WHERE MULTA.ID_MULTA = PIN_NU_ID_MULTA
             AND MULTA.ESTADO = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE MULTA CON : ID_MULTA => ' ||
                          PIN_NU_ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MULTA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT MULTA_DETALLE.*
        INTO V_REG_T_SCOB_MULTA_DETAL
        FROM USR_SICOB.T_SCOB_MULTA_DETAL MULTA_DETALLE
       WHERE MULTA_DETALLE.ID_MULTA = PIN_NU_ID_MULTA
             AND MULTA_DETALLE.ESTADO = '1'
             AND MULTA_DETALLE.FLG_ACTUAL = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE DETALLE DE MULTA CON : ID_MULTA => ' ||
                          PIN_NU_ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MULTA_DETAL - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT EXPE.*
        INTO V_REG_T_SCOB_EXPEDIENTE
         FROM USR_SICOB.T_SCOB_EXPEDIENTE_MULTA EXMU
        LEFT JOIN USR_SICOB.T_SCOB_EXPEDIENTE EXPE
          ON EXPE.ID_EXPEDIENTE = EXMU.ID_EXPEDIENTE
         AND EXPE.ESTADO = '1'
          WHERE EXMU.ID_MULTA = V_REG_T_SCOB_MULTA.ID_MULTA
         AND EXMU.ESTADO = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE EXPEDIENTE CON : ID_MULTA => ' ||
                          V_REG_T_SCOB_MULTA.ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_EXPEDIENTE - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT EXCM.*
        INTO V_REG_T_SCOB_EST_EXP_COB_MOTIVO
        FROM USR_SICOB.T_SCOB_EST_EXP_COB_MOTIVO EXCM
       WHERE EXCM.ID_MOTIVO = V_REG_T_SCOB_EXPEDIENTE.ID_MOTIVO;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE AREA DE ESTADO DE MOTIVO DE COBRANZA CON : ID_MOTIVO => ' ||
                          V_REG_T_SCOB_EXPEDIENTE.ID_MOTIVO;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_EST_EXP_COB_MOTIVO - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT ESEC.*
        INTO V_REG_T_SCOB_EST_EXP_COB
        FROM USR_SICOB.T_SCOB_EST_EXP_COB ESEC
       WHERE ESEC.ID_EST_EXP_COB = V_REG_T_SCOB_EXPEDIENTE.ESTADO_EXPEDIENTE;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE AREA DE ESTADO DE EXPEDIENTE DE COBRANZA CON : ESTADO_EXPEDIENTE => ' ||
                          V_REG_T_SCOB_EXPEDIENTE.ESTADO_EXPEDIENTE;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_EST_EXP_COB - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
      
    V_VC_IDENTIFICADOR := V_REG_T_SCOB_MULTA.ANIO || V_REG_T_SCOB_MULTA.CUM; 
    V_VC_ESTADOMULTA := V_REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;             
    V_VC_COBEXPEDIENTENRO := V_REG_T_SCOB_EXPEDIENTE.ANIO || V_REG_T_SCOB_EXPEDIENTE.NRO_EXPEDIENTE;
    V_VD_COBEXPEDIENTEFECHA := V_REG_T_SCOB_EXPEDIENTE.FEC_INGRESO;       
    V_VD_COBFECHAULTIMO := V_REG_T_SCOB_EXPEDIENTE.FEC_ESTADO_EXPEDIENTE;
    V_VC_TIPOFRACCIONAMIENTO := (CASE WHEN V_REG_T_SCOB_EXPEDIENTE.ESTADO_EXPEDIENTE = 4 THEN 'FR' ELSE 'NF' END);
    V_VC_COMRESOLANIO := V_REG_T_SCOB_EXPEDIENTE.ANIO;
    V_VC_COMRESOLCODIGO := V_REG_T_SCOB_EXPEDIENTE.NRO_EXPEDIENTE;
    V_VC_CODMOTIVOMULTA := V_REG_T_SCOB_EST_EXP_COB_MOTIVO.CODIGO;
    V_VC_COBEXPEDIENTEESTADO := V_REG_T_SCOB_EST_EXP_COB.CODIGO;
    V_VC_COBEXPEDIENTEMOTIVO := V_REG_T_SCOB_EST_EXP_COB_MOTIVO.CODIGO;
           
    IF NVL(V_REG_T_SCOB_EXPEDIENTE.FLG_EMBARGO, '0') = '0' THEN
      V_VC_EMBARGOFLAG := 'N';
    ELSE 
      V_VC_EMBARGOFLAG := 'S';
    END IF;
    
    -- SE SACA EL ESTADO DE LA MULTA DEL SIA 
    SELECT ESTADOMULTA INTO V_VC_ESTADOMULTA_SIA
      FROM SGCORESYS.CO_MULTA
      WHERE IDENTIFICADOR = V_VC_IDENTIFICADOR;
    
    -- SE ACTUALIZA LA MULTA
    UPDATE SGCORESYS.CO_MULTA SET 
      ESTADOMULTA = V_VC_ESTADOMULTA,
      COBEXPEDIENTENRO = V_VC_COBEXPEDIENTENRO,
      COBEXPEDIENTEFECHA = V_VD_COBEXPEDIENTEFECHA,
      COBFECHAULTIMO = V_VD_COBFECHAULTIMO,
      TIPOFRACCIONAMIENTO = V_VC_TIPOFRACCIONAMIENTO,
      COMRESOLANIO = V_VC_COMRESOLANIO,
      COMRESOLCODIGO = V_VC_COMRESOLCODIGO,
      CODMOTIVOMULTA = V_VC_CODMOTIVOMULTA,
      COBEXPEDIENTEESTADO = V_VC_COBEXPEDIENTEESTADO,
      COBEXPEDIENTEMOTIVO = V_VC_COBEXPEDIENTEMOTIVO,
      EMBARGOFLAG = V_VC_EMBARGOFLAG
    WHERE   
      IDENTIFICADOR = V_VC_IDENTIFICADOR;               
      
    SELECT MAX(SECUENCIA) INTO V_NU_SECUENCIA_ACTUAL
          FROM SGCORESYS.CO_MULTAESTADO
          WHERE IDENTIFICADOR = V_VC_IDENTIFICADOR;   
      
    V_VC_ME_IDENTIFICADOR := V_REG_T_SCOB_MULTA.ANIO || V_REG_T_SCOB_MULTA.CUM;
    V_NU_ME_SECUENCIA := V_NU_SECUENCIA_ACTUAL;
    V_VC_ME_ESTADOEXPEDIENTE := V_REG_T_SCOB_EST_EXP_COB.CODIGO;
    V_VC_ME_CODIGOMOTIVOEXPEDIENTE := V_REG_T_SCOB_EST_EXP_COB_MOTIVO.CODIGO;
    
    -- SE ACTUALIZA EL ESTADO DE LA MULTA
    UPDATE SGCORESYS.CO_MULTAESTADO SET        
      ESTADOEXPEDIENTE = V_VC_ME_ESTADOEXPEDIENTE,        
      CODIGOMOTIVOEXPEDIENTE = V_VC_ME_CODIGOMOTIVOEXPEDIENTE       
    WHERE 
      IDENTIFICADOR = V_VC_ME_IDENTIFICADOR
      AND SECUENCIA = V_NU_ME_SECUENCIA;       
    
    COMMIT;
    
    POUT_NU_COD_RESULT := 0;
    POUT_VC_MSG_RESULT := 'CONFORME';
  
  EXCEPTION
    WHEN EX_CONTROLADO THEN
      POUT_NU_COD_RESULT := -1;
    WHEN OTHERS THEN
      POUT_NU_COD_RESULT := -1;
      POUT_VC_MSG_RESULT := 'ERROR NO CONTROLADO : SP_I_EXPEDIENTE_SICOB_A_SIA - ERROR : ' ||
                        SQLERRM;
  END SP_I_EXPEDIENTE_SICOB_A_SIA;
  
  PROCEDURE SP_U_MARCAR_MULTA_SICOB_A_SIA(PIN_NU_ID_MULTA   IN NUMBER,
                                          POUT_NU_COD_RESULT OUT NUMBER,
                                          POUT_VC_MSG_RESULT OUT VARCHAR2) IS
  
    V_REG_T_SCOB_MULTA                 USR_SICOB.T_SCOB_MULTA%ROWTYPE;    
    
    V_VC_IDENTIFICADOR                 SGCORESYS.CO_MULTA.IDENTIFICADOR%TYPE;
    V_VC_UBICACIONFISICA               SGCORESYS.CO_MULTA.UBICACIONFISICA%TYPE;    
    
  BEGIN
        
    BEGIN
    
      SELECT MULTA.*
        INTO V_REG_T_SCOB_MULTA
        FROM USR_SICOB.T_SCOB_MULTA MULTA
       WHERE MULTA.ID_MULTA = PIN_NU_ID_MULTA
             AND MULTA.ESTADO = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE MULTA CON : ID_MULTA => ' ||
                          PIN_NU_ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MULTA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;        
      
    V_VC_IDENTIFICADOR := V_REG_T_SCOB_MULTA.ANIO || V_REG_T_SCOB_MULTA.CUM;   
      
    IF V_REG_T_SCOB_MULTA.ESTADO_ENVIO_ARCHIVO = 2 THEN
      V_VC_UBICACIONFISICA := 'ARCHIVO CENTRAL'; 
    ELSIF V_REG_T_SCOB_MULTA.ESTADO_MULTA = 9 OR V_REG_T_SCOB_MULTA.ESTADO_MULTA = 10 OR V_REG_T_SCOB_MULTA.ESTADO_MULTA = 11 
        OR V_REG_T_SCOB_MULTA.ESTADO_MULTA = 12 OR V_REG_T_SCOB_MULTA.ESTADO_MULTA = 13 THEN
      V_VC_UBICACIONFISICA := 'AEC'; 
    ELSE
        V_VC_UBICACIONFISICA := ''; 
    END IF;
    
    -- SE ACTUALIZA LA MULTA
    UPDATE SGCORESYS.CO_MULTA SET 
      UBICACIONFISICA = V_VC_UBICACIONFISICA
    WHERE   
      IDENTIFICADOR = V_VC_IDENTIFICADOR;                          
    
    COMMIT;
    
    POUT_NU_COD_RESULT := 0;
    POUT_VC_MSG_RESULT := 'CONFORME';
  
  EXCEPTION
    WHEN EX_CONTROLADO THEN
      POUT_NU_COD_RESULT := -1;
    WHEN OTHERS THEN
      POUT_NU_COD_RESULT := -1;
      POUT_VC_MSG_RESULT := 'ERROR NO CONTROLADO : SP_U_MARCAR_MULTA_SICOB_A_SIA - ERROR : ' ||
                        SQLERRM;
  END SP_U_MARCAR_MULTA_SICOB_A_SIA;
  
  PROCEDURE SP_I_ARCH_CENTRAL_SICOB_A_SIA(PIN_NU_ID_MULTA   IN NUMBER,
                                          POUT_NU_COD_RESULT OUT NUMBER,
                                          POUT_VC_MSG_RESULT OUT VARCHAR2) IS
  
    V_REG_T_SCOB_MULTA                 USR_SICOB.T_SCOB_MULTA%ROWTYPE;    
    V_REG_T_SCOB_ARCHIVO_CENTRAL       USR_SICOB.T_SCOB_ARCHIVO_CENTRAL%ROWTYPE;
    
    V_VC_IDENTIFICADOR                 SGCORESYS.CO_MULTA.IDENTIFICADOR%TYPE;
    V_VC_UBICACIONFISICA               SGCORESYS.CO_MULTA.UBICACIONFISICA%TYPE;    
    V_VD_ENVIOFECHA                    SGCORESYS.CO_MULTA.ENVIOFECHA%TYPE;        
    
  BEGIN
        
    BEGIN
    
      SELECT MULTA.*
        INTO V_REG_T_SCOB_MULTA
        FROM USR_SICOB.T_SCOB_MULTA MULTA
       WHERE MULTA.ID_MULTA = PIN_NU_ID_MULTA
             AND MULTA.ESTADO = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE MULTA CON : ID_MULTA => ' ||
                          PIN_NU_ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MULTA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;     
    
    BEGIN
    
      SELECT ARCH_CEN.*
        INTO V_REG_T_SCOB_ARCHIVO_CENTRAL
        FROM USR_SICOB.T_SCOB_MULTA_ARCHIVO_CENTRAL EXPED_ARCH_CEN          
        LEFT JOIN USR_SICOB.T_SCOB_ARCHIVO_CENTRAL ARCH_CEN
          ON ARCH_CEN.ID_ARCHIVO_CENTRAL = EXPED_ARCH_CEN.ID_MULTA_ARCHIVO_CENTRAL
         AND ARCH_CEN.ESTADO = '1'
         WHERE EXPED_ARCH_CEN.ID_MULTA = V_REG_T_SCOB_MULTA.ID_MULTA
         AND EXPED_ARCH_CEN.FLG_ACTUAL = '1'
         AND EXPED_ARCH_CEN.ESTADO = '1';
        
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE ARCHIVO CENTRAL CON : ID_MULTA => ' ||
                          V_REG_T_SCOB_MULTA.ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_ARCHIVO_CENTRAL - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;   
      
    V_VC_IDENTIFICADOR := V_REG_T_SCOB_MULTA.ANIO || V_REG_T_SCOB_MULTA.CUM;   
    V_VD_ENVIOFECHA := V_REG_T_SCOB_ARCHIVO_CENTRAL.FEC_ENVIO;
    
    IF V_REG_T_SCOB_MULTA.ESTADO_ENVIO_ARCHIVO = 2 THEN
      V_VC_UBICACIONFISICA := 'ARCHIVO CENTRAL'; 
    ELSIF V_REG_T_SCOB_MULTA.ESTADO_MULTA = 9 OR V_REG_T_SCOB_MULTA.ESTADO_MULTA = 10 OR V_REG_T_SCOB_MULTA.ESTADO_MULTA = 11 
        OR V_REG_T_SCOB_MULTA.ESTADO_MULTA = 12 OR V_REG_T_SCOB_MULTA.ESTADO_MULTA = 13 THEN
      V_VC_UBICACIONFISICA := 'AEC'; 
    ELSE
        V_VC_UBICACIONFISICA := ''; 
    END IF;
    
    -- SE ACTUALIZA LA MULTA
    UPDATE SGCORESYS.CO_MULTA SET 
      UBICACIONFISICA = V_VC_UBICACIONFISICA,
      ENVIOFECHA = V_VD_ENVIOFECHA
    WHERE   
      IDENTIFICADOR = V_VC_IDENTIFICADOR;                          
    
    COMMIT;
    
    POUT_NU_COD_RESULT := 0;
    POUT_VC_MSG_RESULT := 'CONFORME';
  
  EXCEPTION
    WHEN EX_CONTROLADO THEN
      POUT_NU_COD_RESULT := -1;
    WHEN OTHERS THEN
      POUT_NU_COD_RESULT := -1;
      POUT_VC_MSG_RESULT := 'ERROR NO CONTROLADO : SP_U_MARCAR_MULTA_SICOB_A_SIA - ERROR : ' ||
                        SQLERRM;
  END SP_I_ARCH_CENTRAL_SICOB_A_SIA;
  
  PROCEDURE SP_I_CRONOGRAMA_SICOB_A_SIA(PIN_NU_ID_MULTA                IN NUMBER,    
                                        POUT_NU_COD_RESULT              OUT NUMBER,
                                        POUT_VC_MSG_RESULT              OUT VARCHAR2) IS
  
    V_REG_T_SCOB_EXPED_CRONOGRAMA_DET  USR_SICOB.T_SCOB_EXPED_CRONOGRAMA_DET%ROWTYPE;      
    V_REG_T_SCOB_MULTA                 USR_SICOB.T_SCOB_MULTA%ROWTYPE;  
    V_REG_T_SCOB_EXPEDIENTE            USR_SICOB.T_SCOB_EXPEDIENTE%ROWTYPE;
    
    V_VC_IDENTIFICADOR                 SGCORESYS.CO_MULTACUOTA.IDENTIFICADOR%TYPE;
    V_NU_CUOTA                         SGCORESYS.CO_MULTACUOTA.CUOTA%TYPE;
    V_VD_FECHAVENCIMIENTO              SGCORESYS.CO_MULTACUOTA.FECHAVENCIMIENTO%TYPE;
    V_NU_CAPITAL                       SGCORESYS.CO_MULTACUOTA.CAPITAL%TYPE;
    V_NU_INTERESES                     SGCORESYS.CO_MULTACUOTA.INTERESES%TYPE;
    V_NU_IMPORTE                       SGCORESYS.CO_MULTACUOTA.IMPORTE%TYPE;
    V_NU_GASTOS                        SGCORESYS.CO_MULTACUOTA.GASTOS%TYPE;
    V_NU_MORA                          SGCORESYS.CO_MULTACUOTA.MORA%TYPE;
    V_NU_TOTAL                         SGCORESYS.CO_MULTACUOTA.TOTAL%TYPE;
    V_NU_AMORTIZADOMONTO               SGCORESYS.CO_MULTACUOTA.AMORTIZADOMONTO%TYPE;
    V_NU_AMORTIZADOCAPITAL             SGCORESYS.CO_MULTACUOTA.AMORTIZADOCAPITAL%TYPE;
    V_NU_SALDOCUOTA                    SGCORESYS.CO_MULTACUOTA.SALDOCUOTA%TYPE;
    V_NU_SALDOCAPITAL                  SGCORESYS.CO_MULTACUOTA.SALDOCAPITAL%TYPE;
    V_VD_FECHAAPROBACIONCUOTA          SGCORESYS.CO_MULTACUOTA.FECHAAPROBACIONCUOTA%TYPE;
    V_VC_PERIODOCUOTA                  SGCORESYS.CO_MULTACUOTA.PERIODOCUOTA%TYPE;
    V_VC_VOUCHER                       SGCORESYS.CO_MULTACUOTA.VOUCHER%TYPE;
    V_VC_COMPROBANTEINGRESO            SGCORESYS.CO_MULTACUOTA.COMPROBANTEINGRESO%TYPE;
    V_NU_SALDOINTERES                  SGCORESYS.CO_MULTACUOTA.SALDOINTERES%TYPE;
    V_NU_SALDOMORA                     SGCORESYS.CO_MULTACUOTA.SALDOMORA%TYPE;
    V_NU_SALDOCOSTAS                   SGCORESYS.CO_MULTACUOTA.SALDOCOSTAS%TYPE;
    V_NU_AMORTIZADOINTERES             SGCORESYS.CO_MULTACUOTA.AMORTIZADOINTERES%TYPE;
    V_NU_AMORTIZADOMORA                SGCORESYS.CO_MULTACUOTA.AMORTIZADOMORA%TYPE;
    V_NU_AMORTIZADOCOSTA               SGCORESYS.CO_MULTACUOTA.AMORTIZADOCOSTA%TYPE;

    CURSOR CURSOR_CUOTAS_CRONOGRAMA(P_ID_MULTA NUMBER) IS
      SELECT ECDE.*
        FROM USR_SICOB.T_SCOB_EXPED_CRONOGRAMA_DET ECDE
       INNER JOIN USR_SICOB.T_SCOB_EXPED_CRONOGRAMA CRONO
         ON CRONO.ID_EXPED_CRONOGRAMA_PAGO = ECDE.ID_EXPED_CRONOGRAMA_PAGO
         AND CRONO.ESTADO = '1'
       INNER JOIN USR_SICOB.T_SCOB_EXPEDIENTE_MULTA EXMU
         ON EXMU.ID_EXPEDIENTE = CRONO.ID_EXPEDIENTE
         AND EXMU.ESTADO = '1'
       INNER JOIN USR_SICOB.T_SCOB_EXPEDIENTE EXPE
         ON EXPE.ID_EXPEDIENTE = EXMU.ID_EXPEDIENTE
         AND EXPE.ESTADO = '1'
       WHERE  ECDE.ESTADO = '1'
         AND EXMU.ID_MULTA = P_ID_MULTA;
  
  BEGIN
  
    BEGIN
    
      SELECT MULTA.*
        INTO V_REG_T_SCOB_MULTA
        FROM USR_SICOB.T_SCOB_MULTA MULTA
       WHERE MULTA.ID_MULTA = PIN_NU_ID_MULTA
             AND MULTA.ESTADO = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE MULTA CON : ID_MULTA => ' ||
                          PIN_NU_ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MULTA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT EXPE.*
        INTO V_REG_T_SCOB_EXPEDIENTE
         FROM USR_SICOB.T_SCOB_EXPEDIENTE_MULTA EXMU
        LEFT JOIN USR_SICOB.T_SCOB_EXPEDIENTE EXPE
          ON EXPE.ID_EXPEDIENTE = EXMU.ID_EXPEDIENTE
         AND EXPE.ESTADO = '1'
          WHERE EXMU.ID_MULTA = V_REG_T_SCOB_MULTA.ID_MULTA
         AND EXMU.ESTADO = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE EXPEDIENTE CON : ID_MULTA => ' ||
                          V_REG_T_SCOB_MULTA.ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_EXPEDIENTE - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    OPEN CURSOR_CUOTAS_CRONOGRAMA(PIN_NU_ID_MULTA);
      
      LOOP 
          
        FETCH CURSOR_CUOTAS_CRONOGRAMA INTO V_REG_T_SCOB_EXPED_CRONOGRAMA_DET;
           
        EXIT WHEN CURSOR_CUOTAS_CRONOGRAMA%NOTFOUND;    
        
        V_VC_IDENTIFICADOR := V_REG_T_SCOB_MULTA.ANIO || V_REG_T_SCOB_MULTA.CUM;
        V_NU_CUOTA := V_REG_T_SCOB_EXPED_CRONOGRAMA_DET.NRO_CUOTA;
        V_VD_FECHAVENCIMIENTO := V_REG_T_SCOB_EXPED_CRONOGRAMA_DET.FEC_VENCIMIENTO;
        V_NU_CAPITAL := V_REG_T_SCOB_EXPED_CRONOGRAMA_DET.MONTO_DEUDA_AMORTIZA_CRONO;
        V_NU_INTERESES := V_REG_T_SCOB_EXPED_CRONOGRAMA_DET.MONTO_INTERES;
        V_NU_IMPORTE := V_REG_T_SCOB_EXPED_CRONOGRAMA_DET.MONTO_TOTAL_DEUDA;
        V_NU_GASTOS := V_REG_T_SCOB_EXPED_CRONOGRAMA_DET.MONTO_COSTAS;
        V_NU_MORA := V_REG_T_SCOB_EXPED_CRONOGRAMA_DET.MONTO_INTERES_MORATORIO;
        V_NU_TOTAL := V_REG_T_SCOB_EXPED_CRONOGRAMA_DET.MONTO_TOTAL_DEUDA;
        V_NU_AMORTIZADOMONTO := V_REG_T_SCOB_EXPED_CRONOGRAMA_DET.TOTAL_AMORTIZADO_DEUDA;
        V_NU_AMORTIZADOCAPITAL := V_REG_T_SCOB_EXPED_CRONOGRAMA_DET.TOTAL_AMORTIZADO;
        V_NU_SALDOCUOTA := V_REG_T_SCOB_EXPED_CRONOGRAMA_DET.SALDO_TOTAL_DEUDA;
        V_NU_SALDOCAPITAL := V_REG_T_SCOB_EXPED_CRONOGRAMA_DET.SALDO;
        V_VD_FECHAAPROBACIONCUOTA := TRUNC(V_REG_T_SCOB_EXPEDIENTE.FEC_ESTADO_EXPEDIENTE);
        V_VC_PERIODOCUOTA := TO_CHAR(V_REG_T_SCOB_EXPEDIENTE.FEC_ESTADO_EXPEDIENTE,'YYYYMM');
        V_VC_VOUCHER := NULL;
        --REVISAR QUERY12 EN QUE MOMENTO APLICARLO
        V_VC_COMPROBANTEINGRESO := NULL;
        V_NU_SALDOINTERES := V_REG_T_SCOB_EXPED_CRONOGRAMA_DET.SALDO_IC;
        V_NU_SALDOMORA := V_REG_T_SCOB_EXPED_CRONOGRAMA_DET.SALDO_IM;
        V_NU_SALDOCOSTAS := V_REG_T_SCOB_EXPED_CRONOGRAMA_DET.SALDO_COSTAS;
        V_NU_AMORTIZADOINTERES := V_REG_T_SCOB_EXPED_CRONOGRAMA_DET.TOTAL_AMORTIZADO_IC;
        V_NU_AMORTIZADOMORA := V_REG_T_SCOB_EXPED_CRONOGRAMA_DET.TOTAL_AMORTIZADO_IM;
        V_NU_AMORTIZADOCOSTA := V_REG_T_SCOB_EXPED_CRONOGRAMA_DET.TOTAL_AMORTIZADO_COSTAS;

        INSERT INTO SGCORESYS.CO_MULTACUOTA
          (
            IDENTIFICADOR,
            CUOTA,
            FECHAVENCIMIENTO,
            CAPITAL,
            INTERESES,
            IMPORTE,
            GASTOS,
            MORA,
            TOTAL,
            AMORTIZADOMONTO,
            AMORTIZADOCAPITAL,
            SALDOCUOTA,
            SALDOCAPITAL,
            FECHAAPROBACIONCUOTA,
            PERIODOCUOTA,
            VOUCHER,
            COMPROBANTEINGRESO,
            SALDOINTERES,
            SALDOMORA,
            SALDOCOSTAS,
            AMORTIZADOINTERES,
            AMORTIZADOMORA,
            AMORTIZADOCOSTA
          )
        VALUES
          (
            V_VC_IDENTIFICADOR,
            V_NU_CUOTA,
            V_VD_FECHAVENCIMIENTO,
            V_NU_CAPITAL,
            V_NU_INTERESES,
            V_NU_IMPORTE,
            V_NU_GASTOS,
            V_NU_MORA,
            V_NU_TOTAL,
            V_NU_AMORTIZADOMONTO,
            V_NU_AMORTIZADOCAPITAL,
            V_NU_SALDOCUOTA,
            V_NU_SALDOCAPITAL,
            V_VD_FECHAAPROBACIONCUOTA,
            V_VC_PERIODOCUOTA,
            V_VC_VOUCHER,
            V_VC_COMPROBANTEINGRESO,
            V_NU_SALDOINTERES,
            V_NU_SALDOMORA,
            V_NU_SALDOCOSTAS,
            V_NU_AMORTIZADOINTERES,
            V_NU_AMORTIZADOMORA,
            V_NU_AMORTIZADOCOSTA
          );
                     
      END LOOP;
        
    CLOSE CURSOR_CUOTAS_CRONOGRAMA;        
    
    COMMIT;
    
    POUT_NU_COD_RESULT := 0;
    POUT_VC_MSG_RESULT := 'CONFORME';
  
  EXCEPTION
    WHEN EX_CONTROLADO THEN
      POUT_NU_COD_RESULT := -1;
    WHEN OTHERS THEN
      POUT_NU_COD_RESULT := -1;
      POUT_VC_MSG_RESULT := 'ERROR NO CONTROLADO : SP_I_CRONOGRAMA_SICOB_A_SIA - ERROR : ' || SQLERRM;
                        
  END SP_I_CRONOGRAMA_SICOB_A_SIA;
  
  PROCEDURE SP_I_COACTIVO_SICOB_A_SIA(PIN_NU_ID_MULTA   IN NUMBER,
                                      POUT_NU_COD_RESULT OUT NUMBER,
                                      POUT_VC_MSG_RESULT OUT VARCHAR2) IS
  
    V_REG_T_SCOB_MULTA                 USR_SICOB.T_SCOB_MULTA%ROWTYPE;
    V_REG_T_SCOB_MULTA_DETAL           USR_SICOB.T_SCOB_MULTA_DETAL%ROWTYPE;    
    V_REG_T_SCOB_EXPEDIENTE            USR_SICOB.T_SCOB_EXPEDIENTE%ROWTYPE;
    V_REG_T_SCOB_EST_EXP_COB_MOTIVO    USR_SICOB.T_SCOB_EST_EXP_COB_MOTIVO%ROWTYPE;
    V_REG_T_SCOB_EST_EXP_COB           USR_SICOB.T_SCOB_EST_EXP_COB%ROWTYPE;
    
    V_VC_IDENTIFICADOR                 SGCORESYS.CO_MULTA.IDENTIFICADOR%TYPE;
    V_VC_ESTADOMULTA                   SGCORESYS.CO_MULTA.ESTADOMULTA%TYPE;       
    V_VC_TIPOFRACCIONAMIENTO           SGCORESYS.CO_MULTA.TIPOFRACCIONAMIENTO%TYPE;
    V_VD_COBFECHAULTIMO                SGCORESYS.CO_MULTA.COBFECHAULTIMO%TYPE;
    V_VC_CODMOTIVOMULTA                SGCORESYS.CO_MULTA.CODMOTIVOMULTA%TYPE;
    V_VC_COBEXPEDIENTEMOTIVO           SGCORESYS.CO_MULTA.COBEXPEDIENTEMOTIVO%TYPE;
    V_VC_COBEXPEDIENTEESTADO           SGCORESYS.CO_MULTA.COBEXPEDIENTEESTADO%TYPE;
    V_NU_GASTOS                        SGCORESYS.CO_MULTA.GASTOS%TYPE; 
    V_NU_SALDOGASTOS                   SGCORESYS.CO_MULTA.SALDOGASTOS%TYPE; 
    V_VD_RECFECHAEMISION               SGCORESYS.CO_MULTA.RECFECHAEMISION%TYPE; 
    V_VD_FECHACARTA                    SGCORESYS.CO_MULTA.FECHACARTA%TYPE; 
    V_NU_UITMONTOCAPITAL               SGCORESYS.CO_MULTA.UITMONTOCAPITAL%TYPE; 
    V_NU_SALDO                         SGCORESYS.CO_MULTA.SALDO%TYPE; 
    
    V_VC_ME_IDENTIFICADOR                 SGCORESYS.CO_MULTAESTADO.IDENTIFICADOR%TYPE;
    V_NU_ME_SECUENCIA                     SGCORESYS.CO_MULTAESTADO.SECUENCIA%TYPE;
    V_VC_ME_ESTADOEXPEDIENTE              SGCORESYS.CO_MULTAESTADO.ESTADOEXPEDIENTE%TYPE;    
    V_VC_ME_CODIGOMOTIVOEXPEDIENTE        SGCORESYS.CO_MULTAESTADO.CODIGOMOTIVOEXPEDIENTE%TYPE;  
    V_NU_ME_GASTOS                        SGCORESYS.CO_MULTAESTADO.GASTOS%TYPE; 
    V_NU_ME_GASTOS_ANT                    SGCORESYS.CO_MULTAESTADO.GASTOS_ANT%TYPE; 
    V_NU_ME_SALDOGASTOS                   SGCORESYS.CO_MULTAESTADO.SALDOGASTOS%TYPE; 
    V_NU_ME_CAPITAL                       SGCORESYS.CO_MULTAESTADO.CAPITAL%TYPE; 
    V_NU_ME_CAPITAL_ANT                   SGCORESYS.CO_MULTAESTADO.CAPITAL_ANT%TYPE; 
    V_NU_ME_SALDOCAPITAL                  SGCORESYS.CO_MULTAESTADO.SALDOCAPITAL%TYPE;   
    
    V_VC_ESTADOMULTA_SIA                  SGCORESYS.CO_MULTA.ESTADOMULTA%TYPE;
    V_NU_SECUENCIA_ACTUAL                 SGCORESYS.CO_MULTAESTADO.SECUENCIA%TYPE;
    
  BEGIN
        
    BEGIN
    
      SELECT MULTA.*
        INTO V_REG_T_SCOB_MULTA
        FROM USR_SICOB.T_SCOB_MULTA MULTA
       WHERE MULTA.ID_MULTA = PIN_NU_ID_MULTA
             AND MULTA.ESTADO = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE MULTA CON : ID_MULTA => ' ||
                          PIN_NU_ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MULTA - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT MULTA_DETALLE.*
        INTO V_REG_T_SCOB_MULTA_DETAL
        FROM USR_SICOB.T_SCOB_MULTA_DETAL MULTA_DETALLE
       WHERE MULTA_DETALLE.ID_MULTA = PIN_NU_ID_MULTA
             AND MULTA_DETALLE.ESTADO = '1'
             AND MULTA_DETALLE.FLG_ACTUAL = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE DETALLE DE MULTA CON : ID_MULTA => ' ||
                          PIN_NU_ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_MULTA_DETAL - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT EXPE.*
        INTO V_REG_T_SCOB_EXPEDIENTE
         FROM USR_SICOB.T_SCOB_EXPEDIENTE_MULTA EXMU
        LEFT JOIN USR_SICOB.T_SCOB_EXPEDIENTE EXPE
          ON EXPE.ID_EXPEDIENTE = EXMU.ID_EXPEDIENTE
         AND EXPE.ESTADO = '1'
          WHERE EXMU.ID_MULTA = V_REG_T_SCOB_MULTA.ID_MULTA
         AND EXMU.ESTADO = '1';
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE EXPEDIENTE CON : ID_MULTA => ' ||
                          V_REG_T_SCOB_MULTA.ID_MULTA;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_EXPEDIENTE - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT EXCM.*
        INTO V_REG_T_SCOB_EST_EXP_COB_MOTIVO
        FROM USR_SICOB.T_SCOB_EST_EXP_COB_MOTIVO EXCM
       WHERE EXCM.ID_MOTIVO = V_REG_T_SCOB_EXPEDIENTE.ID_MOTIVO;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE AREA DE ESTADO DE MOTIVO DE COBRANZA CON : ID_MOTIVO => ' ||
                          V_REG_T_SCOB_EXPEDIENTE.ID_MOTIVO;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_EST_EXP_COB_MOTIVO - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
    
    BEGIN
    
      SELECT ESEC.*
        INTO V_REG_T_SCOB_EST_EXP_COB
        FROM USR_SICOB.T_SCOB_EST_EXP_COB ESEC
       WHERE ESEC.ID_EST_EXP_COB = V_REG_T_SCOB_EXPEDIENTE.ESTADO_EXPEDIENTE;
    
    EXCEPTION
      WHEN NO_DATA_FOUND THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : NO HAY DATOS DE AREA DE ESTADO DE EXPEDIENTE DE COBRANZA CON : ESTADO_EXPEDIENTE => ' ||
                          V_REG_T_SCOB_EXPEDIENTE.ESTADO_EXPEDIENTE;
        RAISE EX_CONTROLADO;
      WHEN OTHERS THEN
        POUT_VC_MSG_RESULT := 'NO CONFORME : SP_I_MULTA_SICOB_A_SIA - CONSULTA T_SCOB_EST_EXP_COB - ERROR : ' ||
                          SQLERRM;
        RAISE EX_CONTROLADO;
    END;
      
    V_VC_IDENTIFICADOR := V_REG_T_SCOB_MULTA.ANIO || V_REG_T_SCOB_MULTA.CUM; 
    V_VC_ESTADOMULTA := V_REG_T_SCOB_MULTA_DETAL.ESTADO_MULTA;            
    V_VD_COBFECHAULTIMO := V_REG_T_SCOB_EXPEDIENTE.FEC_ESTADO_EXPEDIENTE;
    V_VC_TIPOFRACCIONAMIENTO := (CASE WHEN V_REG_T_SCOB_EXPEDIENTE.ESTADO_EXPEDIENTE = 4 THEN 'FR' ELSE 'NF' END);
    V_VC_CODMOTIVOMULTA := V_REG_T_SCOB_EST_EXP_COB_MOTIVO.CODIGO;
    V_VC_COBEXPEDIENTEESTADO := V_REG_T_SCOB_EST_EXP_COB.CODIGO;
    V_VC_COBEXPEDIENTEMOTIVO := V_REG_T_SCOB_EST_EXP_COB_MOTIVO.CODIGO;   
    
    V_NU_GASTOS := V_REG_T_SCOB_MULTA.MONTO_COSTAS;        
    V_NU_SALDOGASTOS := V_REG_T_SCOB_MULTA.SALDO_COSTAS;
    V_VD_RECFECHAEMISION := V_REG_T_SCOB_MULTA.FEC_EMISION_REC;
    V_VD_FECHACARTA := V_REG_T_SCOB_MULTA.FEC_ULT_GEN_PRECOACTIVA;
    V_NU_UITMONTOCAPITAL := V_REG_T_SCOB_MULTA.MONTO_UIT;
    V_NU_SALDO := V_REG_T_SCOB_MULTA.SALDO;
    
    -- SE SACA EL ESTADO DE LA MULTA DEL SIA 
    SELECT ESTADOMULTA INTO V_VC_ESTADOMULTA_SIA
      FROM SGCORESYS.CO_MULTA
      WHERE IDENTIFICADOR = V_VC_IDENTIFICADOR;
    
    -- SE ACTUALIZA LA MULTA
    UPDATE SGCORESYS.CO_MULTA SET 
      ESTADOMULTA = V_VC_ESTADOMULTA,
      COBFECHAULTIMO = V_VD_COBFECHAULTIMO,
      TIPOFRACCIONAMIENTO = V_VC_TIPOFRACCIONAMIENTO,
      CODMOTIVOMULTA = V_VC_CODMOTIVOMULTA,
      COBEXPEDIENTEESTADO = V_VC_COBEXPEDIENTEESTADO,
      COBEXPEDIENTEMOTIVO = V_VC_COBEXPEDIENTEMOTIVO,
      GASTOS = V_NU_GASTOS,
      SALDOGASTOS = V_NU_SALDOGASTOS,
      RECFECHAEMISION = V_VD_RECFECHAEMISION,
      FECHACARTA = V_VD_FECHACARTA,
      UITMONTOCAPITAL = V_NU_UITMONTOCAPITAL,
      SALDO = V_NU_SALDO
    WHERE   
      IDENTIFICADOR = V_VC_IDENTIFICADOR;               
      
    SELECT MAX(SECUENCIA) INTO V_NU_SECUENCIA_ACTUAL
          FROM SGCORESYS.CO_MULTAESTADO
          WHERE IDENTIFICADOR = V_VC_IDENTIFICADOR;   
      
    V_VC_ME_IDENTIFICADOR := V_REG_T_SCOB_MULTA.ANIO || V_REG_T_SCOB_MULTA.CUM;
    V_NU_ME_SECUENCIA := V_NU_SECUENCIA_ACTUAL;
    V_VC_ME_ESTADOEXPEDIENTE := V_REG_T_SCOB_EST_EXP_COB.CODIGO;
    V_VC_ME_CODIGOMOTIVOEXPEDIENTE := V_REG_T_SCOB_EST_EXP_COB_MOTIVO.CODIGO;
    
    V_NU_ME_GASTOS := V_REG_T_SCOB_MULTA.MONTO_COSTAS;
    V_NU_ME_GASTOS_ANT := V_REG_T_SCOB_MULTA.MONTO_COSTAS;
    V_NU_ME_SALDOGASTOS := V_REG_T_SCOB_MULTA.SALDO_COSTAS;
    V_NU_ME_CAPITAL := V_REG_T_SCOB_MULTA.MONTO_UIT;
    V_NU_ME_CAPITAL_ANT := V_REG_T_SCOB_MULTA.MONTO_UIT;
    V_NU_ME_SALDOCAPITAL := V_REG_T_SCOB_MULTA.SALDO;
    
    -- SE ACTUALIZA EL ESTADO DE LA MULTA
    UPDATE SGCORESYS.CO_MULTAESTADO SET        
      ESTADOEXPEDIENTE = V_VC_ME_ESTADOEXPEDIENTE,        
      CODIGOMOTIVOEXPEDIENTE = V_VC_ME_CODIGOMOTIVOEXPEDIENTE,
      GASTOS = V_NU_ME_GASTOS,
      GASTOS_ANT = V_NU_ME_GASTOS_ANT,
      SALDOGASTOS = V_NU_ME_SALDOGASTOS,
      CAPITAL = V_NU_ME_CAPITAL,
      CAPITAL_ANT = V_NU_ME_CAPITAL_ANT,
      SALDOCAPITAL = V_NU_ME_SALDOCAPITAL     
    WHERE 
      IDENTIFICADOR = V_VC_ME_IDENTIFICADOR
      AND SECUENCIA = V_NU_ME_SECUENCIA;       
    
    COMMIT;
    
    POUT_NU_COD_RESULT := 0;
    POUT_VC_MSG_RESULT := 'CONFORME';
  
  EXCEPTION
    WHEN EX_CONTROLADO THEN
      POUT_NU_COD_RESULT := -1;
    WHEN OTHERS THEN
      POUT_NU_COD_RESULT := -1;
      POUT_VC_MSG_RESULT := 'ERROR NO CONTROLADO : SP_I_COACTIVO_SICOB_A_SIA - ERROR : ' ||
                        SQLERRM;
  END SP_I_COACTIVO_SICOB_A_SIA;
  
END;
/
